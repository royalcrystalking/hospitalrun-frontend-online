{{#em-form model=this submit_button=false }}
    {{#if selectPatient}}
        {{patient-typeahead property="patientTypeAhead" label="Patient" content=patientList selection=selectedPatient class="required"}}
    {{else}}
        {{patient-summary patient=patient returnTo='imaging.edit' returnToContext=id disablePatientLink=isNew }}
    {{/if}}
    <div class="row">
        {{#if isNew}}
            {{em-select class="col-xs-3 required" label="Visit" 
                property="visit" content=patientVisits
                optionValuePath="content" optionLabelPath="content.visitDescription"
                prompt="--Add New Visit--"
                selected=visit
            }}
        {{else}}        
            <div class="form-group col-xs-3">
                <label>Visit</label>
                <p class="form-control-static">{{visit.visitDate}}</p>
            </div>
        {{/if}}
        {{#if isNew}}
            {{select-or-typeahead property="imagingTypeName" 
                label="Imaging Type" list=objectTypeList
                selection=selectedImagingType
                optionLabelPath='content.name'
                typeAheadType='pricing'
                class="required col-xs-9"
                prompt=" "
            }}
        {{else}}
            <div class="form-group col-xs-9">
                <label>Imaging Type</label>
                <p class="form-control-static">{{imagingType.name}}</p>
            </div>
        {{/if}}
    </div>
    {{#if canComplete}}
        {{em-input property="result" label="Result"}}
    {{/if}}
    {{em-text property="notes" label="Notes" rows=3 }}
    {{#if showCharges}}
        {{partial 'item-charges'}}
    {{/if}}
{{/em-form}}
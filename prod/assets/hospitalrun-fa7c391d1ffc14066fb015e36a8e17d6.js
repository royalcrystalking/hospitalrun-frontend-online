define("hospitalrun/adapters/application",["ember","hospitalrun/mixins/pouch-adapter-utils","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=DS.PouchDBAdapter.extend(n,{_specialQueries:["containsValue","mapReduce","options.startkey","options.endkey","searchIndex"],_executeContainsSearch:function(e,t,s,n){return new a.RSVP.Promise(function(r,i){var o="/search/hrdb/"+t.typeKey+"/_search";if(s.containsValue&&s.containsValue.value){var l="";s.containsValue.keys.forEach(function(e){a.isEmpty(l)||(l+=" OR "),l+=e+":"+s.containsValue.value}),a.$.ajax(o,{dataType:"json",data:{q:l},success:function(s){if(s&&s.hits&&s.hits.hits){var o=a.A(s.hits.hits).map(function(e){return{doc:e._source}}),l={rows:o};this._handleQueryResponse(r,l,e,t,n)}else s.rows?this._handleQueryResponse(r,s,e,t,n):i("Search results are not valid")}.bind(this)})}else i("invalid query")}.bind(this))},_handleQueryResponse:function(e,t,s,n,r){if(t.rows){var i=a.A(t.rows).mapBy("doc");a.isNone(r.embed)&&(r.embed=!0),this._resolveRelationships(s,n,i,r).then(function(t){e(t)}.bind(this))}},findQuery:function(e,t,s,n){for(var r=!1,i=0;i<this._specialQueries.length;i++)if(a.get(s,this._specialQueries[i])){r=!0;break}if(r){var o=null,l={};if(s.searchIndex&&(l=s.searchIndex),s.options&&(l=a.copy(s.options),s.sortKey&&(s.sortDesc&&(l.sortDesc=s.sortDesc),l.sortKey=s.sortKey,l.sortLimit=l.limit,delete l.limit,l.sortStartKey=JSON.stringify(l.startkey),delete l.startkey)),l.reduce=!1,l.include_docs=!0,s.mapReduce)o=s.mapReduce;else if(s.containsValue)return this._executeContainsSearch(e,t,s,n);return new a.RSVP.Promise(function(a,r){this._getDb().then(function(i){try{if(o)if(s.sortKey){var u={query:l};i.list(o+"/sort/"+o,u,function(s,i){s?this._pouchError(r)(s):this._handleQueryResponse(a,i.json,e,t,n)}.bind(this))}else i.query(o,l,function(s,i){s?this._pouchError(r)(s):this._handleQueryResponse(a,i,e,t,n)}.bind(this));else i.allDocs(l,function(s,i){s?this._pouchError(r)(s):this._handleQueryResponse(a,i,e,t,n)}.bind(this))}catch(h){this._pouchError(r)(h)}}.bind(this),this._pouchError(r))}.bind(this),"findQuery in application-pouchdb-adapter")}if(s.options){var u=a.copy(s);return delete u.options,this._super(e,t,u,s.options)}return this._super(e,t,s,n)}})}),define("hospitalrun/mixins/pouch-adapter-utils",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({_idToPouchId:function(e,t){return t=t.typeKey||t,[t,e].join("_")},_pouchError:function(e){return function(t){if(401===t.status){var a=this.get("session");s.isEmpty(a)||a.invalidate()}var n=[t.status,(t.name||t.error)+":",t.message||t.reason].join(" ");s.run(null,e,n)}.bind(this)}})}),define("hospitalrun/adapters/config",["ember","hospitalrun/mixins/pouch-adapter-utils","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=DS.PouchDBAdapter.extend(n,{databaseName:"config",_mapQuery:function(e,t){e._id&&t(e._id,null)},findQuery:function(e,t,s,n){if(s.exactKeys){var r=this,i={reduce:!1,include_docs:!0};return i.keys=s.exactKeys.map(function(e){return r._idToPouchId(e,"config")}),new a.RSVP.Promise(function(e,t){r._getDb().then(function(s){try{s.query(r._mapQuery,i,function(s,n){if(s)r._pouchError(t)(s);else if(n.rows){var i=a.A(n.rows).mapBy("doc");a.run(null,e,i)}})}catch(n){r._pouchError(t)(n)}},r._pouchError(t))},"findQuery in config-pouchdb-adapter")}return this._super(e,t,s,n)}})}),define("hospitalrun/adapters/user",["ember","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=DS.RESTAdapter.extend(n,{endpoint:"/db/_users/",defaultSerializer:"couchdb",ajaxError:function(e){var t=this._super(e);if(e&&401===e.status){var s=a.$.parseJSON(e.responseText);return window.Hospitalrun.__container__.lookup("controller:application").transitionToRoute("login"),new DS.InvalidError(s)}return t},ajaxOptions:function(e,t,s){return s=s||{},s.xhrFields={withCredentials:!0},this._super(e,t,s)},createRecord:function(e,t,s){return this.updateRecord(e,t,s)},deleteRecord:function(e,t,s){var a={data:s.getProperties("id","rev")};return a.data.name=this.getUserName(!0),this.ajax("/deleteuser","POST",a)},find:function(e,t,s){var a={data:{id:s,name:this.getUserName(!0)}};return this.ajax("/getuser","POST",a)},updateRecord:function(e,t,s){var n={},r=e.serializerFor(t.typeKey);r.serializeIntoHash(n,t,s,{includeId:!0}),n=n.user,n.type="user";var i=n.id,o=n.rev;delete n.id,delete n.rev,n=this._cleanPasswordAttrs(n);var l={data:{data:n,updateParams:{doc_name:i},name:this.getUserName(!0)}};return a.isEmpty(o)||(l.data.updateParams.rev=o),this.ajax("/updateuser","POST",l)},findAll:function(){var e={data:{name:this.getUserName(!0)}},t="/allusers";return this.ajax(t,"POST",e)},_cleanPasswordAttrs:function(e){var t=["derived_key","password","password_scheme","password_sha","salt","iterations"];return t.forEach(function(t){a.isEmpty(e[t])&&delete e[t]}),e},_getItemUrl:function(e){var t=[this.endpoint];t.push(a.get(e,"id"));var s=a.get(e,"rev");return s&&(t.push("?rev="),t.push(s)),t.join("")}})}),define("hospitalrun/mixins/user-session",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({defaultCapabilities:{admin:["User Administrator","System Administrator"],appointments:["Data Entry","Finance","Hospital Administrator","Medical Records Officer","Patient Administration","Social Worker","System Administrator"],add_appointment:["Data Entry","Finance","Hospital Administrator","Medical Records Officer","Patient Administration","Social Worker","System Administrator"],add_charge:["Data Entry","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],add_diagnosis:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Patient Administration","System Administrator"],add_medication:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Pharmacist","System Administrator"],add_photo:["Data Entry","Hospital Administrator","Medical Records Officer","Patient Administration","Social Worker","System Administrator"],add_patient:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Patient Administration","Social Worker","System Administrator"],add_pricing:["Data Entry","Finance","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],add_pricing_profile:["Data Entry","Finance","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],add_lab:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Lab Technician","System Administrator"],add_imaging:["Data Entry","Doctor","Hospital Administrator","Imaging Technician","Medical Records Officer","System Administrator"],add_inventory_request:["Data Entry","Hospital Administrator","Inventory Manager","Medical Records Officer","Nurse Manager","Pharmacist","System Administrator"],add_inventory_item:["Data Entry","Hospital Administrator","Inventory Manager","Medical Records Officer","System Administrator"],add_inventory_purchase:["Data Entry","Hospital Administrator","Inventory Manager","Medical Records Officer","System Administrator"],add_invoice:["Data Entry","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],add_payment:["Cashier","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],add_procedure:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","System Administrator"],add_socialwork:["Hospital Administrator","Medical Records Officer","Social Worker","System Administrator"],add_user:["User Administrator","System Administrator"],add_visit:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","Social Worker","System Administrator"],add_vitals:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","System Administrator"],admit_patient:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","Social Worker","System Administrator"],adjust_inventory_location:["Hospital Administrator","Inventory Manager","Medical Records Officer","System Administrator"],billing:["Hospital Administrator","Finance","Finance Manager","System Administrator"],complete_imaging:["Imaging Technician","Medical Records Officer","System Administrator"],complete_lab:["Lab Technician","Medical Records Officer","System Administrator"],delete_appointment:["Hospital Administrator","Medical Records Officer","Patient Administration","Social Worker","System Administrator"],delete_diagnosis:["Doctor","Hospital Administrator","Medical Records Officer","Patient Administration","System Administrator"],delete_inventory_item:["Hospital Administrator","Inventory Manager","Medical Records Officer","System Administrator"],delete_inventory_purchase:["Hospital Administrator","Inventory Manager","Medical Records Officer","System Administrator"],delete_imaging:["Doctor","Hospital Administrator","Medical Records Officer","System Administrator"],delete_invoice:["Business Office","Hospital Administrator","System Administrator"],delete_lab:["Doctor","Hospital Administrator","Medical Records Officer","System Administrator"],delete_medication:["Doctor","Hospital Administrator","Medical Records Officer","System Administrator"],delete_photo:["Data Entry","Hospital Administrator","Medical Records Officer","Patient Administration","Social Worker","System Administrator"],delete_patient:["Hospital Administrator","Medical Records Officer","Patient Administration","System Administrator"],delete_pricing:["Finance","Data Entry","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],delete_pricing_profile:["Finance","Data Entry","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],delete_procedure:["Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","System Administrator"],delete_socialwork:["Hospital Administrator","Medical Records Officer","Social Worker","System Administrator"],delete_vitals:["Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","System Administrator"],delete_visit:["Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","Social Worker","System Administrator"],delete_user:["User Administrator","System Administrator"],discharge_patient:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","Social Worker","System Administrator"],edit_invoice:["Data Entry","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],fulfill_inventory:["Hospital Administrator","Inventory Manager","Medical Records Officer","Pharmacist","System Administrator"],fulfill_medication:["Medical Records Officer","Pharmacist","System Administrator"],imaging:["Data Entry","Doctor","Hospital Administrator","Imaging Technician","Medical Records Officer","System Administrator"],invoices:["Hospital Administrator","Finance","Finance Manager","System Administrator"],labs:["Data Entry","Doctor","Hospital Administrator","Lab Technician","Medical Records Officer","System Administrator"],medication:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Pharmacist","System Administrator"],inventory:["Data Entry","Hospital Administrator","Inventory Manager","Medical Records Officer","Nurse Manager","Pharmacist","System Administrator"],override_invoice:["Business Office","Hospital Administrator","System Administrator"],query_db:["System Administrator"],patients:["Business Office","Data Entry","Doctor","Finance","Finance Manager","Hospital Administrator","Medical Records Officer","Nurse","Nurse Manager","Patient Administration","Social Worker","System Administrator"],pricing:["Data Entry","Finance","Business Office","Hospital Administrator","Medical Records Officer","System Administrator"],visits:["Data Entry","Doctor","Hospital Administrator","Medical Records Officer","Nurse Manager","Nurse","Patient Administration","Social Worker","System Administrator"],update_config:["System Administrator"],users:["User Administrator","System Administrator"]},_getUserSessionVars:function(){var e=this.get("session");if(!s.isEmpty(e)&&e.isAuthenticated){var t=e.store.restore();return t}},currentUserCan:function(e){var t=this._getUserSessionVars();if(!s.isEmpty(t)&&!s.isEmpty(t.role)){var a=this.get("defaultCapabilities"),n=a[e];if(!s.isEmpty(n))return n.contains(t.role)}return!1},getUserName:function(e){var t,a=this._getUserSessionVars();return s.isEmpty(a)||(e?t=a.name:s.isEmpty(a.displayName)?s.isEmpty(a.name)||(t=a.name):t=a.displayName),t}})}),define("hospitalrun/admin/address/controller",["hospitalrun/controllers/abstract-edit-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({hideCancelButton:!0,updateCapability:"update_config",afterUpdate:function(){this.displayAlert("Options Saved","The address options have been saved")}})}),define("hospitalrun/controllers/abstract-edit-controller",["ember","hospitalrun/mixins/is-update-disabled","hospitalrun/mixins/modal-helper","hospitalrun/mixins/user-session","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.ObjectController.extend(i,o,l,{cancelAction:"allItems",cancelButtonText:function(){var e=this.get("isDirty");return e?"Cancel":"Return"}.property("isDirty"),disabledAction:function(){var e=this.get("isValid");return e?void 0:"showDisabledDialog"}.property("isValid"),isNewOrDeleted:function(){return this.get("isNew")||this.get("isDeleted")}.property("isNew","isDeleted"),lookupListsToUpdate:null,showUpdateButton:function(){var e=this.get("updateCapability");return this.currentUserCan(e)}.property("updateCapability"),updateButtonAction:"update",updateButtonText:function(){return this.get("isNew")?"Add":"Update"}.property("isNew"),updateCapability:null,_addValueToLookupList:function(e,t,s,a){var n=e.get("value");n.contains(t)||(n.push(t),n.sort(),e.set("value",n),s.contains(e)||s.push(e),this.set(a,e))},_cancelUpdate:function(){var e=this.get("model");this.get("isNew")?e.deleteRecord():e.rollback()},actions:{cancel:function(){this._cancelUpdate(),this.send(this.get("cancelAction"))},returnTo:function(){this._cancelUpdate(),this.transitionToRoute(this.get("returnTo"))},showDisabledDialog:function(){this.displayAlert("Warning!!!!","Please fill in required fields (marked with *) and correct the errors before saving.")},update:function(e){this.beforeUpdate().then(function(){this.get("model").save().then(function(t){this.updateLookupLists(),e||this.afterUpdate(t)}.bind(this))}.bind(this))}},afterUpdate:function(){},beforeUpdate:function(){return r.RSVP.Promise.resolve()},updateLookupLists:function(){var e=this.get("lookupListsToUpdate"),t=r.A();r.isEmpty(e)||(e.forEach(function(e){var s=this.get(e.property),a=this.get(e.name);r.isEmpty(s)||(a||(a=this.get("store").push("lookup",{id:e.id,value:[],userCanAdd:!0})),r.isArray(s)?s.forEach(function(s){this._addValueToLookupList(a,s,t,e.name)}.bind(this)):this._addValueToLookupList(a,s,t,e.name))}.bind(this)),t.forEach(function(e){e.save()}))}})}),define("hospitalrun/mixins/is-update-disabled",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({isUpdateDisabled:function(){return s.isNone(this.get("isValid"))?!1:!this.get("isValid")}.property("isValid")})}),define("hospitalrun/mixins/modal-helper",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({displayAlert:function(e,t,a){this.send("openModal","dialog",s.Object.create({title:e,message:t,okAction:a,hideCancelButton:!0,updateButtonAction:"ok",updateButtonText:"Ok"}))},displayConfirm:function(e,t,a,n){s.isEmpty(n)&&(n=s.Object.create()),n.set("confirmAction",a),n.set("title",e),n.set("message",t),n.set("updateButtonAction","confirm"),n.set("updateButtonText","Ok"),this.send("openModal","dialog",n)}})}),define("hospitalrun/admin/address/route",["hospitalrun/routes/abstract-edit-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({hideNewButton:!0,newTitle:"Address Options",editTitle:"Address Options",model:function(){return new n.RSVP.Promise(function(e){this.get("store").find("option","address_options").then(function(t){e(t)},function(){var t=this.get("store").push("option",{id:"address_options",value:{address1Label:"Address",address1Include:!0}});e(t)}.bind(this))}.bind(this))}})}),define("hospitalrun/routes/abstract-edit-route",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Route.extend(s.SimpleAuth.AuthenticatedRouteMixin,{editTitle:null,hideNewButton:!1,modelName:null,newTitle:null,idParam:function(){var e=this.get("modelName");return e+"_id"}.property("modelName"),generateId:function(){return s.RSVP.resolve(null)},getNewData:function(){return s.RSVP.resolve({})},model:function(e){var t=this.get("idParam");return s.isEmpty(t)||"new"!==e[t]?this._super(e):new s.RSVP.Promise(function(e){this.generateId().then(function(t){this.getNewData().then(function(s){var a=this.get("modelName");t&&(s.id=t),e(t&&this.store.hasRecordForId(a,t)?this.store.push(a,s):this.store.createRecord(a,s))}.bind(this))}.bind(this))}.bind(this))},setupController:function(e,t){var s={};s.currentScreenTitle=this.get(t.get("isNew")?"newTitle":"editTitle"),this.get("hideNewButton")&&(s.newButtonAction=null),this.send("setSectionHeader",s),this._super(e,t)}})}),define("hospitalrun/admin/address/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(c((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Address 1 Label",property:"value.address1Label"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-input",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Include address 1",property:"value.address1Include"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-checkbox",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Address 2 Label",property:"value.address2Label"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-input",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Include address 2",property:"value.address2Include"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-checkbox",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Address 3 Label",property:"value.address3Label"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-input",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Include address 3",property:"value.address3Include"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-checkbox",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Address 4 Label",property:"value.address4Label"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-input",n)))),t.buffer.push("\n            "),t.buffer.push(c((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Include address 4",property:"value.address4Include"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-checkbox",n)))),t.buffer.push("\n        "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h="",p=a.helperMissing,c=this.escapeExpression,d=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">        \n        '),l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:d.noop,fn:d.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):p.call(t,"em-form",u),(o||0===o)&&r.buffer.push(o),r.buffer.push("\n    </div>\n</div>"),h})}),define("hospitalrun/admin/address/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/views/panel",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.View.extend({layoutName:"panel"})}),define("hospitalrun/admin/lookup/controller",["ember","hospitalrun/mixins/billing-categories","hospitalrun/mixins/lab-pricing-types","hospitalrun/mixins/modal-helper","hospitalrun/mixins/imaging-pricing-types","hospitalrun/mixins/inventory-type-list","hospitalrun/mixins/visit-types","exports"],function(e,t,s,a,n,r,i,o){"use strict";var l=e["default"],u=t["default"],h=s["default"],p=a["default"],c=n["default"],d=r["default"],f=i["default"];o["default"]=l.ArrayController.extend(u,h,p,c,d,f,{needs:"filesystem",fileSystem:l.computed.alias("controllers.filesystem"),lookupType:null,lookupTypes:[{name:"Anesthesia Types",value:"anesthesia_types",model:{procedure:"anesthesiaType"}},{name:"Anesthesiologists",value:"anesthesiologists",model:{procedure:"anesthesiologist"}},{defaultValues:"defaultBillingCategories",name:"Billing Categories",value:"billing_categories",models:{"billing-line-item":"category"}},{name:"Clinic Locations",value:"clinic_list",models:{patient:"clinic"}},{name:"Countries",value:"country_list",models:{patient:"country"}},{name:"Diagnoses",value:"diagnosis_list",models:{visit:"primaryDiagnosis"}},{name:"CPT Codes",value:"cpt_code_list",models:{procedure:"cptCode"}},{name:"Expense Accounts",value:"expense_account_list",models:{"inv-request":"expenseAccount",pricing:"expenseAccount"}},{name:"Inventory Aisle Locations",value:"aisle_location_list",models:{inventory:"aisleLocation","inv-location":"aisleLocation","inv-purchase":"aisleLocation","inv-request":["deliveryAisle","locationsAffected"]}},{name:"Inventory Locations",value:"warehouse_list",models:{inventory:"location","inv-location":"location","inv-purchase":"location","inv-request":["deliveryLocation","locationsAffected"]}},{defaultValues:"defaultInventoryTypes",name:"Inventory Types",value:"inventory_types",models:{inventory:"type"}},{defaultValues:"defaultImagingPricingTypes",name:"Imaging Pricing Types",value:"imaging_pricing_types",models:{pricing:"type"}},{defaultValues:"defaultLabPricingTypes",name:"Lab Pricing Types",value:"lab_pricing_types",models:{pricing:"type"}},{name:"Medication Frequency",value:"medication_frequency",models:{medication:"frequency"}},{name:"Patient Status List",value:"patient_status_list",models:{patient:"status"}},{name:"Physicians",value:"physician_list",models:{appointment:"provider",visit:"examiner",procedure:["assistant","physician"]}},{name:"Procedures",value:"procedure_list",models:{procedure:"description"}},{name:"Procedure Locations",value:"procedure_locations",models:{procedure:"location"}},{name:"Procedure Pricing Types",value:"procedure_pricing_types",models:{pricing:"type"}},{name:"Vendor",value:"vendor_list",models:{"inv-purchase":"vendor"}},{name:"Visit Locations",value:"visit_location_list",models:{appointment:"location",visit:"location"}},{defaultValues:"defaultVisitTypes",name:"Visit Types",value:"visit_types",models:{visit:"visitType"}},{name:"Ward Pricing Types",value:"ward_pricing_types",models:{pricing:"type"}}],importFile:l.computed.alias("lookupTypeList.importFile"),lookupTitle:function(){var e,t=this.get("lookupType"),s=this.get("lookupTypes");return l.isEmpty(t)||(e=s.findBy("value",t),l.isEmpty(e))?void 0:e.name}.property("lookupType"),lookupTypeList:function(){var e,t=this.get("lookupType");if(!l.isEmpty(t)){if(e=this.get("model").findBy("id",t),l.isEmpty(e)){var s=[],a=this.get("lookupTypes"),n=a.findBy("value",t);l.isEmpty(n)||l.isEmpty(n.defaultValues)||(s=this.get(n.defaultValues)),e=this.get("store").push("lookup",{id:t,value:s})}return!l.isEmpty(e)&&l.isEmpty(e.get("userCanAdd"))&&e.set("userCanAdd",!0),e}}.property("lookupType"),lookupTypeValues:function(){var e=this.get("lookupTypeList.value");return l.isEmpty(e)||e.sort(this._sortValues),l.ArrayProxy.create({content:l.A(e)})}.property("lookupType","lookupTypeList.value"),organizeByType:l.computed.alias("lookupTypeList.organizeByType"),showOrganizeByType:function(){var e=this.get("lookupType");return!l.isEmpty(e)&&e.indexOf("pricing_types")>0}.property("lookupType"),userCanAdd:l.computed.alias("lookupTypeList.userCanAdd"),_canDeleteValue:function(e){var t=this.get("lookupType");switch(t){case"inventory_types":if("Medication"===e)return this.displayAlert("Cannot Delete Medication","The Medication inventory type cannot be deleted because it is needed for the Medication module."),!1;break;case"lab_pricing_types":if("Lab Procedure"===e)return this.displayAlert("Cannot Delete Lab Pricing Type","The Lab Procedure pricing type cannot be deleted because it is needed for the Labs module."),!1;break;case"imaging_pricing_types":if("Imaging Procedure"===e)return this.displayAlert("Cannot Delete Imaging Pricing Type","The Imaging Procedure pricing type cannot be deleted because it is needed for the Imaging module."),!1;break;case"visit_types":if("Admission"===e)return this.displayAlert("Cannot Delete Admmission Visit Type","The Admission Visit type cannot be deleted because it is needed for the Visits module."),!1;if("Imaging"===e)return this.displayAlert("Cannot Delete Imaging Visit Type","The Imaging Visit type cannot be deleted because it is needed for the Imaging module."),!1;if("Lab"===e)return this.displayAlert("Cannot Delete Lab Visit Type","The Lab Visit type cannot be deleted because it is needed for the Lab module."),!1;if("Pharmacy"===e)return this.displayAlert("Cannot Delete Pharmacy Visit Type","The Lab Visit type cannot be deleted because it is needed for the Medication module."),!1}return!0},_sortValues:function(e,t){return l.compare(e.toLowerCase(),t.toLowerCase())},actions:{addValue:function(){this.send("openModal","admin.lookup.edit",l.Object.create({isNew:!0}))},deleteValue:function(e){var t=this.get("lookupTypeList"),s=t.get("value");this._canDeleteValue(e)&&(s.removeObject(e.toString()),t.save())},editValue:function(e){l.isEmpty(e)||this.send("openModal","admin.lookup.edit",l.Object.create({isNew:!1,originalValue:e.toString(),value:e.toString()}))},importList:function(){var e=this.get("fileSystem"),t=this.get("importFile"),s=this.get("lookupTypeList");t&&t.type?e.fileToDataURL(t).then(function(e){var a=e.split(",");s.setProperties({_attachments:{file:{content_type:t.type,data:a[1]}},importFile:!0}),s.save().then(function(){this.displayAlert("List Imported","The lookup list has been imported.","refreshLookupLists"),this.set("importFile"),this.set("importFileName")}.bind(this))}.bind(this)):this.displayAlert("Select File To Import","Please select file to import.")},updateList:function(){var e=this.get("lookupTypeList");e.save().then(function(){this.displayAlert("List Saved","The lookup list has been saved")}.bind(this))},updateValue:function(e){var t=!1,s=this.get("lookupTypeList"),a=this.get("lookupTypeValues"),n=s.get("value"),r=e.get("value");if(e.get("isNew"))t=!0;else{var i=e.get("originalValue");r!==i&&(a.removeObject(i),t=!0)}t&&(n.addObject(r),n=n.sort(this._sortValues),s.set("value",n),s.save().then(function(e){var t=l.copy(e.get("value"));a.clear(),a.addObjects(t)}))}}})}),define("hospitalrun/mixins/billing-categories",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({defaultBillingCategories:["Hospital Charges"]})}),define("hospitalrun/mixins/lab-pricing-types",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({defaultLabPricingTypes:["Lab Procedure"]})}),define("hospitalrun/mixins/imaging-pricing-types",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({defaultImagingPricingTypes:["Imaging Procedure"]})}),define("hospitalrun/mixins/inventory-type-list",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({defaultInventoryTypes:["Medication","Supply"],inventoryTypes:function(){var e=this.get("defaultInventoryTypes"),t=this.get("inventoryTypeList");return s.isEmpty(t)?e:t}.property("inventoryTypeList","defaultInventoryTypes")})}),define("hospitalrun/mixins/visit-types",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({defaultVisitTypes:["Admission","Clinic","Followup","Imaging","Lab","Pharmacy"],visitTypes:function(){var e=this.get("defaultVisitTypes"),t=this.get("visitTypesList");return s.isEmpty(t)?e:t.get("value")}.property("visitTypesList","defaultVisitTypes")})}),define("hospitalrun/admin/lookup/edit/controller",["ember","hospitalrun/mixins/is-update-disabled","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:"admin/lookup",editController:a.computed.alias("controllers.admin/lookup"),showUpdateButton:!0,title:function(){var e=this.get("isNew");return e?"Add Value":"Edit Value"}.property("isNew"),updateButtonAction:"update",updateButtonText:function(){var e=this.get("isNew");return e?"Add":"Update"}.property("isNew"),actions:{cancel:function(){this.send("closeModal")},update:function(){a.isEmpty(this.get("value"))||(this.get("editController").send("updateValue",this.get("model")),this.send("closeModal"))}}})}),define("hospitalrun/admin/lookup/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n     "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Value",property:"value"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1,action:"update"},hashTypes:{model:"ID",submit_button:"BOOLEAN",action:"STRING"},hashContexts:{model:t,submit_button:t,action:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/admin/lookup/edit/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/views/modal",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.View.extend({layoutName:"modal",didInsertElement:function(){var e=this.$(".modal").modal();e.on("hidden.bs.modal",function(){this.get("controller").send("closeModal")}.bind(this))},willDestroyElement:function(){this.$(".modal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()
}})}),define("hospitalrun/admin/lookup/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({hideNewButton:!0,pageTitle:"Lookup Lists",model:function(){return this.store.find("lookup")},actions:{refreshLookupLists:function(){this.refresh()}}})}),define("hospitalrun/routes/abstract-index-route",["ember","hospitalrun/mixins/pouchdb","hospitalrun/mixins/progress-dialog","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.Route.extend(r,i,n.SimpleAuth.AuthenticatedRouteMixin,{firstKey:null,hideNewButton:!1,itemsPerPage:25,modelName:null,newButtonAction:null,newButtonText:null,nextStartKey:null,pageTitle:null,keyPrefix:function(){var e=this.get("modelName");return n.isEmpty(e)?void 0:e+"_"}.property("modelName"),_getStartKeyFromItem:function(e){var t=this.get("modelName");return t+"_"+e.get("id")},_modelQueryParams:function(){return{}},model:function(e){return new n.RSVP.Promise(function(t,s){var a=this.get("modelName"),r=this.get("itemsPerPage"),i=this._modelQueryParams(e);n.isEmpty(e.sortKey)||(i.sortKey=e.sortKey,n.isEmpty(e.sortDesc)||(i.sortDesc=e.sortDesc)),n.isEmpty(i.options)&&(i.options={}),i.options.limit=r+1,n.isEmpty(e.startKey)||(i.options.startkey=e.startKey),this.store.find(a,i).then(function(e){if(e.get("length")>0&&this.set("firstKey",this._getStartKeyFromItem(e.get("firstObject"))),e.get("length")>r){var s=e.popObject();this.set("nextStartKey",this._getStartKeyFromItem(s))}else this.set("nextStartKey");t(e)}.bind(this),s)}.bind(this))},queryParams:{sortDesc:{refreshModel:!0},sortKey:{refreshModel:!0},startKey:{refreshModel:!0}},setupController:function(e,t){var s=this.getProperties("firstKey","nextStartKey");e.setProperties(s),n.isEmpty(t)||e.set("hasRecords",t.get("length")>0);var a={currentScreenTitle:this.get("pageTitle")};this.get("hideNewButton")?a.newButtonAction=null:n.isEmpty(this.get("newButtonAction"))||(a.newButtonAction=this.get("newButtonAction")),n.isEmpty(this.get("newButtonText"))||(a.newButtonText=this.get("newButtonText")),this.send("setSectionHeader",a),this.closeProgressModal(),this._super(e,t)}})}),define("hospitalrun/mixins/pouchdb",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({maxValue:"￿"})}),define("hospitalrun/mixins/progress-dialog",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({progressDialog:null,progressDialogDefaults:{showProgress:!0,hideCancelButton:!0,hideUpdateButton:!0,progressBarValue:0,progressBarStyle:"width: 0%;"},progressInterval:500,progressMessage:null,progressTimer:null,progressTitle:null,scheduleProgress:function(e){return s.run.later(this,function(){e.apply(this),this.set("progressTimer",this.scheduleProgress(e))},this.get("progressInterval"))},updateProgressBar:function(){var e=this.get("progressDialog"),t=e.get("progressBarValue");t+=10,t>100&&(t=0),e.set("progressBarValue",t),e.set("progressBarStyle","width: "+t+"%")},closeProgressModal:function(){s.run.cancel(this.get("progressTimer")),this.send("closeModal")},showProgressModal:function(){var e=s.Object.create(this.get("progressDialogDefaults"));e.set("title",this.get("progressTitle")),e.set("message",this.get("progressMessage")),this.set("progressDialog",e),this.set("progressTimer",this.scheduleProgress(this.get("updateProgressBar"))),this.send("openModal","dialog",e)}})}),define("hospitalrun/admin/lookup/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n            <div class="row">\n                '),t.buffer.push(m((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-xs-3",label:"Lookup Type",property:"lookupType",content:"lookupTypes",optionValuePath:"content.value",optionLabelPath:"content.name",selected:"lookupType"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-select",n)))),t.buffer.push("\n            </div>        \n        "),r}function o(e,t){var s,n="";return t.buffer.push("\n                <tr>\n                    <td>"),s=a._triageMustache.call(e,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>                    \n                    <td>\n                        <button class="btn btn-default neutral" '),t.buffer.push(m(a.action.call(e,"editValue","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>Edit</button>\n                        <button class="btn btn-default warning" '),t.buffer.push(m(a.action.call(e,"deleteValue","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                    </td>\n                </tr>\n            '),n}function l(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="row">\n                <div class="col-sm-4">\n                    '),t.buffer.push(m((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"User Can Add New Values",property:"userCanAdd"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):f.call(e,"em-checkbox",r)))),t.buffer.push('\n                    <button class="btn btn-default" '),t.buffer.push(m(a.action.call(e,"updateList",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Update</button> \n                </div>\n                "),s=a["if"].call(e,"showOrganizeByType",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                <div class="col-sm-4">\n                    '),t.buffer.push(m((n=a["file-upload"]||e&&e["file-upload"],r={hash:{label:"Import File",property:"importFileName",selectedFile:"importFile"},hashTypes:{label:"STRING",property:"STRING",selectedFile:"ID"},hashContexts:{label:e,property:e,selectedFile:e},contexts:[],types:[],data:t},n?n.call(e,r):f.call(e,"file-upload",r)))),t.buffer.push('\n                    <button class="btn btn-default" '),t.buffer.push(m(a.action.call(e,"importList",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Import</button>\n                </div>\n            </div>\n        "),i}function u(e,t){var s,n,r="";return t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Organize Pricing By Type",property:"organizeByType","class":"col-sm-4"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p,c,d="",f=a.helperMissing,m=this.escapeExpression,b=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">\n        '),p=a["em-form"]||t&&t["em-form"],c={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:b.noop,fn:b.program(1,i,r),contexts:[],types:[],data:r},h=p?p.call(t,c):f.call(t,"em-form",c),(h||0===h)&&r.buffer.push(h),r.buffer.push('\n    </div>\n</div>\n<div class="panel panel-primary">\n    <div class="panel-heading">\n        <h3 class="panel-title">'),h=a._triageMustache.call(t,"lookupTitle",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),r.buffer.push('</h3>\n    </div>    \n    <div class="panel-body">\n        <table class="table">\n            <tr class="table-header">\n                <th>Value</th>\n                <th>Actions</th>\n            </tr>\n            '),h=a.each.call(t,"lookupTypeValues",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(3,o,r),contexts:[t],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),r.buffer.push('\n        </table>\n    </div>\n    <div class="panel-footer">\n        <button class="btn btn-default neutral" '),r.buffer.push(m(a.action.call(t,"addValue",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r}))),r.buffer.push(">Add Value</button>\n        "),p=a["em-form"]||t&&t["em-form"],c={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:b.noop,fn:b.program(5,l,r),contexts:[],types:[],data:r},h=p?p.call(t,c):f.call(t,"em-form",c),(h||0===h)&&r.buffer.push(h),r.buffer.push("\n    </div>\n</div>"),d})}),define("hospitalrun/admin/query/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Controller.extend({hideCancelButton:!0,showUpdateButton:!0,updateButtonAction:"query",updateButtonText:"Query",objectTypes:["appointment","imaging","inv-location","inv-purchase","inv-request","inventory","invoice","lab","medication","patient","photo","procedure","visit","vital"],actions:{query:function(){var e=this.get("fieldName"),t=this.get("objectType"),a=this.get("queryValue"),n={containsValue:{value:a,keys:[e]}};this.store.find(t,n).then(function(e){if(s.isEmpty(e))this.set("errorMessage","Query returned no results."),this.set("haveError",!0),this.set("showQueryResults",!1);else{var t,a,n=["id"],r=[];e.get("firstObject").eachAttribute(function(e){n.push(e)}),e.forEach(function(e){a=[],n.forEach(function(n){t=e.get(n),s.isEmpty(t)||a.push({name:n,value:t})}),r.push(a)}),this.set("resultRows",r),this.set("haveError",!1),this.set("showQueryResults",!0)}}.bind(this),function(e){this.set("errorMessage",e),this.set("haveError",!0),this.set("showQueryResults",!1)}.bind(this))}}})}),define("hospitalrun/admin/query/route",["ember","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Route.extend(n,a.SimpleAuth.AuthenticatedRouteMixin,{beforeModel:function(){this.currentUserCan("query_db")||this.transitionTo("application")}})}),define("hospitalrun/admin/query/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n            <div class="row">\n                '),t.buffer.push(b((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-xs-3",label:"Object Type",property:"objectType",content:"objectTypes",optionValuePath:"content",optionLabelPath:"content",selected:"objectType"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):m.call(e,"em-select",n)))),t.buffer.push("\n            </div>\n            "),t.buffer.push(b((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Field Name",property:"fieldName"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):m.call(e,"em-input",n)))),t.buffer.push("\n            "),t.buffer.push(b((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Query Value",property:"queryValue"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):m.call(e,"em-input",n)))),t.buffer.push("\n        "),r}function o(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-danger" role="alert">'),s=a._triageMustache.call(e,"errorMessage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\n"),n}function l(e,t){var s,n="";return t.buffer.push('\n    <div class="panel panel-primary">\n        <div class="panel-heading">\n            <h3 class="panel-title">Query Results</h3>\n        </div>\n        <div class="panel-body">\n            '),s=a.each.call(e,"resultRows",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </div>\n    </div>\n"),n}function u(e,t){var s,n="";return t.buffer.push('\n                <table class="table">\n                    <tr class="table-header">\n                        <th>Field</th>\n                        <th>Value</th>\n                    </tr>\n                    '),s=a.each.call(e,"",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </table>\n            "),n}function h(e,t){var s,n="";return t.buffer.push("\n                        <tr>\n                            <th>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</th>\n                            <td>"),s=a._triageMustache.call(e,"value",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        </tr>\n                    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var p,c,d,f="",m=a.helperMissing,b=this.escapeExpression,y=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">        \n        '),c=a["em-form"]||t&&t["em-form"],d={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:y.noop,fn:y.program(1,i,r),contexts:[],types:[],data:r},p=c?c.call(t,d):m.call(t,"em-form",d),(p||0===p)&&r.buffer.push(p),r.buffer.push("\n    </div>\n</div>\n"),p=a["if"].call(t,"haveError",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(3,o,r),contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),r.buffer.push("\n"),p=a["if"].call(t,"showQueryResults",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,l,r),contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),f})}),define("hospitalrun/admin/query/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/admin/route",["hospitalrun/routes/abstract-module-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addCapability:"add_user",allowSearch:!1,moduleName:"admin",sectionTitle:"Admin",subActions:[{text:"Address Options",linkTo:"admin.address"},{text:"Lookup Lists",linkTo:"admin.lookup"},{text:"Users",linkTo:"users.index"}],editPath:function(){return"users.edit"}.property(),deletePath:function(){return"users.delete"}.property()})}),define("hospitalrun/routes/abstract-module-route",["ember","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Route.extend(n,a.SimpleAuth.AuthenticatedRouteMixin,{addCapability:null,additionalModels:null,allowSearch:!0,currentScreenTitle:null,moduleName:null,newButtonText:null,sectionTitle:null,subActions:null,editPath:function(){var e=this.get("moduleName");return e+".edit"}.property("moduleName"),deletePath:function(){var e=this.get("moduleName");return e+".delete"}.property("moduleName"),newButtonAction:function(){return this.currentUserCan(this.get("addCapability"))?"newItem":null}.property(),searchRoute:function(){var e=this.get("moduleName");return"/"+e+"/search"}.property("moduleName"),actions:{allItems:function(){this.transitionTo(this.get("moduleName")+".index")},closeModal:function(){this.disconnectOutlet({parentView:"application",outlet:"modal"})},deleteItem:function(e){var t=this.get("deletePath");this.send("openModal",t,e)},editItem:function(e){this.transitionTo(this.get("editPath"),e)},newItem:function(){this.currentUserCan(this.get("addCapability"))&&this.transitionTo(this.get("editPath"),"new")},openModal:function(e,t){t&&this.controllerFor(e).set("model",t),this.renderModal(e)},setSectionHeader:function(e){var t=this.controllerFor(this.get("moduleName"));t.setProperties(e)},updateModal:function(e,t){this.controllerFor(e).set("model",t)}},beforeModel:function(e){var t=this.get("moduleName");return this.currentUserCan(t)?this._super(e):(this.transitionTo("index"),a.RSVP.reject("Not available"))},generateId:function(){return a.RSVP.resolve(null)},model:function(){return a.isEmpty(this.additionalModels)?a.RSVP.resolve():new a.RSVP.Promise(function(e,t){var s=this.additionalModels.map(function(e){return this.store.find.apply(this.store,e.findArgs)}.bind(this));a.RSVP.allSettled(s,"All additional Models for"+this.get("moduleName")).then(function(t){t.forEach(function(e,t){"fulfilled"===e.state&&this.set(this.additionalModels[t].name,e.value)}.bind(this)),e()}.bind(this),t)}.bind(this),"Additional Models for"+this.get("moduleName"))},renderModal:function(e){this.render(e,{into:"application",outlet:"modal"})},renderTemplate:function(){this.render("section")},setupController:function(e,t){var s=this.controllerFor("navigation");this.get("allowSearch")===!0?(s.set("allowSearch",!0),s.set("searchRoute",this.get("searchRoute"))):s.set("allowSearch",!1);var n=this.controllerFor(this.get("moduleName")),r=this.getProperties("additionalButtons","currentScreenTitle","newButtonAction","newButtonText","sectionTitle","subActions");n.setProperties(r),a.isEmpty(this.additionalModels)||this.additionalModels.forEach(function(t){e.set(t.name,this.get(t.name))}.bind(this)),this._super(e,t)}})}),define("hospitalrun/app",["ember","ember/resolver","ember/load-initializers","hospitalrun/config/environment","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];r.MODEL_FACTORY_INJECTIONS=!0;var u=r.Application.extend({modulePrefix:l.modulePrefix,podModulePrefix:l.podModulePrefix,Resolver:i});o(u,l.modulePrefix),n["default"]=u}),define("hospitalrun/appointments/calendar/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ArrayController.extend({needs:"appointment-calendar"})}),define("hospitalrun/appointments/calendar/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"appointment",pageTitle:"Appointment Listing"})}),define("hospitalrun/appointments/calendar/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i=this.escapeExpression;r.buffer.push(i(a.view.call(t,"Ember.Calendar.CalendarView",{hash:{controllerBinding:"controllers.appointment-calendar"},hashTypes:{controllerBinding:"STRING"},hashContexts:{controllerBinding:t},contexts:[t],types:["ID"],data:r})))})}),define("hospitalrun/appointments/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete Appointment",afterDeleteAction:function(){var e=this.get("deleteFromPatient");return e?"appointmentDeleted":"closeModal"}.property("deleteFromPatient")})}),define("hospitalrun/controllers/abstract-delete-controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({afterDeleteAction:"closeModal",showUpdateButton:!0,updateButtonText:"Delete",updateButtonAction:"delete",isUpdateDisabled:!1,actions:{cancel:function(){this.send("closeModal")},"delete":function(){var e=this.get("model");this.get("model").destroyRecord().then(function(){this.send(this.get("afterDeleteAction"),e)}.bind(this))}}})}),define("hospitalrun/appointments/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete this appointment?\n</div>')})}),define("hospitalrun/appointments/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/appointments/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/patient-submodule","hospitalrun/mixins/return-to","hospitalrun/mixins/visit-types","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{needs:["appointments","pouchdb"],dateFormat:"l h:mm A",findPatientVisits:!1,hourList:function(){var e,t=[];for(e=0;24>e;e++){var s=e%12+(12>e?" AM":" PM");"0 AM"===s?s="Midnight":"0 PM"===s&&(s="Noon"),t.push({name:s,value:e})}return t}.property(),locationList:o.computed.alias("controllers.appointments.locationList"),lookupListsToUpdate:[{name:"physicianList",property:"provider",id:"physician_list"},{name:"locationList",property:"location",id:"visit_location_list"}],minuteList:function(){var e,t=[];for(e=0;60>e;e++)t.push(String("00"+e).slice(-2));return t}.property(),physicianList:o.computed.alias("controllers.appointments.physicianList"),showTime:!0,visitTypesList:o.computed.alias("controllers.appointments.visitTypeList"),cancelAction:function(){var e=this.get("returnTo");return o.isEmpty(e)?this._super():"returnTo"}.property("returnTo"),dateChanged:function(){o.run.once(this,function(){this.get("model").validate()})}.observes("startDate","endDate"),isAdmissionAppointment:function(){var e=this.get("appointmentType"),t="Admission"===e;return t||this.set("allDay",!0),t}.property("appointmentType"),updateCapability:"add_appointment",afterUpdate:function(){this.send(this.get("cancelAction"))},allDayChanged:function(){var e=this.get("allDay"),t=this.get("isAdmissionAppointment");if(e){var s=this.get("endDate"),a=this.get("startDate");this.set("startDate",moment(a).startOf("day").toDate()),this.set("endDate",moment(s).endOf("day").toDate()),this.set("dateFormat","l"),this.set("showTime",!1)}else this.set("dateFormat","l h:mm A"),this.set("showTime",!0),t&&this._updateAllTimes()}.observes("allDay"),endHourChanged:function(){this._updateDate("endHour","endDate")}.observes("endHour"),endMinuteChanged:function(){this._updateDate("endMinute","endDate")}.observes("endMinute"),endTimeHasError:function(){var e=this.get("errors.endDate");return e.length>0}.property("errors.endDate"),appointmentDateChanged:function(){var e=this.get("allDay"),t=this.get("isAdmissionAppointment"),s=this.get("appointmentDate");t||(this.set("endDate",s),this.set("startDate",s),e||this._updateAllTimes())}.observes("appointmentType","allDay","appointmentDate"),startHourChanged:function(){this._updateDate("startHour","startDate")}.observes("startHour"),startMinuteChanged:function(){this._updateDate("startMinute","startDate")}.observes("startMinute"),_updateAllTimes:function(){this.endHourChanged(),this.endMinuteChanged(),this.startMinuteChanged(),this.startHourChanged()},_updateDate:function(e,t){var s=this.get(e),a=this.get(t);o.isEmpty(a)||(a=moment(a),e.indexOf("Hour")>-1?a.hour(s):a.minute(s),this.set(t,a.toDate()),this.dateChanged())}})}),define("hospitalrun/mixins/patient-submodule",["ember","hospitalrun/mixins/patient-visits","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Mixin.create(n,{findPatientVisits:!0,actions:{returnToPatient:function(){this.transitionToRoute("patients.edit",this.get("returnPatientId"))},returnToVisit:function(){this.transitionToRoute("visits.edit",this.get("returnVisitId"))}},addChildToVisit:function(e,t,s){return new a.RSVP.Promise(function(n,r){var i=[],o=this.get("patient"),l=this.get("visit");a.isEmpty(l)&&(l=this.get("store").createRecord("visit",{startDate:new Date,endDate:new Date,outPatient:!0,patient:o,visitType:s}),this.set("visit",l)),i.addObjects(this.resolveVisitChildren()),a.RSVP.all(i,"Resolved visit children before adding new "+t).then(function(){l.get(t).then(function(t){t.addObject(e),this.set("needToUpdateVisit",!0),n()}.bind(this),r)}.bind(this),r)}.bind(this))},cancelAction:function(){var e=this.get("returnToPatient"),t=this.get("returnToVisit");return t?"returnToVisit":e?"returnToPatient":"allItems"}.property("returnToPatient","returnToVisit"),patientId:a.computed.alias("patient.id"),patientChanged:function(){var e=this.get("patient");!a.isEmpty(e)&&this.get("findPatientVisits")&&this.getPatientVisits(e).then(function(e){this.set("patientVisits",e)}.bind(this))}.observes("patient"),selectedPatientChanged:function(){var e=this.get("selectedPatient");a.isEmpty(e)||this.store.find("patient",e.id).then(function(e){this.set("patient",e),a.run.once(this,function(){this.get("model").validate()})}.bind(this))}.observes("selectedPatient"),patientIdChanged:function(){var e=this.get("patientId");a.isEmpty(e)||this.set("returnPatientId",e)}.observes("patientId").on("init"),patientVisits:[],returnPatientId:null,returnVisitId:null,removeChildFromVisit:function(e,t){return new a.RSVP.Promise(function(s,n){var r=[],i=this.get("visit");r.addObjects(this.resolveVisitChildren()),a.RSVP.all(r,"Resolved visit children before removing "+t).then(function(){i.get(t).then(function(t){t.removeObject(e),i.save().then(s,n)}.bind(this),n)}.bind(this),n)}.bind(this))},resolveVisitChildren:function(){var e=[],t=this.get("visit");return a.isEmpty(t)||(e.push(t.get("imaging")),e.push(t.get("labs")),e.push(t.get("medication")),e.push(t.get("procedures")),e.push(t.get("vitals"))),e},saveVisitIfNeeded:function(e,t){this.get("needToUpdateVisit")?this.get("visit").save().then(function(){this.set("needToUpdateVisit",!1),this.displayAlert(e,t)}.bind(this)):this.displayAlert(e,t)},visitIdChanged:function(){var e=this.get("visitId");a.isEmpty(e)||this.set("returnVisitId",e)}.observes("visitId").on("init"),visitId:a.computed.alias("visit.id"),visitsController:a.computed.alias("controllers.visits")})}),define("hospitalrun/mixins/patient-visits",["ember","hospitalrun/mixins/pouchdb","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Mixin.create(n,{getPatientVisits:function(e){return new a.RSVP.Promise(function(t,s){var a=this.get("maxValue"),n="patient_"+e.get("id");this.store.find("visit",{options:{startkey:[n,null,null,null,"visit_"],endkey:[n,a,a,a,a]},mapReduce:"visit_by_patient"}).then(t,s)}.bind(this))}})}),define("hospitalrun/mixins/return-to",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({cancelAction:function(){var e=this.get("returnTo");return s.isEmpty(e)?"allItems":"returnTo"}.property("returnTo")})}),define("hospitalrun/appointments/edit/route",["hospitalrun/routes/abstract-edit-route","ember","hospitalrun/mixins/patient-list-route","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{editTitle:"Edit Appointment",modelName:"appointment",newTitle:"New Appointment",getNewData:function(){return r.RSVP.resolve({selectPatient:!0})}})}),define("hospitalrun/mixins/patient-list-route",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({_fetchPatientList:function(e){var t={startkey:"patient_",endkey:"patient_￿",include_docs:!0};this.controllerFor("pouchdb").queryMainDB(t).then(function(t){e.set("patientList",t.rows)})},setupController:function(e,t){this._super(e,t),this._fetchPatientList(e)}})}),define("hospitalrun/appointments/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a["if"].call(e,"selectPatient",{hash:{},hashTypes:{},hashContexts:{},inverse:g.program(4,l,t),fn:g.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    <div class="row">\n        '),s=a["if"].call(e,"isAdmissionAppointment",{hash:{},hashTypes:{},hashContexts:{},inverse:g.program(8,h,t),fn:g.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),t.buffer.push(y((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"All Day",property:"allDay","class":"col-sm-2"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"em-checkbox",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(y((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-sm-6 required",label:"Type",property:"appointmentType",content:"visitTypes",optionValuePath:"content",optionLabelPath:"content"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"em-select",r)))),t.buffer.push("\n        "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-6",property:"provider",label:"With",list:"physicianList",selection:"provider"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-6 required",property:"location",label:"Location",list:"locationList",selection:"location"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    </div>\n    "),t.buffer.push(y((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Notes",property:"notes",rows:3},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:e,property:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"em-text",r)))),t.buffer.push("    \n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(y((s=a["patient-typeahead"]||e&&e["patient-typeahead"],n={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"patient-typeahead",n)))),t.buffer.push("\n    "),r}function l(e,t){var s,n="";return t.buffer.push('\n            <div class="form-group">\n                <label>Patient</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>\n    "),n}function u(e,t){var s,n,r="";return t.buffer.push("    \n            "),t.buffer.push(y((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"startDate",label:"Start Date",showTime:"showTime",format:"dateFormat","class":"col-sm-4 required"},hashTypes:{property:"STRING",label:"STRING",showTime:"ID",format:"ID","class":"STRING"},hashContexts:{property:e,label:e,showTime:e,format:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"date-picker",n)))),t.buffer.push("\n            "),t.buffer.push(y((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"endDate",label:"End Date",showTime:"showTime",format:"dateFormat","class":"col-sm-4 required"},hashTypes:{property:"STRING",label:"STRING",showTime:"ID",format:"ID","class":"STRING"},hashContexts:{property:e,label:e,showTime:e,format:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"date-picker",n)))),t.buffer.push("\n        "),r
}function h(e,t){var s,n,r,i="";return t.buffer.push("\n            "),t.buffer.push(y((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"appointmentDate",label:"Date","class":"col-sm-4 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"date-picker",r)))),t.buffer.push("\n            "),s=a.unless.call(e,"allDay",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(9,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),i}function p(e,t){var s,n="";return t.buffer.push('\n                <div class="form-group col-sm-3 required">            \n                    <label class="control-label" for="startTime">Start Time</label>\n                    <div class="input-group">\n                        '),t.buffer.push(y(a.view.call(e,"Ember.Select",{hash:{viewName:"select",content:"hourList",optionLabelPath:"content.name",optionValuePath:"content.value",value:"startHour",id:"startTime","class":"form-control"},hashTypes:{viewName:"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING",value:"ID",id:"STRING","class":"STRING"},hashContexts:{viewName:e,content:e,optionLabelPath:e,optionValuePath:e,value:e,id:e,"class":e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\n                        <div class="input-group-addon">:</div>\n                        '),t.buffer.push(y(a.view.call(e,"Ember.Select",{hash:{viewName:"select",content:"minuteList",optionLabelPath:"content",optionValuePath:"content",value:"startMinute","class":"form-control"},hashTypes:{viewName:"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING",value:"ID","class":"STRING"},hashContexts:{viewName:e,content:e,optionLabelPath:e,optionValuePath:e,value:e,"class":e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\n                    </div>\n                </div>\n                <div "),t.buffer.push(y(a["bind-attr"].call(e,{hash:{"class":":form-group :col-sm-3 :required :has-feedback endTimeHasError:has-error"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push('>            \n                    <label class="control-label" for="endTime">End Time</label>\n                    <div class="input-group">\n                        '),t.buffer.push(y(a.view.call(e,"Ember.Select",{hash:{viewName:"select",content:"hourList",optionLabelPath:"content.name",optionValuePath:"content.value",value:"endHour",id:"endTime","class":"form-control"},hashTypes:{viewName:"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING",value:"ID",id:"STRING","class":"STRING"},hashContexts:{viewName:e,content:e,optionLabelPath:e,optionValuePath:e,value:e,id:e,"class":e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\n                        <div class="input-group-addon">:</div>\n                        '),t.buffer.push(y(a.view.call(e,"Ember.Select",{hash:{viewName:"select",content:"minuteList",optionLabelPath:"content",optionValuePath:"content",value:"endMinute","class":"form-control"},hashTypes:{viewName:"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING",value:"ID","class":"STRING"},hashContexts:{viewName:e,content:e,optionLabelPath:e,optionValuePath:e,value:e,"class":e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\n                    </div>\n                    "),s=a["if"].call(e,"endTimeHasError",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(10,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </div>\n            "),n}function c(e,t){t.buffer.push('\n                        <p class="help-block">Please select an end time later than the start time.</p>\n                    ')}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var d,f,m,b=a.helperMissing,y=this.escapeExpression,g=this;f=a["em-form"]||t&&t["em-form"],m={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:g.noop,fn:g.program(1,i,r),contexts:[],types:[],data:r},d=f?f.call(t,m):b.call(t,"em-form",m),r.buffer.push(d||0===d?d:"")})}),define("hospitalrun/appointments/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/appointments/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{startKey:[],canAddVisit:function(){return this.currentUserCan("add_visit")}.property(),canEdit:function(){return this.currentUserCan("add_appointment")}.property(),canDelete:function(){return this.currentUserCan("delete_appointment")}.property(),sortProperties:["startDate","endDate"],sortAscending:!0})}),define("hospitalrun/controllers/abstract-paged-controller",["ember","hospitalrun/mixins/progress-dialog","hospitalrun/mixins/user-session","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.ArrayController.extend(r,i,{addPermission:null,deletePermission:null,nextStartKey:null,previousStartKey:null,previousStartKeys:[],progressMessage:"Loading Records.  Please wait...",progressTitle:"Loading",queryParams:["startKey","sortKey","sortDesc"],sortDesc:!1,sortKey:null,canAdd:function(){return this.currentUserCan(this.get("addPermission"))}.property(),canDelete:function(){return this.currentUserCan(this.get("deletePermission"))}.property(),canEdit:function(){return this.currentUserCan(this.get("addPermission"))}.property(),showActions:function(){return this.get("canAdd")||this.get("canEdit")||this.get("canDelete")}.property("canAdd","canEdit","canDelete"),disablePreviousPage:function(){return n.isEmpty(this.get("previousStartKey"))}.property("previousStartKey"),disableNextPage:function(){return n.isEmpty(this.get("nextStartKey"))}.property("nextStartKey"),showPagination:function(){return!n.isEmpty(this.get("previousStartKey")||!n.isEmpty(this.get("nextStartKey")))}.property("nextStartKey","previousStartKey"),actions:{nextPage:function(){var e=this.get("nextStartKey"),t=this.get("previousStartKeys"),s=this.get("firstKey");this.set("previousStartKey",s),t.push(s),this.set("startKey",e),this.showProgressModal()},previousPage:function(){var e=this.get("previousStartKey"),t=this.get("previousStartKeys");t.pop(),this.set("startKey",e),this.set("previousStartKey",t.pop()),this.set("previousStartKeys",t),this.showProgressModal()},sortByKey:function(e,t){this.setProperties({previousStartKey:null,previousStartKeys:[],sortDesc:t,sortKey:e,startKey:null}),this.showProgressModal()}}})}),define("hospitalrun/appointments/index/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({editReturn:"appointments.index",modelName:"appointment",pageTitle:"Appointments This Week",_getStartKeyFromItem:function(e){var t=e.get("endDate"),s=e.get("startDate");return t&&""!==t&&(t=new Date(t),t.getTime&&(t=t.getTime())),s&&""!==s&&(s=new Date(s),s.getTime&&(s=s.getTime())),[s,t,"appointment_"+e.get("id")]},_modelQueryParams:function(){var e=moment().endOf("week").toDate().getTime(),t=this.get("maxValue"),s=moment().startOf("week").toDate().getTime();return{options:{startkey:[s,null,null],endkey:[e,e,"appointment_"+t]},mapReduce:"appointments_by_date"}},actions:{editAppointment:function(e){e.set("returnTo",this.get("editReturn")),this.send("editItem",e)}}})}),define("hospitalrun/appointments/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(h((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"appointments/item",n):u.call(e,"partial","appointments/item",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l="",u=a.helperMissing,h=this.escapeExpression,p=this;return r.buffer.push('<table class="table">\n    <tr class="table-header">\n        <th>Date</th>\n        <th>Name</th>\n        <th>Type</th>\n        <th>Location</th>\n        <th>Provider</th>\n        <th>Actions</th>\n    </tr>\n    '),o=a.each.call(t,{hash:{itemController:"appointments/item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:t},inverse:p.noop,fn:p.program(1,i,r),contexts:[],types:[],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("\n</table>"),l})}),define("hospitalrun/appointments/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/views/item-listing",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.View.extend({layoutName:"item-listing"})}),define("hospitalrun/appointments/item/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({longDateFormat:"l h:mm A",shortDateFormat:"l",timeFormat:"h:mm A",_getDateSpan:function(e,t,s){var a=e.format(s),n=t.format(s);return"%@ - %@".fmt(a,n)},appointmentDate:function(){var e=this.get("allDay"),t=moment(this.get("endDate")),s="",a="",n=moment(this.get("startDate"));return n.isSame(t,"day")?(a=n.format(this.get("shortDateFormat")),e||(a+=" ",a+=this._getDateSpan(n,t,this.get("timeFormat")))):(s=this.get(e?"shortDateFormat":"longDateFormat"),a=this._getDateSpan(n,t,s)),a}.property("startDate","endDate")})}),define("hospitalrun/appointments/item/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s="";return t.buffer.push('\n            <button class="btn btn-default" '),t.buffer.push(p(a.action.call(e,"createVisit","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Add Visit</button>\n        "),s}function o(e,t){var s="";return t.buffer.push('\n            <button class="btn btn-default" '),t.buffer.push(p(a.action.call(e,"editAppointment","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n        "),s}function l(e,t){var s="";return t.buffer.push('\n            <button class="btn btn-default" '),t.buffer.push(p(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Delete</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h="",p=this.escapeExpression,c=this;return r.buffer.push("<tr "),r.buffer.push(p(a.action.call(t,"editAppointment","",{hash:{},hashTypes:{},hashContexts:{},contexts:[t,t],types:["STRING","ID"],data:r}))),r.buffer.push(">\n    <td>\n        "),u=a._triageMustache.call(t,"appointmentDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n    </td>\n    <td>"),u=a._triageMustache.call(t,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("</td>\n    <td>"),u=a._triageMustache.call(t,"appointmentType",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("</td>\n    <td>"),u=a._triageMustache.call(t,"location",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("</td>\n    <td>"),u=a._triageMustache.call(t,"provider",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("</td>\n    <td>\n        "),u=a["if"].call(t,"parentController.canAddVisit",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(1,i,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n        "),u=a["if"].call(t,"parentController.canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(3,o,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n        "),u=a["if"].call(t,"parentController.canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(5,l,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n    </td>        \n</tr>"),h})}),define("hospitalrun/appointments/route",["hospitalrun/routes/abstract-module-route","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{addCapability:"add_appointment",allowSearch:!1,currentScreenTitle:"Appointment List",editTitle:"Edit Appointment",newTitle:"New Appointment",moduleName:"appointments",newButtonText:"+ new appointment",sectionTitle:"Appointments",actions:{createVisit:function(e){var t,s=e.getProperties("startDate","endDate","location","patient");s.visitType=e.get("appointmentType"),s.examiner=e.get("provider"),t=this.get("store").createRecord("visit",s),this.transitionTo("visits.edit",t)}},additionalModels:[{name:"physicianList",findArgs:["lookup","physician_list"]},{name:"locationList",findArgs:["lookup","visit_location_list"]},{name:"visitTypesList",findArgs:["lookup","visit_types"]}],subActions:[{text:"This Week",linkTo:"appointments.index"},{text:"Today",linkTo:"appointments.today"},{text:"Search",linkTo:"appointments.search"}]})}),define("hospitalrun/appointments/search/controller",["hospitalrun/appointments/index/controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({startKey:[],startingDate:null,_setup:function(){this.set("startingDate",new Date)}.on("init"),startingDateChanged:function(){var e=this.get("startingDate");this.set("previousStartKey"),this.set("previousStartKeys",[]),n.isEmpty(e)||this.set("startKey",[e.getTime(),,])}.observes("startingDate")})}),define("hospitalrun/appointments/search/route",["hospitalrun/appointments/index/route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({editReturn:"appointments.search",modelName:"appointment",pageTitle:"Search Appointments",_modelQueryParams:function(e){var t,s=this.get("maxValue"),a=e.startKey;t=n.isEmpty(a)?moment():moment(a[0]);var r=t.startOf("day").toDate().getTime(),i=t.add(1,"y").endOf("day").toDate().getTime();return{options:{startkey:[r,null,"appointment_"],endkey:[i,i,"appointment_"+s]},mapReduce:"appointments_by_date"}}})}),define("hospitalrun/appointments/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n            <div class="row">        \n                '),t.buffer.push(d((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"startingDate",label:"Show Appointments On Or After","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):c.call(e,"date-picker",n)))),t.buffer.push("\n            </div>\n        "),r}function o(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(d((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"appointments/item",n):c.call(e,"partial","appointments/item",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u,h,p="",c=a.helperMissing,d=this.escapeExpression,f=this;return r.buffer.push('<div class="panel panel-info">    \n    <div class="panel-body">\n        '),u=a["em-form"]||t&&t["em-form"],h={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:f.noop,fn:f.program(1,i,r),contexts:[],types:[],data:r},l=u?u.call(t,h):c.call(t,"em-form",h),(l||0===l)&&r.buffer.push(l),r.buffer.push('\n    </div>\n</div>\n<table class="table">\n    <tr class="table-header">\n        <th>Date</th>\n        <th>Name</th>\n        <th>Type</th>\n        <th>Location</th>\n        <th>Provider</th>\n        <th>Actions</th>\n    </tr>\n    '),l=a.each.call(t,{hash:{itemController:"appointments/item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:t},inverse:f.noop,fn:f.program(3,o,r),contexts:[],types:[],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n</table>"),p})}),define("hospitalrun/appointments/search/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/appointments/today/controller",["hospitalrun/appointments/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({startKey:[]})}),define("hospitalrun/appointments/today/route",["hospitalrun/appointments/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({editReturn:"appointments.today",modelName:"appointment",pageTitle:"Today's Appointments",_modelQueryParams:function(){var e=moment().endOf("day").toDate().getTime(),t=this.get("maxValue"),s=moment().startOf("day").toDate().getTime();return{options:{startkey:[s,null,"appointment_"],endkey:[e,e,"appointment_"+t]},mapReduce:"appointments_by_date"}}})}),define("hospitalrun/appointments/today/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({templateName:"appointments/index"})}),define("hospitalrun/components/array-display",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({isArray:function(){var e=this.get("content");return s.isArray(e)}.property("content")})}),define("hospitalrun/components/date-picker",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Forms.FormInputComponent.extend({currentDate:null,currentDisplayDate:null,dateProperty:null,minDate:null,maxDate:null,format:"l",showTime:!1,yearRange:10,_picker:null,showTimeChanged:function(){var e=this.get("_picker");e&&(e.destroy(),this.didInsertElement())}.observes("showTime"),_setup:function(){var e=this.get("propertyName"),t="display_"+e;this.set("doingSetup",!0),this.set("propertyName",t),this.set("dateProperty",e),s.isEmpty(this.get("currentDate"))&&s.Binding.from("model."+e).to("currentDate").connect(this),s.isEmpty(this.get("currentDisplayDate"))&&s.Binding.from("model."+t).to("currentDisplayDate").connect(this),s.Binding.from("model.errors."+e).to("model.errors."+t).connect(this),this.set("doingSetup",!1)}.on("init"),_shouldSetDate:function(e,t){return t&&(s.isEmpty(e)||s.isEmpty(t.getDate())||t.getDate().getTime()!==e.getTime())},currentDateChangedValue:function(){var e=this.get("currentDate"),t=this.get("_picker");this._shouldSetDate(e,t)&&t.setDate(e)}.observes("currentDate"),currentDisplayDateChangedValue:function(){if(!this.get("doingSetup")){var e=this.get("currentDisplayDate");s.isEmpty(e)&&this.set("currentDate")}}.observes("currentDisplayDate"),dateSet:function(){var e=this.get("currentDate"),t=this.get("_picker");this._shouldSetDate(e,t)&&this.set("currentDate",t.getDate())},didInsertElement:function(){var e=this.get("currentDate"),t=this.$("input"),a=null,n=this.getProperties("format","yearRange","showTime");n.onSelect=this.dateSet.bind(this),s.isEmpty(this.get("minDate"))||(n.minDate=this.get("minDate"),"now"===n.minDate&&(n.minDate=new Date)),s.isEmpty(this.get("maxDate"))||(n.maxDate=this.get("maxDate"),"now"===n.maxDate&&(n.maxDate=new Date)),n.field=t[0],a=new Pikaday(n),a.setDate(e),this.set("_picker",a)},willDestroyElement:function(){var e=this.get("_picker");e&&e.destroy(),this.set("_picker",null)}})}),define("hospitalrun/components/ext-radio",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({includeOtherOption:!1,otherOptionLabel:null,name:"radio",showInline:!1,radioLabelPath:"content.label",radioValuePath:"content.value"})}),define("hospitalrun/components/file-upload",["hospitalrun/components/image-upload","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({resizeFile:!1})}),define("hospitalrun/components/image-upload",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Forms.FormInputComponent.extend({fileInputEl:null,resizeFile:!0,selectedFile:null,type:"file",_fileChanged:function(){var e=this.get("fileInputEl"),t=this.get("resizeFile");if(t){window.URL=window.URL||window.webkitURL;var s=window.URL.createObjectURL(e.files[0]),a=new Image;a.src=s,a.onload=function(){window.URL.revokeObjectURL(s),this.set("selectedFile",this._resizeImage(a))}.bind(this)}else this.set("selectedFile",e.files[0])},_resizeImage:function(e){var t=document.createElement("canvas"),s=e.height,a=e.width,n=1024,r=1024;a>s?a>r&&(s=Math.round(s*=r/a),a=r):s>n&&(a=Math.round(a*=n/s),s=n),t.width=a,t.height=s;var i=t.getContext("2d");i.drawImage(e,0,0,a,s);for(var o=t.toDataURL("image/png"),l=atob(o.split(",")[1]),u=[],h=0;h<l.length;h++)u.push(l.charCodeAt(h));return new Blob([new Uint8Array(u)],{type:"image/png"})},didInsertElement:function(){var e=this.$("input");this.set("fileInputEl",e[0]),e.on("change",this._fileChanged.bind(this))}})}),define("hospitalrun/components/icd10-pcs-typeahead",["hospitalrun/components/icd10-typeahead","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/components/icd10-typeahead",["hospitalrun/components/type-ahead","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({"class":"scrollable-typeahead",minlength:2,selectionKey:"id",setOnBlur:!0,templates:{header:'<div class="alert alert-success well-sm query-results" role="alert"></div>'},_sourceQuery:function(e,t){this.bloodhound.get(e,function(s){t(s);var a=this.$(".query-results");a.html("<strong><em>"+e+"</em></strong> returned <strong>"+s.length+"</strong> results")}.bind(this))},_getSource:function(){return this._sourceQuery.bind(this)}})}),define("hospitalrun/components/type-ahead",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Forms.FormInputComponent.extend({_mapContentItems:function(){var e=this.get("content");if(e){var t=e.filter(function(e){return!s.isEmpty(e)});return t=t.map(e instanceof DS.RecordArray?function(e){var t=e.getProperties(this.get("displayKey"));return t[this.get("selectionKey")]=e,t}.bind(this):function(e){var t={};return t[this.get("displayKey")]=e,t}.bind(this))}return[]},mappedContent:function(){return this._mapContentItems()}.property("content"),contentChanged:function(){var e=this.get("bloodhound");e&&(e.clear(),e.add(this._mapContentItems()))}.observes("content.[]"),bloodhound:null,displayKey:"value",selectionKey:"value",hint:!0,highlight:!0,lastHint:null,minlength:1,selectedItem:!1,inputElement:null,typeAhead:null,setOnBlur:!0,templates:null,_getSource:function(){var e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(this.get("displayKey")),queryTokenizer:Bloodhound.tokenizers.whitespace,local:this.get("mappedContent")});return e.initialize(),this.set("bloodhound",e),e.ttAdapter()},didInsertElement:function(){var e=this.$("input");this.set("inputElement",e);var t=e.typeahead({autoselect:!0,hint:this.get("hint"),highlight:this.get("highlight"),minLength:this.get("minlength")},{displayKey:this.get("displayKey"),source:this._getSource(),templates:this.get("templates")});this.set("typeAhead",t),t.on("typeahead:selected",function(e,t){this.set("selection",t[this.get("selectionKey")]),this.set("selectedItem",!0)}.bind(this)),t.on("typeahead:autocompleted",function(e,t){this.set("selection",t[this.get("selectionKey")]),this.set("selectedItem",!0)}.bind(this)),this.get("setOnBlur")&&(e.on("keyup",function(){var e=this.$(".tt-hint"),t=e.val();this.set("lastHint",t),this.set("selectedItem",!1)}.bind(this)),e.on("blur",function(e){var t=this.get("selection"),a=e.target.value.trim();if(s.isEmpty(t)||(t.trim&&(t=t.trim()),this.set("selection",t)),!this.get("selectedItem")){var n=this.get("lastHint"),r=!1;s.isEmpty(n)&&(n=a,r=!0),s.isEmpty(a)||s.isEmpty(n)||this.get("bloodhound").get(n,function(s){s.length>0?r&&n.toLowerCase()!==s[0][this.get("displayKey")].toLowerCase()||(this.set("selectedItem",!0),this.set("selection",s[0][this.get("selectionKey")]),e.target.value=s[0][this.get("displayKey")],this.get("model").set(this.get("propertyName"),e.target.value)):a!==t&&this.set("selection")}.bind(this))}}.bind(this)))},willDestroyElement:function(){this.get("inputElement").typeahead("destroy")}})}),define("hospitalrun/components/inventory-location-picker",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({doingSetup:!1,label:null,locationPickers:null,locationList:null,quantityRequested:null,locationChange:function(){var e=this.get("doingSetup"),t=this.get("locationList"),a=this.get("locationPickers"),n=this.get("quantityRequested"),r=-1;e||(a.reduce(function(e,t,a){var i,o=t.get("selectedLocation");return i=s.isEmpty(o)?e:e+o.get("quantity"),-1===r&&i>=n&&(r=a),i},0),r>-1?a.get("length")>r+1&&(a=a.slice(0,r+1),this.set("locationPickers",a)):a.addObject(s.Object.create()),this._setupLocationPickers(a,t))},_setup:function(){var e=this.get("locationList"),t=[],a=this.get("quantityRequested");s.isEmpty(e)||s.isEmpty(a)||(this.set("doingSetup",!0),e.reduce(function(e,n){return a>e&&t.addObject(s.Object.create()),e+n.get("quantity")},0),this._setupLocationPickers(t,e,!0),this.set("locationPickers",t),this.set("doingSetup",!1))}.on("init"),_setupLocationPickers:function(e,t,a){e.reduce(function(e,t){var s=t.get("selectedLocation");return t.set("subLocationList",e),(!e.contains(s)||a)&&t.set("selectedLocation",e.get("firstObject")),t.set("label","And"),e.filter(function(e){return t.get("selectedLocation.id")!==e.get("id")})},t);var n=e.get("firstObject");s.isEmpty(n)||n.set("label",this.get("label"))},_selectedLocationChange:function(){var e=this.get("locationPickers"),t=[];e.forEach(function(e){t.addObject(e.get("selectedLocation"))}),this.set("selectedLocations",t)}.observes("locationPickers.@each.selectedLocation"),resetLocationParameters:function(){this._setup()}.observes("locationList","quantityRequested")})}),define("hospitalrun/components/inventory-typeahead",["hospitalrun/components/type-ahead","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({displayKey:"name",showQuantity:!0,_mapInventoryItems:function(e){var t={};return t.name=this.get("showQuantity")&&e.quantity?"%@ - %@ (%@ available)".fmt(e.name,e.friendlyId,e.quantity):"%@ - %@".fmt(e.name,e.friendlyId),t[this.get("selectionKey")]=e,t},mappedContent:function(){var e=this.get("content"),t=[];return e&&(t=e.map(this._mapInventoryItems.bind(this))),t}.property("content"),contentChanged:function(){var e=this.get("bloodhound"),t=this.get("content");e&&(e.clear(),e.add(t.map(this._mapInventoryItems.bind(this))))}.observes("content.[]")})}),define("hospitalrun/components/loading-message",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({tagName:"span",layout:s.Handlebars.compile("{{message}}"),showLoadingMessages:!1,loadingMessages:["The top butterfly flight speed is 12 miles per hour. Some moths can fly 25 miles per hour!","Owls are the only birds that can see the color blue.","Cats have over 100 vocal sounds; dogs only have 10.","Humans use a total of 72 different muscles in speech.","More than 1,000 different languages are spoken on the continent of Africa.","An erythrophobe is someone who blushes easily.","The most common phobia in the world is odynophobia which is the fear of pain.","Your body uses 300 muscles to balance itself when you are standing still.","Certain frogs can be frozen solid then thawed, and continue living.","Our eyes are always the same size from birth, but our nose and ears never stop growing.","Your tongue is the only muscle in your body that is attached at only one end.","Camels have three eyelids to protect themselves from blowing sand."],_setRandomMessage:function(){var e=this.get("loadingMessages"),t=Math.floor(Math.random()*e.length);this.set("message",e[t]),this.set("timer",s.run.later(this,this._setRandomMessage,1e3))},didInsertElement:function(){this._setRandomMessage()},willDestroyElement:function(){var e=this.get("timer");s.isEmpty(e)||s.run.cancel(e)}})}),define("hospitalrun/components/location-select",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Select.extend({currentLocation:null,_setup:function(){s.Binding.from("selection").to("currentLocation").connect(this)}.on("init"),curentLocationChanged:function(){s.run.once(this,function(){this.get("parentView").locationChange()})}.observes("currentLocation")})}),define("hospitalrun/components/patient-typeahead",["ember","hospitalrun/mixins/patient-name","hospitalrun/components/type-ahead","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=i.extend(r,{displayKey:"name",setOnBlur:!0,_mapPatient:function(e){var t={};return e.doc.id=e.id.substr(8),t.name="%@ - %@".fmt(this.getPatientDisplayName(e.doc),this.getPatientDisplayId(e.doc)),t[this.get("selectionKey")]=e.doc,t},contentChanged:function(){var e=this.get("bloodhound"),t=this.get("content");e&&(e.clear(),n.isEmpty(t)||e.add(t.map(this._mapPatient.bind(this))))}.observes("content.[]"),mappedContent:function(){var e=this.get("content"),t=[];return e&&(t=e.map(this._mapPatient.bind(this))),t}.property("content")})}),define("hospitalrun/mixins/patient-name",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({getPatientDisplayId:function(e){var t=s.get(e,"externalPatientId"),a=s.get(e,"friendlyId"),n=s.get(e,"id");return s.isEmpty(a)?s.isEmpty(t)?n:t:a},getPatientDisplayName:function(e){var t=s.get(e,"firstName"),a=s.get(e,"lastName"),n=s.get(e,"middleName"),r=[];return s.isEmpty(t)||r.push(t),s.isEmpty(n)||r.push(n),s.isEmpty(a)||r.push(a),r.join(" ")}})}),define("hospitalrun/components/pricing-typeahead",["ember","hospitalrun/components/type-ahead","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=n.extend({displayKey:"name",setOnBlur:!0,_mapContentItems:function(){var e=this.get("content");if(e){var t=e.filter(function(e){return!a.isEmpty(e)});return t=t.map(function(e){var t={};return t.name=e.name,t[this.get("selectionKey")]=e,t}.bind(this))}return[]}})}),define("hospitalrun/components/quantity-calc",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({quantityGroups:null,calculated:null,currentUnit:null,targetUnit:null,showTotal:function(){var e=this.get("calculated"),t=this.get("quantityGroups");return t.length>1&&!s.isEmpty(e)&&!isNaN(e)?!0:!1}.property("calculated"),targetUnitChanged:function(){var e=this.get("quantityGroups.firstObject.unit");this.updateCurrentUnit(e,0)}.observes("targetUnit"),_setup:function(){var e=this.get("calculated"),t=this.get("targetUnit"),a=this.get("quantityGroups");s.isEmpty(a)&&(a=new Array({index:0,unit:t,firstQuantity:!0,quantity:e}),this.set("quantityGroups",a))}.on("init"),calculateTotal:function(){var e=this.get("quantityGroups"),t=!1,a=e.get("lastObject"),n=this.get("targetUnit");if(t=e.every(function(e){var t=e.quantity;return!s.isEmpty(t)&&!isNaN(t)}),t&&a.unit===n){var r=e.reduce(function(e,t){return e*parseInt(t.quantity)
},1);this.set("calculated",r)}else this.set("calculated")},updateCurrentUnit:function(e,t){var a=this.get("targetUnit"),n=this.get("quantityGroups"),r=n.length;s.isEmpty(a)||(e===a?r-1>t&&n.removeAt(t+1,r-1-t):t===r-1?n.addObject({unitName:e,unit:a,index:n.length}):s.set(n.objectAt(t+1),"unitName",e),s.run.once(this,this.calculateTotal))}})}),define("hospitalrun/components/quantity-conv",["ember","hospitalrun/mixins/unit-types","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Component.extend(n,{firstQuantity:!1,quantity:null,quantityClass:null,quantityHelp:null,unitName:null,unit:null,resetUnitName:!1,unitChanged:function(){var e=this.get("unit");this.get("parentView").updateCurrentUnit(e,this.get("index"))}.observes("unit"),quantityChanged:function(){var e=this.get("quantity");this.setProperties(a.isEmpty(e)||isNaN(e)?{quantityHelp:"not a valid number",quantityClass:"has-error"}:{quantityHelp:null,quantityClass:"has-success"}),a.run.once(this,function(){this.get("parentView").calculateTotal()})}.observes("quantity")})}),define("hospitalrun/mixins/unit-types",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({unitList:["ampoule","bag","bottle","box","bundle","capsule","case","container","cream","each","gel","nebule","ointment","pack","pair","pallet","patch","pcs","pill","plastic","polyamp","roll","spray","suppository","suspension","set","syrup","tablet","tray","tube","vial"]})}),define("hospitalrun/components/radio-button",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({tagName:"input",type:"radio",attributeBindings:["name","type","value","checked:checked"],init:function(){this.labelPathDidChange(),this.valuePathDidChange(),this._super()},click:function(){var e=this.$().val();this.set("selection",e)},checked:function(){return this.get("value")===this.get("selection")}.property("selection"),labelPathDidChange:s.observer("parentView.radioLabelPath",function(){var e=this.get("parentView.radioLabelPath");e&&s.defineProperty(this,"label",s.computed(function(){return this.get(e)}).property(e))}),valuePathDidChange:s.observer("parentView.radioValuePath",function(){var e=this.get("parentView.radioValuePath");e&&s.defineProperty(this,"value",s.computed(function(){return this.get(e)}).property(e))})})}),define("hospitalrun/components/role-select",["ember","exports"],function(e,t){"use strict";var s=e["default"],a=s.get;t["default"]=s.Select.extend({optionValuePath:"content.roles",optionLabelPath:"content.name",valueDidChange:s.observer("value",function(){var e,t=a(this,"content"),n=a(this,"value"),r=a(this,"optionValuePath").replace(/^content\.?/,""),i=r?a(this,"selection."+r):a(this,"selection");0!==s.compare(n,i)&&(e=t?t.find(function(e){return 0===s.compare(n,r?a(e,r):e)}):null,this.set("selection",e))})})}),define("hospitalrun/components/select-or-typeahead",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({name:"select-or-typeahead","class":null,content:null,hint:!0,label:null,list:null,optionLabelPath:"content",optionValuePath:"content",property:null,selection:null,setOnBlur:!0,typeAheadType:null,userCanAdd:!0,_setup:function(){this.listChanged()}.on("init"),listChanged:function(){var e=this.get("list");!s.isEmpty(e)&&e.get&&(this.set("content",e.get("value")),this.set("userCanAdd",e.get("userCanAdd")))}.observes("list"),usePricingTypeAhead:function(){return"pricing"===this.get("typeAheadType")}.property("typeAheadType")})}),define("hospitalrun/components/smart-prescription",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.TextArea.extend(s.TargetActionSupport,{valueDidChange:s.observer("value",function(){this.triggerAction({action:"search"})})})}),define("hospitalrun/components/sortable-column",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Component.extend({action:"sortByKey",sortDesc:!1,sortBy:null,sortKey:null,sorted:function(){var e=this.get("sortBy"),t=this.get("sortKey");return e===t}.property("sortBy","sortKey"),actions:{sortBy:function(){var e=this.get("sortBy"),t=this.get("sorted"),s=!1;t&&(s=this.toggleProperty("sortDesc")),this.sendAction("action",e,s)}}})}),define("hospitalrun/components/take-photo",["ember","exports"],function(e,t){"use strict";var s=e["default"];navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,t["default"]=s.Component.extend({showCameraSelect:!1,canvas:null,video:null,photo:null,photoFile:null,width:200,height:0,selectedCamera:s.computed.alias("parentView.model.selectedCamera"),videoSources:null,photoSource:s.computed.alias("parentView.model.photoSource"),photoSources:["Take a Picture","Upload a File"],setupCamera:!1,_cameraChange:function(){var e=this.get("stream"),t=this.get("video");s.isEmpty(e)||(t.src=null,e.stop());var a=this.get("selectedCamera"),n={audio:!1,video:{optional:[{sourceId:a}]}};navigator.getUserMedia(n,this._gotStream.bind(this),this._errorCallback),this._setupVideo()}.observes("parentView.model.selectedCamera"),_errorCallback:function(e){console.log("navigator.getUserMedia error: ",e)},_gotSources:function(e){for(var t,s=0,a=[],n=0;n!==e.length;++n){var r=e[n];"video"===r.kind&&(t="Camera "+ ++s,r.label&&(t+=" ("+r.label+")"),a.addObject({id:r.id,label:t}))}this.set("videoSources",a),a.length>0&&(this.set("selectedCamera",a[0].id),1===a.length?this.set("showCameraSelect",!1):this.set("showCameraSelect",!0))},_gotStream:function(e){if(this.isDestroyed)e.stop();else{var t=this.get("video");this.set("stream",e),t.src=window.URL.createObjectURL(e),t.play()}},_photoSourceChanged:function(){var e=this.$(".camera"),t=this.$(".fileupload"),s=this.get("photoSource"),a=this.get("setupCamera");if("Upload a File"===s)t.show(),e.hide();else if(t.hide(),e.show(),!a){var n=this.$("canvas")[0],r=this.$("img")[0],i=this.$("video")[0];this.setProperties({canvas:n,photo:r,video:i}),"undefined"==typeof MediaStreamTrack||"undefined"===MediaStreamTrack.getSources?(this.set("showCameraSelect",!1),navigator.getUserMedia&&(navigator.getUserMedia({audio:!1,video:!0},this._gotStream.bind(this),this._errorCallback),this._setupCanPlayListener(i))):(MediaStreamTrack.getSources(this._gotSources.bind(this)),this._setupCanPlayListener(i)),this.set("setupCamera",!0)}}.observes("parentView.model.photoSource"),_setupCanPlayListener:function(e){e.removeEventListener("canplay",this._setupVideo.bind(this),!1),e.addEventListener("canplay",this._setupVideo.bind(this),!1)},_setupVideo:function(){var e=this.get("canvas"),t=this.get("height"),s=this.get("video"),a=this.get("width");t=s.videoHeight/(s.videoWidth/a),s.setAttribute("width",a),s.setAttribute("height",t),e.setAttribute("width",a),e.setAttribute("height",t),this.setProperties({height:t,width:a})},_stopStream:function(){var e=this.get("stream");s.isEmpty(e)||e.stop()},actions:{takePhoto:function(){var e=this.get("canvas"),t=this.get("height"),s=this.get("video"),a=this.get("width");e.width=a,e.height=t,e.getContext("2d").drawImage(s,0,0,a,t);for(var n=e.toDataURL("image/png"),r=atob(n.split(",")[1]),i=[],o=0;o<r.length;o++)i.push(r.charCodeAt(o));this.set("photoFile",new Blob([new Uint8Array(i)],{type:"image/png"}))}},canCaptureVideo:function(){return navigator.getUserMedia?!0:!1}.property(),didInsertElement:function(){var e=this.$(".camera"),t=this.$(".fileUpload");1===e.length&&t.hide()},willDestroyElement:function(){this._stopStream()}})}),define("hospitalrun/components/text-search",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.TextField.extend(s.TargetActionSupport,{change:function(){this.triggerAction({action:"search"})}})}),define("hospitalrun/controllers/abstract-report-controller",["ember","hospitalrun/mixins/date-format","hospitalrun/mixins/modal-helper","hospitalrun/mixins/number-format","hospitalrun/mixins/pouchdb","hospitalrun/mixins/progress-dialog","exports"],function(e,t,s,a,n,r,i){"use strict";var o=e["default"],l=t["default"],u=s["default"],h=a["default"],p=n["default"],c=r["default"];i["default"]=o.ArrayController.extend(l,u,h,p,c,{defaultErrorMessage:"An error was encountered while generating the requested report.  Please let your system administrator know that you have encountered an error.",offset:0,limit:25,progressMessage:"Please wait while your report is generated.",progressTitle:"Generating Report",reportColumns:null,reportRows:[],reportTitle:null,reportType:null,reportTypes:null,showReportResults:!1,_addReportRow:function(e,t,s,a){var n,r=this.get("reportRows"),i=[];o.isEmpty(s)&&(s=this.get("reportColumns"));for(var l in s)s[l].include&&(n=o.get(e,s[l].property),i.push(o.isEmpty(n)?"":"_numberFormat"===s[l].format?t?n:this._numberFormat(n):!t&&s[l].format?this[s[l].format](n):n));r.addObject(a?{rowAction:a,row:i}:i)},_finishReport:function(e){this.set("showReportResults",!0),this.set("offset",0),this._setReportHeaders(e),this._setReportTitle(),this._generateExport(),this.closeProgressModal()},_generateExport:function(){var e=[],t=this.get("reportHeaders"),s=[t];s.addObjects(this.get("reportRows")),s.forEach(function(t){e.push(t.row?'"'+t.row.join('","')+'"':'"'+t.join('","')+'"')});var a=e.join("\r\n"),n="data:application/csv;charset=utf-8,"+encodeURIComponent(a);this.set("csvExport",n)},_notifyReportError:function(e){var t="An error was encountered while generating the requested report.  Please let your system administrator know that you have encountered an error.";throw this.closeProgressModal(),this.displayAlert("Error Generating Report",t),new Error(e)},_setReportHeaders:function(e){var t=[];o.isEmpty(e)&&(e=this.get("reportColumns"));for(var s in e)e[s].include&&t.push(e[s].label);this.set("reportHeaders",t)},_setReportTitle:function(){var e=this.get("endDate"),t="",s="",a=this.get("reportType"),n=this.get("reportTypes"),r=this.get("startDate");o.isEmpty(e)||(t=moment(e).format("l"));var i=n.findBy("value",a);o.isEmpty(r)?this.set("reportTitle","%@ Report %@".fmt(i.name,t)):(s=moment(r).format("l"),this.set("reportTitle","%@ Report %@ - %@".fmt(i.name,s,t)))},actions:{nextPage:function(){var e=this.get("limit");this.incrementProperty("offset",e)},previousPage:function(){var e=this.get("limit");this.decrementProperty("offset",e)}},currentReportRows:function(){var e=this.get("limit"),t=this.get("offset"),s=this.get("reportRows");return s.slice(t,t+e)}.property("reportRows.@each","offset","limit"),disablePreviousPage:function(){return 0===this.get("offset")}.property("offset"),disableNextPage:function(){var e=this.get("limit"),t=this.get("reportRows.length"),s=this.get("offset");return s+e>=t}.property("offset","limit","reportRows.length"),showPagination:function(){var e=this.get("reportRows.length"),t=this.get("limit");return e>t}.property("reportRows.length")})}),define("hospitalrun/mixins/date-format",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({_dateFormat:function(e,t){return s.isEmpty(t)&&(t="l"),s.isEmpty(e)?void 0:moment(e).format(t)},dateToTime:function(e){return!s.isEmpty(e)&&e.getTime?e.getTime():void 0}})}),define("hospitalrun/mixins/number-format",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({_calculateTotal:function(e,t){var a,n=0;return a=s.isArray(e)?e:this.get(e),n=a.reduce(function(e,a){return e+=this._getValidNumber(s.get(a,t))}.bind(this),0),this._numberFormat(n,!0)},_getValidNumber:function(e){return s.isEmpty(e)||isNaN(e)?0:Number(e)},_numberFormat:function(e,t){var a;if(!s.isEmpty(e)){if(isNaN(e))return;return a=Number(e).toFixed(2),t?Number(a):a.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}},_validNumber:function(e){return!s.isEmpty(e)&&!isNaN(e)&&e>0}})}),define("hospitalrun/controllers/application",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Controller.extend({needs:["filesystem","pouchdb"],filesystem:s.computed.alias("controllers.filesystem"),pouchdb:s.computed.alias("controllers.pouchdb"),_setup:function(){var e=this.get("filesystem");e.setup()}.on("init")})}),define("hospitalrun/controllers/appointment-calendar",["ember","hospitalrun/views/appointment-event","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Calendar.CalendarController.extend({init:function(){a.lookup.Hospitalrun.AppointmentEvent||(a.lookup.Hospitalrun.AppointmentEvent=n),this._super()},needs:"appointments/index",parentModel:a.computed.alias("controllers.appointments/index.model"),eventViewClass:"Hospitalrun.AppointmentEvent",states:["day","week"],initialState:"week",content:function(){var e=this.get("parentModel");return e.map(function(e){var t={name:e.get("patient.displayName"),appointment:e};return e.get("allDay")?(t.start=moment(e.get("startDate")).hour(8),t.end=moment(e.get("startDate")).hour(9)):(t.start=moment(e.get("startDate")),t.end=moment(e.get("endDate"))),t})}.property("controllers.appointments/index.model.@each.lastModified")})}),define("hospitalrun/views/appointment-event",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Calendar.EventView.extend({templateName:"appointment-event"})}),define("hospitalrun/controllers/filesystem",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Controller.extend({needs:"pouchdb",pouchdb:s.computed.alias("controllers.pouchdb"),filer:null,fileSystemSize:8589934592,_onError:function(e){console.log("Filer filesystem error: "+e)},_downloadFiles:function(){this.store.find("photo").then(function(e){e.forEach(function(e){this.downloadIfNeeded(e)}.bind(this))}.bind(this))},_downloadFileFromServer:function(e){var t=s.get(e,"fileName"),a=s.get(e,"id"),n=s.get(e,"url"),r=new XMLHttpRequest;s.isEmpty(n)||(r.open("GET",n,!0),r.responseType="blob",r.onload=function(){var e=new Blob([r.response]);this.addFile(e,t,a)}.bind(this),r.send())},setup:function(){var e=this.get("fileSystemSize"),t=new Filer;t.init({persistent:!0,size:e},function(){this.set("filer",t)}.bind(this))},addFile:function(e,t,a){return new s.RSVP.Promise(function(n,r){var i=new Date,o=this.get("filer"),l=e.name||i.getTime(),u=t+l,h=this.get("pouchdb");if(t.indexOf(".")>-1){u=t;var p=t.split("/");l=p.pop(),t=p.join("/"),t+="/"}if(-1===u.indexOf("."))if(e.type){var c=e.type.split("/");u+="."+c.pop()}else u+=".png";this.fileExists(u).then(function(p){if(p&&(u=t+i.getTime()+l),s.isEmpty(o)&&r("Local filesystem unavailable, please use Google Chrome browser"),s.isEmpty(l)&&!s.isEmpty(e.type)){var c=e.type.split("/");c.length>1&&(u+="."+c[1])}o.mkdir(t,!1,function(){o.write(u,{data:e,type:e.type},function(e){h.saveFileLink(u,a),n(e)},function(e){r(e)})},function(e){r(e)})}.bind(this))}.bind(this))},deleteFile:function(e,t){return new s.RSVP.Promise(function(s,a){var n=this.get("filer"),r=this.get("pouchdb");try{n.rm(e,function(){r.removeFileLink(t),s()},a)}catch(i){a(i)}}.bind(this))},downloadIfNeeded:function(e){var t=s.get(e,"fileName");this.fileExists(t).then(function(t){t||this._downloadFileFromServer(e)}.bind(this))},fileExists:function(e){return new s.RSVP.Promise(function(t){var s=this.get("filer");s.fs.root.getFile(e,{},function(){t(!0)},function(){t(!1)})}.bind(this))},fileToDataURL:function(e){return new s.RSVP.Promise(function(t){var s=new FileReader;s.onloadend=function(e){t(e.target.result)},s.readAsDataURL(e)})},isFileSystemEnabled:function(){var e=this.get("filer");return!s.isEmpty(e)}.property("filer"),pathToFileSystemURL:function(e){return new s.RSVP.Promise(function(t){var s=this.get("filer");s.fs.root.getFile(e,{},function(e){t(e.toURL())},function(){t()})}.bind(this))}})}),define("hospitalrun/controllers/index",["ember","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Controller.extend(n,{indexLinks:["Appointments","Labs","Imaging","Inventory","Medication","Patients","Users"],setupPermissions:function(){var e=this.get("defaultCapabilities");for(var t in e)this.currentUserCan(t)&&this.set("userCan_"+t,!0)}.on("init"),activeLinks:function(){var e=[],t=this.get("indexLinks");return t.forEach(function(t){var s=t.toLowerCase();this.currentUserCan(s)&&e.push({action:s,text:t})}.bind(this)),e}.property("indexLinks")})}),define("hospitalrun/controllers/item-charge-controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({canAddCharge:s.computed.alias("parentController.canAddCharge"),firstPricingType:s.computed.alias("parentController.pricingTypeList.firstObject"),pricingList:s.computed.alias("parentController.pricingList"),pricingListByType:function(){var e=this.get("parentController"),t=this.get("pricingList"),a=this.get("model"),n=[];if(!s.isEmpty(t)){t=t.filterBy("type",a),t=t.map(function(t){var s=e.findChargeForPricingItem(t);return s&&e.set(t._id,s.get("quantity")),t}.bind(this));for(var r=0,i=t.length;i>r;)n.push(t.slice(r,r+6)),r+=6}return n}.property("model","pricingList"),activeClass:function(){var e=this.get("firstPricingType"),t=this.get("model");return t===e?"active":void 0}.property(),tabId:function(){return this.get("model").toLowerCase().dasherize()}.property("model"),tabHref:function(){var e=this.get("tabId");return"#"+e}.property("tabId")})}),define("hospitalrun/controllers/login",["ember","exports"],function(e,t){"use strict";var s=e["default"],a=s.Controller.extend(s.SimpleAuth.LoginControllerMixin,{authenticatorFactory:"authenticators:custom",actions:{sessionAuthenticationFailed:function(e){this.set("errorMessage",e)},sessionAuthenticationSucceeded:function(){this.set("errorMessage",""),this.set("identification",""),this.set("password",""),this._super()}}});t["default"]=a}),define("hospitalrun/controllers/navigation",["ember","hospitalrun/mixins/progress-dialog","hospitalrun/mixins/user-session","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.Controller.extend(r,i,{needs:"application",allowSearch:!1,currentSearchText:null,currentRouteName:n.computed.alias("controllers.application.currentRouteName"),progressTitle:"Searching",searchRoute:null,syncStatus:"",showInventory:function(){return this.currentUserCan("inventory")}.property("session.isAuthenticated"),showPatients:function(){return this.currentUserCan("patients")}.property("session.isAuthenticated"),showUsers:function(){return this.currentUserCan("users")}.property("session.isAuthenticated"),actions:{search:function(){if(this.allowSearch&&this.searchRoute){var e=this.get("currentRouteName"),t=this.get("currentSearchText"),s=this.get("searchText");(t!==s||-1===e.indexOf(".search"))&&(this.set("searchText",""),this.set("progressMessage","Searching for "+s+".  Please wait..."),this.showProgressModal(),this.transitionToRoute(this.searchRoute+"/"+s))}}}})}),define("hospitalrun/controllers/pouchdb",["ember","hospitalrun/utils/pouch-oauth-xhr","hospitalrun/utils/pouch-views","hospitalrun/mixins/pouch-adapter-utils","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.Controller.extend(l,{needs:["filesystem","navigation"],filesystem:r.computed.alias("controllers.filesystem"),isFileSystemEnabled:r.computed.alias("controllers.filesystem.isFileSystemEnabled"),mainDB:null,configDB:null,_getFileLink:function(e){return new r.RSVP.Promise(function(t){var s=this.get("configDB");s.get("file-link_"+e,function(e,s){t(s)})}.bind(this))},_gotServerMainDB:function(e,t){if(e)throw console.log("Error creating main pouchDB",e),e;this.set("mainDB",t)},getDocFromMainDB:function(e){return new r.RSVP.Promise(function(t,s){var a=this.get("mainDB");a.get(e,function(e,a){e?this._pouchError(s)(e):t(a)}.bind(this))}.bind(this))},removeFileLink:function(e){var t=this.get("configDB");this._getFileLink(e).then(function(e){t.remove(e)})},saveFileLink:function(e,t){var s=this.get("configDB");s.put({fileName:e},"file-link_"+t)},queryMainDB:function(e,t){return new r.RSVP.Promise(function(s,a){var n=this.get("mainDB");t?n.query(t,e,function(e,t){e?this._pouchError(a)(e):s(t)}.bind(this)):n.allDocs(e,function(e,t){e?this._pouchError(a)(e):s(t)}.bind(this))}.bind(this))},setupMainDB:function(e){return new r.RSVP.Promise(function(t,s){var a={};e.config_use_google_auth&&((r.isEmpty(e.config_consumer_key)||r.isEmpty(e.config_consumer_secret)||r.isEmpty(e.config_oauth_token)||r.isEmpty(e.config_token_secret))&&s(),a.ajax={xhr:i(e),timeout:3e4});var n=document.location.protocol+"//"+document.location.host+"/db/main";new PouchDB(n,a,function(e,a){e?(r.run.later(this,function(){this.get("session").invalidate()}),s(e)):(o(a),this._gotServerMainDB(e,a),this.get("applicationAdapter").set("db",a),t({mainDB:a}))}.bind(this))}.bind(this))}})}),define("hospitalrun/utils/pouch-oauth-xhr",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=function(e){function t(e){this.internalXHR=new XMLHttpRequest(e),this.requestHeaders={},this.upload=this.internalXHR.upload}return t.prototype={_decodeParameters:function(e,t){var s,a,n=t||{},r=decodeURIComponent(e).split("&");for(a=0;a<r.length;a++)s=r[a].split("="),n[s[0]]=s[1];return n},abort:function(){this.internalXHR.abort()},oauth:e,getAllResponseHeaders:function(){return this.internalXHR.getAllResponseHeaders()},getResponseHeader:function(e){return this.internalXHR.getResponseHeader(e)},open:function(e,t,s,a,n){if(this.method=e,this.url=t,this.async=void 0!==s?s:!0,this.user=a,this.password=n,t.indexOf("?")>0){var r=t.split("?");("POST"===this.method||"GET"===this.method||"DELETE"===this.method)&&(this.url=r[0]),this.params=this._decodeParameters(r[1])}},send:function(e){void 0!==this.signOauth&&(this.params=this.signOauth(this.params),"POST"===this.method||"GET"===this.method||"DELETE"===this.method?this.url=OAuth.addToURL(this.url,this.params):this.requestHeaders.Authorization=OAuth.getAuthorizationHeader("",this.params)),this.internalXHR.open(this.method,this.url,this.async,this.user,this.password);for(var t in this.requestHeaders)this.internalXHR.setRequestHeader(t,this.requestHeaders[t]);if(void 0!==this.withCredentials&&(this.internalXHR.withCredentials=this.withCredentials),void 0!==this.responseType&&(this.internalXHR.responseType=this.responseType),void 0!==this.timeout&&(this.internalXHR.timeout=this.timeout),void 0!==this.ontimeout&&(this.internalXHR.ontimeout=this.ontimeout),this.readyState=this.internalXHR.readyState,this.status=this.internalXHR.status,void 0!==this.onreadystatechange){var s=this;this.internalXHR.onreadystatechange=function(){4===this.readyState&&0===this.status&&(console.log("wrapper readystatechange fired with xhr state and status:",this.readyState,this.status),console.log("URL WAS: "+s.url,s),console.trace()),s.readyState=this.readyState,s.response=this.response,s.responseText=this.responseText,s.responseType=this.responseType,s.responseXML=this.responseXML,s.status=this.status,s.statusText=this.statusText,s.onreadystatechange()}}this.internalXHR.send(e)},setRequestHeader:function(e,t){this.requestHeaders[e]=t},signOauth:function(e){s.isEmpty(e)&&(e={});var t=this.url,a=this.url.indexOf("/db/");a>-1&&(t="http://localhost:5984/"+this.url.substring(a+4));var n={consumerSecret:this.oauth.config_consumer_secret,tokenSecret:this.oauth.config_token_secret};e.oauth_signature_method="HMAC-SHA1",e.oauth_consumer_key=this.oauth.config_consumer_key,e.oauth_token=this.oauth.config_oauth_token,e.oauth_version="1.0";var r={parameters:e};return r.action=t,r.method=this.method,OAuth.SignatureMethod.sign(r,n),r.parameters}},t}}),define("hospitalrun/utils/pouch-views",["exports"],function(e){"use strict";function t(e,t){var s={_id:"_design/"+e.name,version:e.version,views:{}};return t&&(s._rev=t),s.views[e.name]={map:e.function.toString()},e.sort&&(s.lists={sort:e.sort}),s}function s(e){return'function(head, req) {function keysEqual(keyA, keyB) {for (var i= 0; i < keyA.length; i++) {if (keyA[i] !== keyB[i]) {return false;}}return true;}function compareStrings(aString, bString) {if (!aString) {aString = "";}if (!bString) {bString = "";}if (aString < bString) {return -1;} else if (aString > bString) {return 1;} else {return 0;}}var row,rows=[],startingPosition = 0;while(row = getRow()) {rows.push(row);}rows.sort('+e+');if (req.query.sortStartKey) {var startKey = JSON.parse(req.query.sortStartKey);for (var i=0; i<rows.length; i++) {if (keysEqual(startKey, rows[i].key)) {startingPosition = i;break;}}}if (req.query.sortDesc) {rows = rows.reverse();}if (req.query.sortLimit) {rows = rows.slice(startingPosition, parseInt(req.query.sortLimit)+startingPosition);} else if (startingPosition > 0) {rows = rows.slice(startingPosition);}send(JSON.stringify({"rows" : rows}));}'}function a(e,s,a){var n=t(e,a);s.put(n).then(function(){s.query(e.name,{stale:"update_after"})},function(e){console.log("ERR updateDesignDoc:",e)})}var n=[{name:"appointments_by_date","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"appointment"===t)){var a=e.endDate,n=e.startDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([n,a,e._id])}},version:2},{name:"appointments_by_patient","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"appointment"===t)){var a=e.endDate,n=e.startDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([e.patient,n,a,e._id])}},version:2},{name:"imaging_by_status","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"imaging"===t)){var a=e.imagingDate,n=e.requestedDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([e.status,n,a,e._id])}},version:2},{name:"inventory_by_name","function":function(e){var t,s;e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"inventory"===t&&emit([e.name,e._id]))},sort:s(function(e,t){var s="";switch(req.query&&req.query.sortKey&&(s=req.query.sortKey),s){case"crossReference":case"description":case"friendlyId":case"name":case"price":case"quantity":case"type":return compareStrings(e.doc[s],t.doc[s]);default:return 0}}.toString()),version:1},{name:"inventory_by_type","function":function(e){var t,s;e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"inventory"===t&&emit(e.type))},version:2},{name:"inventory_purchase_by_date_received","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"inv-purchase"===t)){var a=e.dateReceived;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),emit([a,e._id])}},version:2},{name:"inventory_purchase_by_expiration_date","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"inv-purchase"===t)){var a=e.expirationDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),emit([a,e._id])}},version:2},{name:"inventory_request_by_item","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"inv-request"===t)){var a=e.dateCompleted;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),emit([e.inventoryItem,e.status,a])}},version:2},{name:"inventory_request_by_status","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"inv-request"===t)){var a=e.dateCompleted;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),emit([e.status,a,e._id])}},version:2},{name:"invoice_by_status","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"invoice"===t)){var a=e.billDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),emit([e.status,a,e._id])}},version:2},{name:"lab_by_status","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"lab"===t)){var a=e.labDate,n=e.requestedDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([e.status,n,a,e._id])}},version:2},{name:"medication_by_status","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"medication"===t)){var a=e.prescriptionDate,n=e.requestedDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([e.status,n,a,e._id])}},version:2},{name:"patient_by_display_id","function":function(e){var t,s;e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"patient"===t&&emit(e.friendlyId?[e.friendlyId,e._id]:e.externalPatientId?[e.externalPatientId,e._id]:[e._id,e._id]))},sort:s(function(e,t){function s(e){return e&&""!==e?new Date(e).getTime():0}var a="";switch(req.query&&req.query.sortKey&&(a=req.query.sortKey),a){case"firstName":case"gender":case"lastName":case"status":return compareStrings(e.doc[a],t.doc[a]);case"dateOfBirth":return s(e.doc.dateOfBirth)-s(t.doc.dateOfBirth);default:return 0}}.toString()),version:3},{name:"photo_by_patient","function":function(e){var t,s;e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"photo"===t&&emit(e.patient))},version:2},{name:"procedure_by_date","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"procedure"===t)){var a=e.procedureDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),emit([a,e._id])}},version:2},{name:"pricing_by_category","function":function(e){var t,s;e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"pricing"===t&&emit([e.category,e.name,e.type,e._id]))},version:2},{name:"sequence_by_prefix","function":function(e){var t,s;e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"sequence"===t&&emit(e.prefix))},version:2},{name:"visit_by_date","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"visit"===t)){var a=e.endDate,n=e.startDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([n,a,e._id])}},version:2},{name:"visit_by_patient","function":function(e){var t,s;if(e._id&&(s=e._id.indexOf("_"))>0&&(t=e._id.substring(0,s),"visit"===t)){var a=e.endDate,n=e.startDate;a&&""!==a&&(a=new Date(a),a.getTime&&(a=a.getTime())),n&&""!==n&&(n=new Date(n),n.getTime&&(n=n.getTime())),emit([e.patient,n,a,e.visitType,e._id])}},version:2}];e["default"]=function(e){n.forEach(function(t){e.get("_design/"+t.name).then(function(s){s.version!==t.version&&a(t,e,s._rev)},function(){a(t,e)})})}}),define("hospitalrun/dialog/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({showUpdateButton:!0,isUpdateDisabled:!1,actions:{cancel:function(){this.send("closeModal")},confirm:function(){var e=this.getWithDefault("confirmAction","confirm");this.send(e,this.get("model")),this.send("closeModal")},ok:function(){var e=this.get("okAction");s.isEmpty(e)||this.send(e,this.get("model")),this.send("closeModal")}}})}),define("hospitalrun/dialog/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <div class="progress">\n        <div class="progress-bar progress-bar-striped active" role="progressbar" '),t.buffer.push(u(a["bind-attr"].call(e,{hash:{"aria-valuenow":"progressBarValue"},hashTypes:{"aria-valuenow":"STRING"},hashContexts:{"aria-valuenow":e},contexts:[],types:[],data:t}))),t.buffer.push('\n             aria-valuemin="0" aria-valuemax="100" '),t.buffer.push(u(a["bind-attr"].call(e,{hash:{style:"progressBarStyle"},hashTypes:{style:"STRING"},hashContexts:{style:e},contexts:[],types:[],data:t}))),t.buffer.push('>\n            <span class="sr-only">'),s=a._triageMustache.call(e,"progressBarValue",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("% Complete</span>\n        </div>\n    </div>\n"),n
}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l="",u=this.escapeExpression,h=this;return o=a["if"].call(t,"showProgress",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("\n"),o=a._triageMustache.call(t,"message",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),l})}),define("hospitalrun/dialog/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/finishgauth/route",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Route.extend({oauth_config_keys:["consumer_key","consumer_secret","oauth_token","token_secret"],_get_oauth_configs:function(){return new s.RSVP.Promise(function(e,t){var a=this.get("oauth_config_keys");this.store.find("config",{exactKeys:a}).then(function(t){s.run(null,e,t)},function(e){s.run(null,t,e)})}.bind(this))},_save_oauth_config:function(e){this._get_oauth_configs().then(function(t){var s=this.get("oauth_config_keys");s.forEach(function(s){var a,n;switch(s){case"consumer_key":n=e.k;break;case"consumer_secret":n=e.s1;break;case"oauth_token":n=e.t;break;case"token_secret":n=e.s2}a=t.findBy("id",s),a?a.set("value",n):a=this.store.createRecord("config",{id:s,value:n}),a.save()}.bind(this))}.bind(this))},model:function(e){e.k&&e.s1&&e.s2&&e.t&&(this.get("session").authenticate("authenticators:custom",{google_auth:!0,params:e}),this._save_oauth_config(e),this.controllerFor("pouchdb").setupMainDB({config_consumer_key:e.k,config_consumer_secret:e.s1,config_oauth_token:e.t,config_token_secret:e.s2,config_use_google_auth:!0}))}})}),define("hospitalrun/helpers/date-format",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.makeBoundHelper(function(e,t){if(!s.isEmpty(e)){var a="l";return t&&t.hash.format&&(a=t.hash.format),moment(e).format(a)}})}),define("hospitalrun/helpers/number-format",["ember","hospitalrun/mixins/number-format","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"],r=a.Object.extend(n);s["default"]=a.Handlebars.makeBoundHelper(function(e){var t=new r;return t._numberFormat(e)})}),define("hospitalrun/imaging/charge/controller",["hospitalrun/procedures/charge/controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:["imaging/edit"],cancelAction:"closeModal",newPricingItem:!1,requestingController:n.computed.alias("controllers.imaging/edit"),pricingList:n.computed.alias("controllers.imaging/edit.chargesPricingList")})}),define("hospitalrun/procedures/charge/controller",["hospitalrun/controllers/abstract-edit-controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:["procedures/edit"],cancelAction:"closeModal",newPricingItem:!1,requestingController:n.computed.alias("controllers.procedures/edit"),pricingList:n.computed.alias("controllers.procedures/edit.pricingList"),updateCapability:"add_charge",itemChanged:function(){var e=this.get("selectedItem");n.isEmpty(e)||this.store.find("pricing",e._id.substr(8)).then(function(e){this.set("pricingItem",e)}.bind(this))}.observes("selectedItem"),pricingItemChanged:function(){var e=this.get("itemName"),t=this.get("pricingItem");n.isEmpty(t)?this.set("newPricingItem",!0):(this.set("newPricingItem",!1),t.get("name")!==e&&this.set("itemName",t.get("name")))}.observes("pricingItem"),title:function(){var e=this.get("isNew");return e?"Add Charge Item":"Edit Charge Item"}.property("isNew"),beforeUpdate:function(){var e=this.get("isNew");return e&&this.set("newCharge",!0),this.get("newPricingItem")?new n.RSVP.Promise(function(e,t){var s=this.store.createRecord("pricing",{name:this.get("itemName"),category:this.get("pricingCategory")});s.save().then(function(){this.get("pricingList").addObject({_id:"pricing_"+s.get("id"),name:s.get("name")}),this.set("pricingItem",s),e()}.bind(this),t)}.bind(this)):n.RSVP.Promise.resolve()},afterUpdate:function(e){this.get("newCharge")?this.get("requestingController").send("addCharge",e):this.send("closeModal")}})}),define("hospitalrun/imaging/charge/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o,l=a.helperMissing,u=this.escapeExpression;r.buffer.push(u((i=a.partial||t&&t.partial,o={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},i?i.call(t,"procedures/charge",o):l.call(t,"partial","procedures/charge",o))))})}),define("hospitalrun/imaging/charge/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/imaging/completed/controller",["hospitalrun/controllers/abstract-paged-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({startKey:[],showActions:!1})}),define("hospitalrun/imaging/completed/route",["hospitalrun/imaging/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({pageTitle:"Completed Imaging",searchStatus:"Completed"})}),define("hospitalrun/imaging/index/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"imaging",pageTitle:"Imaging Requests",searchStatus:"Requested",_getStartKeyFromItem:function(e){var t=e.get("imagingDateAsTime"),s=this.get("keyPrefix"),a=e.get("requestedDateAsTime"),n=this.get("searchStatus");return[n,a,t,s+e.get("id")]},_modelQueryParams:function(){var e=this.get("keyPrefix"),t=this.get("maxValue"),s=this.get("searchStatus");return{options:{startkey:[s,null,null,e],endkey:[s,t,t,e+t]},mapReduce:"imaging_by_status"}},actions:{completeItem:function(e){e.set("isCompleting",!0),this.transitionTo("imaging.edit",e)}}})}),define("hospitalrun/imaging/completed/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Date Requested</th>\n            <th>Date Completed</th>\n            <th>Patient</th>\n            <th>Imaging Type</th>\n            <th>Results</th>\n            <th>Notes</th>            \n        </tr>\n            '),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(2,o,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("        \n    </table>\n"),n}function o(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr>\n                    <td>"),t.buffer.push(p((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):h.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                    <td>"),t.buffer.push(p((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"imagingDate",r):h.call(e,"date-format","imagingDate",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"imagingType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"result",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                </tr>\n            "),i}function l(e,t){t.buffer.push('\n    <div class="alert alert-info">\n        <em>No completed items found.</em>\n    </div>\n')}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h=a.helperMissing,p=this.escapeExpression,c=this;u=a["if"].call(t,"model",{hash:{},hashTypes:{},hashContexts:{},inverse:c.program(4,l,r),fn:c.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(u||0===u?u:"")})}),define("hospitalrun/imaging/completed/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/imaging/delete/controller",["hospitalrun/controllers/abstract-delete-controller","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{title:"Delete Request",actions:{"delete":function(){this.removeChildFromVisit(this.get("model"),"imaging").then(function(){this.get("model").destroyRecord().then(function(){this.send("closeModal")}.bind(this))}.bind(this))}}})}),define("hospitalrun/imaging/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete this imaging request?\n</div>')})}),define("hospitalrun/imaging/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/imaging/edit/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/charge-actions","ember","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{needs:["imaging","pouchdb"],chargePricingCategory:"Imaging",chargeRoute:"imaging.charge",canComplete:function(){return this.currentUserCan("complete_imaging")}.property(),actions:{completeImaging:function(){this.set("status","Completed"),this.get("model").validate(),this.get("isValid")&&(this.set("imagingDate",new Date),this.send("update"))}},additionalButtons:function(){var e=this.get("canComplete"),t=this.get("isValid");return t&&e?[{buttonAction:"completeImaging",buttonIcon:"glyphicon glyphicon-ok","class":"btn btn-primary on-white",buttonText:"Complete"}]:void 0}.property("canComplete","isValid"),pricingTypeForObjectType:"Imaging Procedure",pricingTypes:o.computed.alias("controllers.imaging.imagingPricingTypes"),pricingList:null,imagingTypeChanged:function(){this.objectTypeChanged("imagingTypeName","imagingType")}.observes("imagingType"),imagingTypeNameChanged:function(){this.objectTypeNameChanged("imagingTypeName","selectedImagingType")}.observes("imagingTypeName"),showCharges:function(){var e=this.get("imagingType"),t=this.get("patient"),s=this.get("visit");return!o.isEmpty(e)&&!o.isEmpty(t)&&!o.isEmpty(s)}.property("imagingType","patient","visit"),updateCapability:"add_imaging",selectedImagingTypeChanged:function(){this.selectedObjectTypeChanged("selectedImagingType","imagingType")}.observes("selectedImagingType"),afterUpdate:function(){var e,t;"Completed"===this.get("status")?(e="Imaging Request Completed",t="The imaging request has been completed."):(e="Imaging Request Saved",t="The imaging request has been saved."),this.saveVisitIfNeeded(e,t)},beforeUpdate:function(){return this.get("isValid")?new o.RSVP.Promise(function(e,t){this.updateCharges().then(function(){if(this.get("isNew")){var s=this.get("model");if(this.set("status","Requested"),this.set("requestedBy",s.getUserName()),this.set("requestedDate",new Date),!this.get("newObjectType"))return this.addChildToVisit(s,"imaging","Imaging").then(e,t);this.saveNewPricing(this.get("imagingTypeName"),"Imaging","imagingType").then(function(){this.addChildToVisit(s,"imaging","Imaging").then(e,t)}.bind(this),t)}else e()}.bind(this),t)}.bind(this),"beforeUpdate on imaging edit"):o.RSVP.reject()}})}),define("hospitalrun/mixins/charge-actions",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({_createNewChargeRecord:function(e,t){return new s.RSVP.Promise(function(s,a){this.store.find("pricing",t.substr(8)).then(function(t){var n=this.store.createRecord("proc-charge",{dateCharged:new Date,quantity:e,pricingItem:t});n.save().then(function(e){var t=this.get("charges");t.addObject(e),s()}.bind(this),a)}.bind(this),a)}.bind(this),"_createNewChargeRecord with pricingId:"+t)},actions:{addCharge:function(e){var t=this.get("charges");t.addObject(e),this.send("update",!0),this.send("closeModal")},deleteCharge:function(e){var t=e.get("chargeToDelete"),s=this.get("charges");s.removeObject(t),t.destroyRecord(),this.send("update",!0),this.send("closeModal")},showAddCharge:function(){var e=this.get("store").createRecord("proc-charge",{dateCharged:new Date,quantity:1,pricingCategory:this.get("chargePricingCategory")});this.send("openModal",this.get("chargeRoute"),e)},showEditCharge:function(e){e.set("pricingCategory",this.get("chargePricingCategory")),this.send("openModal",this.get("chargeRoute"),e)},showDeleteCharge:function(e){this.send("openModal","dialog",s.Object.create({confirmAction:"deleteCharge",title:"Delete Charge Item",message:"Are you sure you want to delete this charged item?",chargeToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))}},canAddCharge:function(){return this.currentUserCan("add_charge")}.property(),chargesPricingList:function(){var e=this.get("pricingList"),t=this.get("pricingTypeForObjectType");return e.filter(function(e){return e.type!==t})}.property("pricingList","pricingTypeForObjectType"),chargeRoute:null,findChargeForPricingItem:function(e){var t=this.get("charges"),s=t.find(function(t){var s=t.get("pricingItem.id");return e._id.substr(8)===s});return s},newObjectType:!1,objectTypeChanged:function(e,t){var a=this.get("isNew"),n=this.get(e),r=this.get(t);a&&(n instanceof Object?this.set("newObjectType",!1):s.isEmpty(r)?this.set("newObjectType",!0):(this.set("newObjectType",!1),r.get("name")!==n&&this.set(e,r.get("name"))))},objectTypeList:function(){var e=this.get("pricingList"),t=this.get("pricingTypeForObjectType"),a=this.get("userCanAddPricingTypes"),n=s.Object.create({value:[],userCanAdd:a});return s.isEmpty(e)||n.set("value",e.filterBy("type",t)),n}.property("pricingList","pricingTypeForObjectType","pricingTypeValues"),objectTypeNameChanged:function(e,t){var s=this.get("isNew"),a=this.get(e);s&&a instanceof Object&&this.set(t,a)},organizeByType:s.computed.alias("pricingTypes.organizeByType"),pricingTypeList:function(){var e=this.get("pricingTypeValues"),t=this.get("pricingTypeForObjectType");return e=e.filter(function(e){return e!==t}),e=e.sortBy("name")}.property("pricingTypeValues","pricingTypeForObjectType"),pricingTypeValues:s.computed.alias("pricingTypes.value"),saveNewPricing:function(e,t,a){return new s.RSVP.Promise(function(s,n){var r,i=this.get("pricingTypeForObjectType");r=this.store.createRecord("pricing",{name:e,category:t,type:i}),r.save().then(function(){this.get("pricingList").addObject({_id:"pricing_"+r.get("id"),name:r.get("name")}),this.set(a,r),s()}.bind(this),n)}.bind(this),"saveNewPricing for: "+e)},selectedObjectTypeChanged:function(e,t){var a=this.get("isNew"),n=this.get(e);a&&(s.isEmpty(n)?this.set(t):this.store.find("pricing",n._id.substr(8)).then(function(e){this.set(t,e)}.bind(this)))},showAddCharge:function(){var e=this.get("canAddCharge"),t=this.get("organizeByType");return e?!t:!1}.property("canAddCharge","organizeByType"),showEditCharges:function(){var e=this.get("canAddCharge"),t=this.get("organizeByType");return e?t:!1}.property("canAddCharge","organizeByType"),showPricingTypeTabs:function(){var e=this.get("pricingTypeList");return!s.isEmpty(e)&&e.get("length")>1}.property("pricingTypeList"),userCanAddPricingTypes:s.computed.alias("pricingTypes.userCanAdd"),updateCharges:function(){var e=this.get("charges"),t=this.get("organizeByType"),a=this.get("pricingList");return t?new s.RSVP.Promise(function(t,n){var r=[];a.forEach(function(t){var a=this.findChargeForPricingItem(t),n=this.get(t._id);s.isEmpty(n)?a&&(e.removeObject(a),r.push(a.destroyRecord())):a?a.get("quantity")!==n&&(a.set("quantity",n),r.push(a.save())):r.push(this._createNewChargeRecord(n,t._id))}.bind(this)),s.RSVP.all(r,"Charges updated for current record:"+this.get("id")).then(t,n)}.bind(this),"updateCharges for current record:"+this.get("id")):s.RSVP.resolve()}})}),define("hospitalrun/imaging/edit/route",["hospitalrun/routes/abstract-edit-route","hospitalrun/mixins/charge-route","ember","hospitalrun/mixins/patient-list-route","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{editTitle:"Edit Imaging Request",modelName:"imaging",newTitle:"New Imaging Request",pricingCategory:"Imaging",getNewData:function(){return o.RSVP.resolve({selectPatient:!0,requestDate:moment().startOf("day").toDate()})}})}),define("hospitalrun/mixins/charge-route",["ember","hospitalrun/mixins/pouchdb","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Mixin.create(n,{actions:{deleteCharge:function(e){this.controller.send("deleteCharge",e)}},setupController:function(e,t){this._super(e,t);var s=this.get("maxValue"),a=this.get("pricingCategory"),n={startkey:[a,null,null,"pricing_"],endkey:[a,{},{},"pricing_"+s],include_docs:!0};this.controllerFor("pouchdb").queryMainDB(n,"pricing_by_category").then(function(t){var s=t.rows.map(function(e){return e.doc});e.set("pricingList",s)})}})}),define("hospitalrun/imaging/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="row">\n        '),s=a["if"].call(e,"selectPatient",{hash:{},hashTypes:{},hashContexts:{},inverse:x.program(4,l,t),fn:x.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:x.program(8,h,t),fn:x.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n    "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:x.program(12,c,t),fn:x.program(10,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),s=a["if"].call(e,"canComplete",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(14,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),t.buffer.push(v((n=a["em-text"]||e&&e["em-text"],r={hash:{property:"notes",label:"Notes",rows:3},hashTypes:{property:"STRING",label:"STRING",rows:"INTEGER"},hashContexts:{property:e,label:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):g.call(e,"em-text",r)))),t.buffer.push("\n    "),s=a["if"].call(e,"showCharges",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(16,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(v((s=a["patient-typeahead"]||e&&e["patient-typeahead"],n={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"col-xs-3 required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"patient-typeahead",n)))),t.buffer.push("\n        "),r}function l(e,t){var s,n="";return t.buffer.push('\n            <div class="form-group col-xs-3">\n                <label>Patient</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>\n        "),n}function u(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(v((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-xs-3 required",label:"Visit",property:"visit",content:"patientVisits",optionValuePath:"content",optionLabelPath:"content.visitDescription",prompt:"--Add New Visit--",selected:"visit"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"em-select",n)))),t.buffer.push("\n        "),r}function h(e,t){var s,n="";return t.buffer.push('        \n            <div class="form-group col-xs-3">\n                <label>Visit</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"visit.visitDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>\n        "),n}function p(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(v((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"imagingTypeName",label:"Imaging Type",list:"objectTypeList",selection:"selectedImagingType",optionLabelPath:"content.name",typeAheadType:"pricing","class":"required",prompt:" "},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID",optionLabelPath:"STRING",typeAheadType:"STRING","class":"STRING",prompt:"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,optionLabelPath:e,typeAheadType:e,"class":e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"select-or-typeahead",n)))),t.buffer.push("\n    "),r}function c(e,t){var s,n="";return t.buffer.push('\n        <div class="form-group">\n            <label>Imaging Type</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"imagingType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n        </div>\n    "),n}function d(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(v((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"result",label:"Result"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"em-input",n)))),t.buffer.push("\n    "),r}function f(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(v((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"item-charges",n):g.call(e,"partial","item-charges",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var m,b,y,g=a.helperMissing,v=this.escapeExpression,x=this;b=a["em-form"]||t&&t["em-form"],y={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:x.noop,fn:x.program(1,i,r),contexts:[],types:[],data:r},m=b?b.call(t,y):g.call(t,"em-form",y),r.buffer.push(m||0===m?m:"")})}),define("hospitalrun/imaging/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/imaging/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{startKey:[],addPermission:"add_imaging"})}),define("hospitalrun/imaging/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Date Requested</th>\n            <th>Patient</th>\n            <th>Imaging Type</th>\n            <th>Notes</th>\n            '),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,u,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function u(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr "),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    <td>"),t.buffer.push(m((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):y.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"imagingType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                     "),s=a["if"].call(e,"parentController.showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),i}function h(e,t){var s,n="";return t.buffer.push("\n                        <td>\n                            "),s=a["if"].call(e,"parentController.canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(7,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </td>\n                    "),n}function p(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default neutral" '),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                            "),s}function c(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No items found.</em>\n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(10,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function d(e,t){var s="";return t.buffer.push('\n            <em>Create a new record?</em>\n            <button class="btn btn-primary" '),t.buffer.push(m(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Imaging</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m=this.escapeExpression,b=this,y=a.helperMissing;f=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(9,c,r),fn:b.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(f||0===f?f:"")})}),define("hospitalrun/imaging/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/imaging/item-controller/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({actions:{editImaging:function(e){this.get("canEdit")&&this.parentController.send("editImaging",e)}},canEdit:function(){var e=this.get("status");return"Requested"===e}.property("status")})}),define("hospitalrun/imaging/route",["hospitalrun/routes/abstract-module-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addCapability:"add_imaging",additionalModels:[{name:"imagingPricingTypes",findArgs:["lookup","imaging_pricing_types"]}],allowSearch:!1,moduleName:"imaging",newButtonText:"+ new imaging",sectionTitle:"Imaging",subActions:[{text:"Requests",linkTo:"imaging.index"},{text:"Completed",linkTo:"imaging.completed"}]})}),define("hospitalrun/initializers/authentication",["hospitalrun/utils/custom-auth","hospitalrun/utils/couch-serializer","ember","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]={name:"authentication",initialize:function(e,t){e.register("authenticators:custom",n),t.register("serializer:couchdb",r),i.SimpleAuth.setup(e,t),e.injection("adapter","session","ember-simple-auth:session:current")}}}),define("hospitalrun/utils/custom-auth",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.SimpleAuth.Authenticators.Base.extend({serverEndpoint:"/db/_session",useGoogleAuth:!1,_absolutizeExpirationTime:function(e){return s.isEmpty(e)?void 0:new Date((new Date).getTime()+1e3*(e-5)).getTime()},_checkUser:function(e,t,a){this._makeRequest("POST",{name:e.name},"/chkuser").then(function(n){s.run(function(){n.error&&a(n),e.displayName=n.displayName,e.role=n.role,e.prefix=n.prefix,t(e)})},function(){s.run(function(){t(e)})})},_getPromise:function(e,t){return new s.RSVP.Promise(function(a,n){this._makeRequest(e,t).then(function(e){s.run(function(){a(e)})},function(e){s.run(function(){n(e.responseJSON||e.responseText)})})}.bind(this))},_makeRequest:function(e,t,a){return a||(a=this.serverEndpoint),s.$.ajax({url:a,type:e,data:t,dataType:"json",contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0}})},authenticate:function(e){if(e.google_auth){this.useGoogleAuth=!0;var t={google_auth:!0,consumer_key:e.params.k,consumer_secret:e.params.s1,token:e.params.t,token_secret:e.params.s2,name:e.params.i};return new s.RSVP.Promise(function(e,s){this._checkUser(t,e,s)}.bind(this))}return new s.RSVP.Promise(function(t,a){var n={name:e.identification,password:e.password};this._makeRequest("POST",n).then(function(e){s.run(function(){e.name=n.name,e.expires_at=this._absolutizeExpirationTime(600),this._checkUser(e,function(e){var s=this.get("pouchDBController");s.setupMainDB({}).then(function(){t(e)},a)}.bind(this),a)}.bind(this))}.bind(this),function(e){s.run(function(){a(e.responseJSON||e.responseText)}.bind(this))}.bind(this))}.bind(this))},invalidate:function(){return this.useGoogleAuth?new s.RSVP.resolve:this._getPromise("DELETE")},restore:function(e){return new s.RSVP.Promise(function(t,a){var n=(new Date).getTime();!s.isEmpty(e.expires_at)&&e.expires_at<n?a():(e.google_auth&&(this.useGoogleAuth=!0),this._checkUser(e,t,a))}.bind(this))}})}),define("hospitalrun/utils/couch-serializer",["exports"],function(e){"use strict";var t=DS.RESTSerializer.extend({extractArray:function(e,t,s){var a=this,n=s.rows.map(function(e){return a.normalizeRow(e.doc)});return n},extractSave:function(e,t,s){if(s.ok){var a=e.getById("user",s.id),n={};return this.serializeIntoHash(n,t,a,{includeId:!0}),n.user.rev=s.rev,n.user
}return null},extractSingle:function(e,t,s){return this.normalizeRow(s)},normalizeRow:function(e){return e.id=e._id,e.rev=e._rev,e}});e["default"]=t}),define("hospitalrun/initializers/configdb",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]={after:"authentication",name:"configdb",initialize:function(e,t){function a(){return new s.RSVP.Promise(function(e,t){PouchDB.plugin(List),n=new PouchDB("config",function(a,n){if(a)s.run(null,t,a);else{var r=document.location.protocol+"//"+document.location.host+"/db/",i=r+"config";n.replicate.from(i,{complete:function(){s.run(null,e,{success:!0})}},function(t){s.run(null,e,{error:t,success:!1})})}})})}var n;t.deferReadiness(),a().then(function(){t.register("couchdb:configdb",n,{instantiate:!1}),t.inject("controller:pouchdb","configDB","couchdb:configdb");var s=e.lookup("authenticators:custom"),a=e.lookup("controller:pouchdb"),r=e.lookup("adapter:application");s.set("pouchDBController",a),a.set("applicationAdapter",r);var i={include_docs:!0,keys:["config_consumer_key","config_consumer_secret","config_oauth_token","config_token_secret","config_use_google_auth"]};n.allDocs(i,function(e,s){if(e)throw console.log("Could not get configDB configs:",e),e;for(var n={},r=0;r<s.rows.length;r++)s.rows[r].error||(n[s.rows[r].id]=s.rows[r].doc.value);a.setupMainDB(n).then(function(){t.advanceReadiness()},function(){t.advanceReadiness()})}.bind(this))})}}}),define("hospitalrun/initializers/export-application-global",["ember","hospitalrun/config/environment","exports"],function(e,t,s){"use strict";function a(e,t){var s=n.String.classify(r.modulePrefix);r.exportApplicationGlobal&&(window[s]=t)}var n=e["default"],r=t["default"];s.initialize=a,s["default"]={name:"export-application-global",initialize:a}}),define("hospitalrun/initializers/linkto-data-attrs",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]={name:"linkto-data-attr",initialize:function(){s.LinkView.reopen({init:function(){this._super();var e=this;s.keys(this).forEach(function(t){"data-"===t.substr(0,5)&&e.get("attributeBindings").pushObject(t)})}})}}}),define("hospitalrun/inventory/adjust/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/inventory-adjustment-types","ember","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(r,{needs:"inventory",expenseAccountList:i.computed.alias("controllers.inventory.expenseAccountList"),title:"Adjustment",transactionTypeChanged:function(){i.run.once(this,function(){this.get("model").validate()})}.observes("transactionType"),updateButtonText:function(){return this.get("transactionType")}.property("transactionType"),updateButtonAction:"adjust",updateCapability:"adjust_inventory_location",actions:{cancel:function(){this.send("closeModal")},adjust:function(){this.send("adjustItems",this.get("model"),!0)}}})}),define("hospitalrun/mixins/inventory-adjustment-types",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({adjustmentTypes:[{name:"Add",type:"Adjustment (Add)"},{name:"Remove",type:"Adjustment (Remove)"},{name:"Return To Vendor",type:"Return To Vendor"},{name:"Return",type:"Return"},{name:"Write Off",type:"Write Off"}]})}),define("hospitalrun/inventory/adjust/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="form-group">\n        <label class="control-label">Item</label>\n        <p class="form-control-static">'),s=a._triageMustache.call(e,"adjustmentItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>        \n    </div>\n    <div class="form-group">\n        <label class="control-label">Adjustment For</label>\n        <p class="form-control-static">'),s=a._triageMustache.call(e,"locationName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>        \n    </div>\n    <div class="form-group">\n        <label class="control-label">Current Quantity</label>\n        <p class="form-control-static">'),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>\n    </div>\n    <div class="row">\n        '),t.buffer.push(p((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-sm-4",label:"Adjustment Type",property:"transactionType",content:"adjustmentTypes",optionValuePath:"content.type",optionLabelPath:"content.name"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"em-select",r)))),t.buffer.push("\n        "),t.buffer.push(p((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"adjustmentQuantity",label:"Quantity","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"em-input",r)))),t.buffer.push("\n    </div>\n    "),t.buffer.push(p((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Reason",property:"reason",rows:3},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:e,property:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"em-text",r)))),t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(p((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"dateCompleted",label:"Adjustment Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"date-picker",r)))),t.buffer.push("\n        "),t.buffer.push(p((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"expenseAccount",label:"Expense Account",list:"expenseAccountList",selection:"expenseAccount","class":"col-sm-8"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    </div>\n"),i}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/inventory/adjust/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/barcode/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({barcodeUri:function(){var e=this.get("id"),t=this.get("name");return s.$(document).JsBarcode(e,{width:1,height:20,fontSize:10,displayValue:t,returnUri:!0})}.property("id","name"),printers:function(){return dymo.label.framework.getTapePrinters()}.property(),havePrinters:function(){var e=this.get("printers");return e.length>0?!0:!1}.property("printers"),singlePrinter:function(){var e=this.get("printers");return 1===e.length?!0:!1}.property("printers"),actions:{print:function(){var e=this.get("barcodeUri"),t=this.get("selectedPrinter");t||(t=this.get("printers")[0].name),s.$.get("/dymo/BarcodeAsImage.label",function(s){var a=dymo.label.framework.openLabelXml(s),n=e.substr("data:image/png;base64,".length);a.setObjectText("Image",n),a.print(t)},"text")}}})}),define("hospitalrun/inventory/barcode/route",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Route.extend({model:function(e){return this.store.find("inventory",e.inventory_id)}})}),define("hospitalrun/inventory/barcode/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n<div class="panel panel-primary">\n    <div class="panel-heading">\n        <h3 class="panel-title">Print Barcode</h3>\n    </div>    \n    <div class="panel-body">\n        <div class="form-group">            \n            '),s=a.unless.call(e,"singlePrinter",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n        </div>\n        <button class="btn btn-primary" '),t.buffer.push(h(a.action.call(e,"print",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class=" glyphicon glyphicon-print"></span> Print</button>\n    </div>\n</div>\n'),n}function o(e,t){var s="";return t.buffer.push('    \n                <label for="printerSelect">Printer</label>\n                '),t.buffer.push(h(a.view.call(e,"Ember.Select",{hash:{viewName:"select",content:"printers",optionLabelPath:"content.name",optionValuePath:"content.name",value:"selectedPrinter",id:"printerSelect"},hashTypes:{viewName:"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING",value:"ID",id:"STRING"},hashContexts:{viewName:e,content:e,optionLabelPath:e,optionValuePath:e,value:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\n            "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u="",h=this.escapeExpression,p=this;return r.buffer.push('<div class="panel panel-default">\n  <div class="panel-body">\n    <img '),r.buffer.push(h(a["bind-attr"].call(t,{hash:{src:"barcodeUri"},hashTypes:{src:"ID"},hashContexts:{src:t},contexts:[],types:[],data:r}))),r.buffer.push("></img>\n  </div>\n</div>\n\n"),l=a["if"].call(t,"havePrinters",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,i,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n\n"),u})}),define("hospitalrun/inventory/batch/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/inventory-id","hospitalrun/mixins/inventory-locations","hospitalrun/mixins/inventory-selection","ember","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(o,l,u,{needs:["inventory","pouchdb"],warehouseList:h.computed.alias("controllers.inventory.warehouseList"),aisleLocationList:h.computed.alias("controllers.inventory.aisleLocationList"),vendorList:h.computed.alias("controllers.inventory.vendorList"),purchaseAttributes:["expirationDate","inventoryItem","lotNumber","purchaseCost","quantity","vendorItemNo"],inventoryList:function(){var e=this.get("inventoryItems");if(!h.isEmpty(e)){var t=e.map(function(e){return e.doc});return t}}.property("inventoryItems.[]"),lookupListsToUpdate:[{name:"aisleLocationList",property:"aisleLocation",id:"aisle_location_list"},{name:"vendorList",property:"vendor",id:"vendor_list"},{name:"warehouseList",property:"location",id:"warehouse_list"}],showDistributionUnit:function(){return this._haveValidInventoryItem()}.property("inventoryItemTypeAhead","inventoryItem"),showInvoiceItems:function(){var e=this.get("invoiceItems");return!h.isEmpty(e)}.property("invoiceItems.@each"),totalReceived:function(){var e=this.get("invoiceItems"),t=0;h.isEmpty("invoiceItems")||(t=e.reduce(function(e,t){return e+Number(t.get("purchaseCost"))},t));var s=this.get("purchaseCost");return this.get("isValid")&&!h.isEmpty(s)&&(t+=Number(s)),t}.property("invoiceItems@each.purchaseCost","isValid","purchaseCost"),updateButtonText:"Save",updateCapability:"add_inventory_item",_addNewInventoryItem:function(){this.generateId().then(function(e){var t=this.store.createRecord("inventory",{id:e,name:this.get("inventoryItemTypeAhead"),quantity:0,skipSavePurchase:!0});this.send("openModal","inventory.quick-add",t)}.bind(this))},_addInventoryItem:function(){var e=this.get("model"),t=this.get("inventoryItemTypeAhead"),s=this.get("purchaseCost"),a=this.get("quantity");if(e.validate(),this.get("isValid")&&!h.isEmpty(t)&&!h.isEmpty(a)&&!h.isEmpty(s)){if(!this._haveValidInventoryItem())return this._addNewInventoryItem(),!0;this._addInvoiceItem()}},_addInvoiceItem:function(){var e=this.get("invoiceItems"),t=this.getProperties(this.get("purchaseAttributes")),s=h.Object.create(t);e.addObject(s),this.set("expirationDate"),this.set("inventoryItem"),this.set("inventoryItemTypeAhead"),this.set("lotNumber"),this.set("purchaseCost"),this.set("quantity"),this.set("selectedInventoryItem"),this.set("vendorItemNo")},_findInventoryItem:function(e){var t=this.get("invoiceItems"),s=e.get("inventoryItem");if(!h.isEmpty(s)){s=s.substr(10);var a=t.find(function(e){return e.get("inventoryItem.id")===s},this);if(!h.isEmpty(a))return a.get("inventoryItem")}},_haveValidInventoryItem:function(){var e=this.get("inventoryItemTypeAhead"),t=this.get("inventoryItem");if(h.isEmpty(e)||h.isEmpty(t))return!1;var s=t.get("name"),a=e.substr(0,s.length);return a!==s?!1:!0},_savePurchases:function(){var e,t=this.getProperties(["dateReceived","vendor","invoiceNo","location","aisleLocation","giftInKind"]),s=this.get("invoiceItems"),a=[];s.forEach(function(s){var n=s.get("inventoryItem"),r=s.get("quantity");e=this.store.createRecord("inv-purchase",t),e.setProperties(s.getProperties(this.get("purchaseAttributes"))),e.setProperties({distributionUnit:n.get("distributionUnit"),currentQuantity:r,originalQuantity:r,inventoryItem:"inventory_"+n.get("id")}),a.push(e.save())}.bind(this)),h.RSVP.all(a).then(function(e){var t=[];e.forEach(function(e){var s=this._findInventoryItem(e),a=s.get("purchases");a.addObject(e),this.newPurchaseAdded(s,e),s.updateQuantity(),t.push(s.save())}.bind(this)),h.RSVP.all(t).then(function(){this.updateLookupLists(),this.displayAlert("Inventory Purchases Saved","The inventory purchases have been successfully saved","allItems")}.bind(this))}.bind(this))},actions:{addInventoryItem:function(){this._addInventoryItem()},addedNewInventoryItem:function(e){this.set("inventoryItem",e),this._addInvoiceItem(),this.send("closeModal"),this.get("doingUpdate")&&this._savePurchases()},removeItem:function(e){var t=this.get("invoiceItems"),s=e.itemToRemove;t.removeObject(s),this.send("closeModal")},showRemoveItem:function(e){var t="Are you sure you want to remove this item from this invoice?",s=h.Object.create({itemToRemove:e}),a="Remove Item";this.displayConfirm(a,t,"removeItem",s)},update:function(){this.set("doingUpdate",!0);var e=this._addInventoryItem();e||this._savePurchases()}}})}),define("hospitalrun/mixins/inventory-id",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({generateId:function(){var e=1,t=999,a=(new Date).getTime(),n=Math.floor(Math.random()*(t-e+1))+e;return s.RSVP.resolve(a.toString(36)+"_"+n.toString(36))}})}),define("hospitalrun/mixins/inventory-locations",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({aisleToFind:null,locationToFind:null,_addQuantityToLocation:function(e,t,s,a){var n=this._findOrCreateLocation(e,s,a);n.incrementProperty("quantity",t),n.save()},_findOrCreateLocation:function(e,t,s){var a=!1,n=e.get("locations");if(this.set("aisleToFind",s),this.set("locationToFind",t),a=n.find(this.findLocation,this))return a;var r=this.get("store").createRecord("inv-location",{aisleLocation:s,location:t,quantity:0});return n.addObject(r),r},findLocation:function(e){var t=e.get("aisleLocation"),a=this.get("aisleToFind"),n=e.get("location"),r=this.get("locationToFind");return(s.isEmpty(t)&&s.isEmpty(a)||t===a)&&(s.isEmpty(n)&&s.isEmpty(r)||n===r)?!0:void 0},newPurchaseAdded:function(e,t){var s=t.get("aisleLocation"),a=t.get("location"),n=parseInt(t.get("originalQuantity"));this._addQuantityToLocation(e,n,a,s)},saveLocation:function(e,t){if(0===e.get("quantity")){var s=t.get("locations");return s.removeObject(e),e.destroyRecord()}return e.save()},transferToLocation:function(e,t){var s=t.get("transferAisleLocation"),a=t.get("transferLocation"),n=parseInt(t.get("adjustmentQuantity"));this._addQuantityToLocation(e,n,a,s),t.decrementProperty("quantity",n),t.save()}})}),define("hospitalrun/mixins/inventory-selection",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({inventoryItemChanged:function(){var e=this.get("selectedInventoryItem");s.isEmpty(e)||(e.id=e._id.substr(10),this.store.find("inventory",e._id.substr(10)).then(function(e){e.reload().then(function(){this.set("inventoryItem",e),s.run.once(this,function(){this.get("model").validate()})}.bind(this),function(e){console.log("ERROR reloading inventory item",e)})}.bind(this)))}.observes("selectedInventoryItem")})}),define("hospitalrun/inventory/batch/route",["hospitalrun/inventory/request/route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({editTitle:"Inventory Received",modelName:"inventory-batch",newTitle:"Inventory Received",getNewData:function(){return n.RSVP.resolve({invoiceItems:[],dateReceived:new Date})},actions:{addedNewInventoryItem:function(e){this.controller.send("addedNewInventoryItem",e)}}})}),define("hospitalrun/inventory/request/route",["hospitalrun/routes/abstract-edit-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({editTitle:"Edit Request",modelName:"inv-request",newTitle:"New Request",getNewData:function(){return n.RSVP.resolve({transactionType:"Request"})},actions:{removeItem:function(e){this.controller.send("removeItem",e)}},setupController:function(e,t){this._super(e,t);var s={startkey:"inventory_",endkey:"inventory_￿",include_docs:!0};this.controllerFor("pouchdb").queryMainDB(s).then(function(t){e.set("inventoryItems",t.rows)})}})}),define("hospitalrun/inventory/batch/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n<div class="row">\n    '),t.buffer.push(f((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"dateReceived",label:"Date Received","class":"col-sm-4 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"date-picker",r)))),t.buffer.push("\n    "),t.buffer.push(f((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"vendor",label:"Vendor",list:"vendorList",selection:"vendor","class":"col-sm-4 required"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    "),t.buffer.push(f((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"invoiceNo",label:"Invoice Number","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-input",r)))),t.buffer.push('\n</div>\n<div class="row">    \n    '),t.buffer.push(f((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"location",label:"Location",list:"warehouseList",selection:"location","class":"col-sm-5"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    "),t.buffer.push(f((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"aisleLocation",label:"Aisle Location",list:"aisleLocationList",selection:"aisleLocation","class":"col-sm-5"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    <div class="form-group col-sm-2">\n        <label class="control-label">Gift In Kind</label>\n        '),t.buffer.push(f((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"Gift In Kind",property:"giftInKind"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-checkbox",r)))),t.buffer.push('\n    </div>\n</div>\n<div class="panel panel-primary">\n    <div class="panel-heading">\n        <h3 class="panel-title">Invoice Line Item</h3>\n    </div>\n    <div class="panel-body">\n        <div class="row">\n            '),t.buffer.push(f((n=a["inventory-typeahead"]||e&&e["inventory-typeahead"],r={hash:{"class":"col-sm-7 required",property:"inventoryItemTypeAhead",label:"Inventory Item",content:"inventoryList",selection:"selectedInventoryItem",showQuantity:!1},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",content:"ID",selection:"ID",showQuantity:"BOOLEAN"},hashContexts:{"class":e,property:e,label:e,content:e,selection:e,showQuantity:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"inventory-typeahead",r)))),t.buffer.push("\n            "),t.buffer.push(f((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"quantity",label:"Quantity","class":"col-sm-2 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-input",r)))),t.buffer.push('    \n             <div class="form-group col-sm-1">\n                <label class="control-label">Unit</label>\n                '),s=a["if"].call(e,"showDistributionUnit",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                 \n            </div>\n            "),t.buffer.push(f((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"purchaseCost",label:"Purchase Cost","class":"col-sm-2 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-input",r)))),t.buffer.push('\n        </div>\n        <div class="row">\n            '),t.buffer.push(f((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"vendorItemNo",label:"Vendor Item Number","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-input",r)))),t.buffer.push("\n            "),t.buffer.push(f((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"lotNumber",label:"Serial/Lot Number","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-input",r)))),t.buffer.push("\n            "),t.buffer.push(f((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"expirationDate",label:"Expiration Date",minDate:"now","class":"col-sm-2"},hashTypes:{property:"STRING",label:"STRING",minDate:"STRING","class":"STRING"},hashContexts:{property:e,label:e,minDate:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"date-picker",r)))),t.buffer.push('\n            <div class="form-group col-sm-2">\n                <label class="control-label">&nbsp;</label>\n                <p class="form-control-static">\n                    <button class="btn btn-primary" '),t.buffer.push(f(a.action.call(e,"addInventoryItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('>\n                        <span class="octicon octicon-plus"></span> Add\n                    </button>\n                </p>\n            </div>\n        </div>\n    </div>\n</div>\n'),s=a["if"].call(e,"invoiceItems",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        \n"),i}function o(e,t){var s,n="";return t.buffer.push('\n                    <p class="form-control-static">'),s=a._triageMustache.call(e,"inventoryItem.distributionUnit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n                "),n}function l(e,t){var s,n="";return t.buffer.push('\n    <h3>Invoice Items</h3>\n    <table class="table">\n        <tr class="table-header">\n            <th>Name</th>\n            <th>Quantity</th>\n            <th>Cost</th>\n            <th>Item Number</th>\n            <th>Serial/Lot Number</th>        \n            <th>Expiration Date</th>\n            <th>Action</th>\n        </tr>\n        '),s=a.each.call(e,"invoiceItems",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n    <h4>Total Received: "),s=a._triageMustache.call(e,"totalReceived",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</h4>\n"),n}function u(e,t){var s,n,r,i="";return t.buffer.push('\n            <tr>\n                <td class="col-sm-2">\n                    '),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                </td>\n                <td class="col-sm-2">\n                     <div class="input-group">\n                        '),t.buffer.push(f((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"quantity"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"input",r)))),t.buffer.push('\n                        <span class="input-group-addon">\n                        '),s=a._triageMustache.call(e,"inventoryItem.distributionUnit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                         </span>\n                    </div>\n                </td>\n                <td class="col-sm-2">\n                    <div class="form-group">\n                        '),t.buffer.push(f((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"purchaseCost"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"input",r)))),t.buffer.push('\n                    </div>\n                </td>\n                <td class="col-sm-2">\n                    <div class="form-group">\n                        '),t.buffer.push(f((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"vendorItemNo"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"input",r)))),t.buffer.push('\n                    </div>\n                </td>\n                <td class="col-sm-2">\n                    <div class="form-group">\n                        '),t.buffer.push(f((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"lotNumber"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"input",r)))),t.buffer.push('\n                    </div>\n                </td>                \n                <td class="col-sm-2">\n                    '),t.buffer.push(f((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"expirationDate",minDate:"now",model:""},hashTypes:{property:"STRING",minDate:"STRING",model:"ID"},hashContexts:{property:e,minDate:e,model:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"date-picker",r)))),t.buffer.push('\n                </td>\n                <td class="col-sm-1">\n                    <button class="btn btn-default warning" '),t.buffer.push(f(a.action.call(e,"showRemoveItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                        <span class="octicon octicon-x"></span>Remove\n                    </button>\n                </td>\n            </tr>\n        '),i}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p,c,d=a.helperMissing,f=this.escapeExpression,m=this;p=a["em-form"]||t&&t["em-form"],c={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:m.noop,fn:m.program(1,i,r),contexts:[],types:[],data:r},h=p?p.call(t,c):d.call(t,"em-form",c),r.buffer.push(h||0===h?h:"")})}),define("hospitalrun/inventory/batch/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/completed-items/controller",["hospitalrun/mixins/inventory-adjustment-types","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=n.ObjectController.extend(a,{deliveryDetails:function(){var e=this.get("deliveryLocationName"),t=this.get("patient");return n.isEmpty(t)?e:t.get("displayName")}.property("deliveryAisle","deliveryLocation","patient"),haveReason:function(){return!n.isEmpty(this.get("reason"))}.property("reason"),isAdjustment:function(){var e=this.get("adjustmentTypes"),t=this.get("transactionType"),s=e.findBy("type",t);return!n.isEmpty(s)}.property("transactionType"),isFulfillment:function(){return"Fulfillment"===this.get("transactionType")}.property("transactionType"),isTransfer:function(){return"Transfer"===this.get("transactionType")}.property("transactionType")})}),define("hospitalrun/inventory/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete Item"})}),define("hospitalrun/inventory/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete '),i=a._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("?\n</div>"),o})}),define("hospitalrun/inventory/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/inventory-locations","hospitalrun/mixins/inventory-type-list","hospitalrun/mixins/return-to","hospitalrun/mixins/unit-types","hospitalrun/mixins/user-session","exports"],function(e,t,s,a,n,r,i,o){"use strict";var l=e["default"],u=t["default"],h=s["default"],p=a["default"],c=n["default"],d=r["default"],f=i["default"];o["default"]=l.extend(h,p,c,d,f,{needs:["inventory","pouchdb"],canAddPurchase:function(){return this.currentUserCan("add_inventory_purchase")}.property(),canAdjustLocation:function(){return this.currentUserCan("adjust_inventory_location")},canDeletePurchase:function(){return this.currentUserCan("delete_inventory_purchase")}.property(),warehouseList:u.computed.alias("controllers.inventory.warehouseList"),aisleLocationList:u.computed.alias("controllers.inventory.aisleLocationList"),inventoryTypeList:u.computed.alias("controllers.inventory.inventoryTypeList.value"),vendorList:u.computed.alias("controllers.inventory.vendorList"),pouchdbController:u.computed.alias("controllers.pouchdb"),lookupListsToUpdate:[{name:"aisleLocationList",property:"aisleLocation",id:"aisle_location_list"},{name:"vendorList",property:"vendor",id:"vendor_list"},{name:"warehouseList",property:"location",id:"warehouse_list"}],canEditQuantity:function(){return this.get("isNew")
}.property("isNew"),haveTransactions:function(){var e=this.get("transactions");return null!==e}.property("transactions.@each"),locationQuantityTotal:function(){var e=this.get("locations"),t=e.reduce(function(e,t){return e+parseInt(t.get("quantity"))},0);return t}.property("locations"),quantityDiscrepency:function(){var e=this.get("locationQuantityTotal"),t=this.get("quantity");return!u.isEmpty(e)&&!u.isEmpty(t)&&e!==t}.property("locationQuantityTotal","quantity"),quantityDifferential:function(){var e=this.get("locationQuantityTotal"),t=this.get("quantity");return Math.abs(e-t)}.property("locationQuantityTotal","quantity"),originalQuantityUpdated:function(){var e=this.get("isNew"),t=this.get("originalQuantity");e&&!u.isEmpty(t)&&this.set("quantity",t)}.observes("originalQuantity"),showTransactions:function(){var e=this.get("transactions");return!u.isEmpty(e)}.property("transactions.@each"),transactions:null,updateCapability:"add_inventory_item",actions:{adjustItems:function(e){var t=parseInt(e.get("adjustmentQuantity")),s=this.get("model"),a=e.get("transactionType"),n=this.get("store").createRecord("inv-request",{adjustPurchases:!0,dateCompleted:e.get("dateCompleted"),expenseAccount:e.get("expenseAccount"),inventoryItem:s,quantity:t,transactionType:a,reason:e.get("reason"),deliveryAisle:e.get("aisleLocation"),deliveryLocation:e.get("location")});n.set("inventoryLocations",[e]);var r=!1;("Adjustment (Add)"===a||"Return"===a)&&(r=!0),n.set("markAsConsumed",!0),n.get("inventoryItem").then(function(){this.send("fulfillRequest",n,!0,r,!0)}.bind(this))},deletePurchase:function(e,t,s){var a=this.get("purchases"),n=e.get("currentQuantity");s?(e.set("expired",!0),e.save()):(a.removeObject(e),e.destroyRecord()),u.isEmpty(t)||(t.decrementProperty("quantity",n),t.save()),this.get("model").updateQuantity(),this.send("update",!0),this.send("closeModal")},showAdjustment:function(e){e.setProperties({dateCompleted:new Date,adjustmentItem:this.get("model"),adjustmentQuantity:"",reason:"",transferItem:null,transactionType:"Adjustment (Add)"}),this.send("openModal","inventory.adjust",e)},showDeletePurchase:function(e){this.send("openModal","inventory.purchase.delete",e)},showEditPurchase:function(e){this.send("openModal","inventory.purchase.edit",e)},showExpirePurchase:function(e){e.set("expire",!0),this.send("openModal","inventory.purchase.delete",e)},showTransfer:function(e){e.set("adjustmentQuantity"),e.set("transferItem",this.get("model")),e.set("dateCompleted",new Date),this.send("openModal","inventory.transfer",e)},transferItems:function(e){var t=this.get("model"),s=this.get("store").createRecord("inv-request",{adjustPurchases:!1,dateCompleted:e.get("dateCompleted"),inventoryItem:t,quantity:e.get("adjustmentQuantity"),deliveryAisle:e.get("transferAisleLocation"),deliveryLocation:e.get("transferLocation"),transactionType:"Transfer"});this.transferToLocation(t,e),e.setProperties({transferItem:null,transferLocation:null,transferAisleLocation:null,adjustmentQuantity:null}),s.set("locationsAffected",[{name:e.get("locationName"),quantity:s.get("quantity")}]),s.get("inventoryItem").then(function(){this._saveRequest(s)}.bind(this))},updatePurchase:function(e,t){t&&(this.get("model").updateQuantity(),this.send("update",!0)),this.send("closeModal")}},_completeBeforeUpdate:function(e,t,s){var a=null,n=e.get("prefix"),r=[],i=this.getProperties("aisleLocation","dateReceived","purchaseCost","lotNumber","expirationDate","giftInKind","location","vendor","vendorItemNo"),o=this.get("quantity");if(!u.isEmpty(o)){i.originalQuantity=o,i.currentQuantity=o,i.inventoryItem="inventory_"+this.get("model.id");var l=this.get("store").createRecord("inv-purchase",i);r.push(l.save()),this.get("purchases").addObject(l),this.newPurchaseAdded(this.get("model"),l)}e.incrementProperty("value",1),a=e.get("value"),n+=1e5>a?String("00000"+a).slice(-5):a,this.set("friendlyId",n),r.push(e.save()),u.RSVP.all(r,"All before update done for inventory item").then(function(){t()},function(e){s(e)})},_findSequence:function(e,t,s){var a=new u.RSVP.Promise(function(t){this._checkNextSequence(t,e,0)}.bind(this));a.then(function(a){var n=this.get("store").push("sequence",{id:"inventory_"+e,prefix:e.toLowerCase().substr(0,a),value:0});this._completeBeforeUpdate(n,t,s)}.bind(this))},_findSequenceByPrefix:function(e,t){var s=this.get("pouchdbController"),a={key:e.toLowerCase().substr(0,t)};return s.queryMainDB(a,"sequence_by_prefix")},_checkNextSequence:function(e,t,s){s++,this._findSequenceByPrefix(t,s).then(function(a){u.isEmpty(a.rows)?e(s):this._checkNextSequence(e,t,s)}.bind(this),function(){e(s)})},_saveRequest:function(e){e.set("status","Completed"),e.set("completedBy",e.getUserName()),e.save().then(function(){this.send("update",!0),this.send("closeModal"),this.getTransactions()}.bind(this))},getTransactions:function(){var e="inventory_"+this.get("id");this.set("transactions",null),this.store.find("inv-request",{options:{endkey:[e,"Completed",0],startkey:[e,"Completed",9999999999999],descending:!0},mapReduce:"inventory_request_by_item"}).then(function(e){this.set("transactions",e)}.bind(this))},beforeUpdate:function(){if(this.get("isNew")){var e=this.get("type");return new u.RSVP.Promise(function(t,s){this.store.find("sequence","inventory_"+e).then(function(e){this._completeBeforeUpdate(e,t,s)}.bind(this),function(){this._findSequence(e,t,s)}.bind(this))}.bind(this))}return u.RSVP.Promise.resolve()},afterUpdate:function(){this.displayAlert("Inventory Item Saved","The inventory item has been saved.")}})}),define("hospitalrun/inventory/edit/route",["hospitalrun/routes/abstract-edit-route","ember","hospitalrun/mixins/inventory-id","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{editTitle:"Edit Item",modelName:"inventory",newTitle:"New Item",actions:{adjustItems:function(e){this.controller.send("adjustItems",e)},doneFulfillRequest:function(){this.controller.getTransactions()},deletePurchase:function(e,t){this.controller.send("deletePurchase",e,t)},expirePurchase:function(e,t){this.controller.send("deletePurchase",e,t,!0)},transferItems:function(e){this.controller.send("transferItems",e)},updatePurchase:function(e,t){this.controller.send("updatePurchase",e,t)}},getNewData:function(){return r.RSVP.resolve({dateReceived:new Date})},setupController:function(e,t){this._super(e,t),e.getTransactions()}})}),define("hospitalrun/inventory/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),t.buffer.push(G((n=a.partial||e&&e.partial,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"inventory-basic",r):A.call(e,"partial","inventory-basic",r)))),t.buffer.push("\n    "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:L.program(4,l,t),fn:L.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),s=a.unless.call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(11,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n        <h3>Purchase information</h3>\n        "),t.buffer.push(G((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"inv-purchase",n):A.call(e,"partial","inv-purchase",n)))),t.buffer.push("\n    "),r}function l(e,t){var s,n="";return t.buffer.push("\n            "),s=a["if"].call(e,"quantityDiscrepency",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            <h3>\n                Purchases \n                "),s=a["if"].call(e,"canAddPurchase",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n            </h3>\n            <table class="table">\n                <tr class="table-header">\n                    <th>Date Received</th>\n                    <th>Purchase Cost</th>\n                    <th>Cost Per Unit</th>\n                    <th>Original Quantity</th>\n                    <th>Current Quantity</th>\n                    <th>Serial/Lot Number</th>\n                    <th>Expiration Date</th>\n                    <th>Vendor</th>\n                    <th>Invoice Number</th>\n                </tr>\n                '),s=a.each.call(e,"purchases",{hash:{itemController:"inventory/purchase/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:L.noop,fn:L.program(9,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </table>\n    "),n}function u(e,t){var s,n="";return t.buffer.push('\n                <div class="alert alert-danger alert-dismissible" role="alert">\n                    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n                    <p>\n                        <span class="glyphicon glyphicon-warning-sign"></span>\n                        The total quantity <strong>('),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(")</strong>, does not match the total quantity in the locations <strong>("),s=a._triageMustache.call(e,"locationQuantityTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(")</strong>.\n                    </p>\n                    <p>Please adjust the quantities on the appropriate location(s) to account for the difference of "),s=a._triageMustache.call(e,"quantityDifferential",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(".</p>\n                </div>\n            "),n}function h(e,t){var s="";return t.buffer.push('\n                    <button class="btn btn-primary align-right" '),t.buffer.push(G(a.action.call(e,"showAddPurchase","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> Add Purchase</button>\n                '),s}function p(e,t){var s,n,r,i="";return t.buffer.push("\n                    <tr "),t.buffer.push(G(a["bind-attr"].call(e,{hash:{"class":"rowClass"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(">\n                        <td>"),t.buffer.push(G((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"dateReceived",r):A.call(e,"date-format","dateReceived",r)))),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"purchaseCost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"costPerUnit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"originalQuantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"currentQuantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"lotNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>                \n                        <td>"),t.buffer.push(G((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"expirationDate",r):A.call(e,"date-format","expirationDate",r)))),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"vendor",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"invoiceNo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    </tr>\n                "),i}function c(e,t){var s,n="";return t.buffer.push('\n        <h3>Locations</h3>    \n        <table class="table">\n            <tr class="table-header">\n                <th>Location</th>\n                <th>Aisle Location</th>\n                <th>Quantity</th>\n                '),s=a["if"].call(e,"canAdjustLocation",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(12,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </tr>\n            "),s=a.each.call(e,"locations",{hash:{itemController:"inventory/location-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:L.noop,fn:L.program(14,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </table>\n        "),s=a["if"].call(e,"showTransactions",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(18,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),n}function d(e,t){t.buffer.push("\n                    <th>Action</th>\n                ")}function f(e,t){var s,n="";return t.buffer.push("\n                "),s=a["if"].call(e,"haveItems",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(15,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n}function m(e,t){var s,n="";return t.buffer.push("\n                    <tr>\n                        <td>"),s=a._triageMustache.call(e,"location",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"aisleLocation",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                        "),s=a["if"].call(e,"parentController.canAdjustLocation",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(16,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </tr>\n                "),n}function b(e,t){var s="";return t.buffer.push('\n                            <td>\n                                <button class="btn btn-primary neutral" '),t.buffer.push(G(a.action.call(e,"showAdjustment","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>Adjust</button>\n                                <button class="btn btn-primary neutral" '),t.buffer.push(G(a.action.call(e,"showTransfer","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Transfer</button>\n                            </td>\n                        "),s}function y(e,t){var s,n="";return t.buffer.push('\n            <h3>Transactions</h3>\n            <table class="table">\n                <tr class="table-header">\n                    <th>Date Completed</th>\n                    <th>Quantity</th>\n                    <th>Transaction</th>\n                    <th>Expense Account</th>\n                    <th>Details</th>\n                </tr>\n                '),s=a["if"].call(e,"haveTransactions",{hash:{},hashTypes:{},hashContexts:{},inverse:L.program(33,N,t),fn:L.program(19,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </table>\n        "),n}function g(e,t){var s,n="";return t.buffer.push("\n                    "),s=a.each.call(e,"transactions",{hash:{itemController:"inventory/completed-items"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:L.noop,fn:L.program(20,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),n}function v(e,t){var s,n,r,i="";return t.buffer.push("\n                        <tr>\n                            <td>"),t.buffer.push(G((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"dateCompleted",r):A.call(e,"date-format","dateCompleted",r)))),t.buffer.push("</td>                    \n                            <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                            <td>"),s=a._triageMustache.call(e,"transactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                            <td>"),s=a._triageMustache.call(e,"expenseAccount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                            <td>\n                                "),s=a["if"].call(e,"isAdjustment",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(21,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),s=a["if"].call(e,"isFulfillment",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(24,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),s=a["if"].call(e,"isTransfer",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(31,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            </td>\n                        </tr>            \n                    "),i}function x(e,t){var s,n="";return t.buffer.push("\n                                    "),s=a["if"].call(e,"haveReason",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(22,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    <strong>Location Adjusted:</strong> "),s=a._triageMustache.call(e,"deliveryDetails",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),n}function T(e,t){var s,n="";return t.buffer.push("\n                                        <strong>Reason:</strong> "),s=a._triageMustache.call(e,"reason",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\n                                    "),n}function I(e,t){var s,n="";return t.buffer.push("\n                                    <strong>Cost Per Unit:</strong> "),s=a._triageMustache.call(e,"costPerUnit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\n                                    <strong>Quantity At Completion:</strong> "),s=a._triageMustache.call(e,"quantityAtCompletion",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\n                                    <strong>Pulled From:</strong>\n                                    "),s=a.each.call(e,"locationsAffected",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(25,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),s=a["if"].call(e,"patient",{hash:{},hashTypes:{},hashContexts:{},inverse:L.program(29,R,t),fn:L.program(27,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),n}function D(e,t){var s,n="";return t.buffer.push("\n                                        "),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\n                                    "),n}function C(e,t){var s,n="";return t.buffer.push("\n                                        <strong>Prescription For: </strong> "),s=a._triageMustache.call(e,"deliveryDetails",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),n}function R(e,t){var s,n="";return t.buffer.push("\n                                        <strong>Delivered To: </strong> "),s=a._triageMustache.call(e,"deliveryDetails",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),n}function S(e,t){var s,n="";return t.buffer.push("\n                                    <strong>Transferred From:</strong>\n                                    "),s=a.each.call(e,"locationsAffected",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(25,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    <strong>Transferred To: </strong> "),s=a._triageMustache.call(e,"deliveryDetails",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),n}function N(e,t){t.buffer.push('\n                    <tr>\n                        <td colspan="4"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading transactions....</td>\n                    </tr>\n                ')}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var _,w,P,A=a.helperMissing,G=this.escapeExpression,L=this;w=a["em-form"]||t&&t["em-form"],P={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:L.noop,fn:L.program(1,i,r),contexts:[],types:[],data:r},_=w?w.call(t,P):A.call(t,"em-form",P),r.buffer.push(_||0===_?_:"")})}),define("hospitalrun/inventory/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{startKey:[],canAdd:function(){return this.currentUserCan("add_inventory_request")}.property(),canFulfill:function(){return this.currentUserCan("fulfill_inventory")}.property()})}),define("hospitalrun/inventory/index/route",["hospitalrun/routes/abstract-index-route","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{modelName:"inv-request",newButtonAction:function(){return this.currentUserCan("add_inventory_request")?"newRequest":null}.property(),newButtonText:"+ new request",pageTitle:"Requests",_getStartKeyFromItem:function(e){return["Requested",null,"inv-request_"+e.get("id")]},_modelQueryParams:function(){var e=this.get("maxValue");return{options:{startkey:["Requested",null,null],endkey:["Requested",e,e]},mapReduce:"inventory_request_by_status"}},actions:{fulfill:function(e){e.set("dateCompleted",new Date),this.transitionTo("inventory.request",e)}}})}),define("hospitalrun/inventory/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Name</th>\n            <th>Quantity</th>\n            <th>Requested On</th>\n            <th>Requested By</th>\n            '),s=a["if"].call(e,"canFulfill",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a["with"].call(e,"canFulfill","as","canFulfill",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,u,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function u(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr>\n                    <td>"),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),t.buffer.push(f((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"dateRequested",r):m.call(e,"date-format","dateRequested",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    "),s=a["if"].call(e,"canFulfill",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),i}function h(e,t){var s="";return t.buffer.push('\n                        <td>\n                            <button class="btn btn-primary" '),t.buffer.push(f(a.action.call(e,"fulfill","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Fulfill</button>\n                        </td>\n                    "),s}function p(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No requests found.</em> \n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(9,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function c(e,t){var s="";return t.buffer.push('\n            <em>Create a new request?</em> \n            <button class="btn btn-primary" '),t.buffer.push(f(a.action.call(e,"newRequest",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Request</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var d,f=this.escapeExpression,m=a.helperMissing,b=this;d=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(8,p,r),fn:b.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(d||0===d?d:"")})}),define("hospitalrun/inventory/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/item-controller/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({canDelete:function(){return this.parentController.get("canDeleteItem")}.property(),canEdit:function(){return this.parentController.get("canAddItem")}.property(),showAdd:function(){var e=this.parentController.get("canAddPurchase");return e}.property("type")})}),define("hospitalrun/inventory/listing/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{canAddItem:function(){return this.currentUserCan("add_inventory_item")}.property(),canAddPurchase:function(){return this.currentUserCan("add_inventory_purchase")}.property(),canDeleteItem:function(){return this.currentUserCan("delete_inventory_item")}.property(),sortProperties:["name","type"],startKey:[]})}),define("hospitalrun/inventory/listing/route",["hospitalrun/routes/abstract-index-route","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{modelName:"inventory",newButtonAction:function(){return this.currentUserCan("add_inventory_item")?"newItem":null}.property(),newButtonText:"+ new item",pageTitle:"Items",_modelQueryParams:function(){return{mapReduce:"inventory_by_name"}},_getStartKeyFromItem:function(e){return[e.get("name"),"inventory_"+e.get("id")]}})}),define("hospitalrun/inventory/listing/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            '),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"friendlyId",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(2,o,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"name",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(4,l,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"description",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(6,u,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"type",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(8,h,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"quantity",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(10,p,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"price",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(12,c,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"crossReference",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(14,d,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            <th>Actions</th>\n        </tr>\n        "),s=a.each.call(e,{hash:{itemController:"inventory/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:C.noop,fn:C.program(16,f,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),i
}function o(e,t){t.buffer.push("ID")}function l(e,t){t.buffer.push("Name")}function u(e,t){t.buffer.push("Description")}function h(e,t){t.buffer.push("Type")}function p(e,t){t.buffer.push("Quantity")}function c(e,t){t.buffer.push("Price")}function d(e,t){t.buffer.push("XRef")}function f(e,t){var s,n="";return t.buffer.push("\n            "),s=a.unless.call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(17,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function m(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr "),t.buffer.push(D(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    <td>"),s=a._triageMustache.call(e,"friendlyId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"description",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"type",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"price",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"crossReference",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>\n                        "),s=a["if"].call(e,"showAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(18,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(20,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(22,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"btn btn-default neutral",bubbles:!1},hashTypes:{"class":"STRING",bubbles:"BOOLEAN"},hashContexts:{"class":e,bubbles:e},inverse:C.noop,fn:C.program(24,v,t),contexts:[e,e],types:["STRING","ID"],data:t},s=n?n.call(e,"inventory.barcode","",r):R.call(e,"link-to","inventory.barcode","",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </td>\n                </tr>\n            "),i}function b(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default" '),t.buffer.push(D(a.action.call(e,"showAddPurchase","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Add</button>\n                        "),s}function y(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default neutral" '),t.buffer.push(D(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                        "),s}function g(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default warning" '),t.buffer.push(D(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                        '),s}function v(e,t){t.buffer.push("Barcode")}function x(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No items found.</em>  \n        '),s=a["if"].call(e,"canAddItem",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(27,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function T(e,t){var s="";return t.buffer.push('\n            <em>Create a new record?</em>\n            <button class="btn btn-primary" '),t.buffer.push(D(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Item</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var I,D=this.escapeExpression,C=this,R=a.helperMissing;I=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:C.program(26,x,r),fn:C.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(I||0===I?I:"")})}),define("hospitalrun/inventory/listing/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/location-item/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({haveItems:function(){var e=this.get("quantity");return e>0}.property("quantity")})}),define("hospitalrun/inventory/purchase/delete/controller",["ember","hospitalrun/mixins/inventory-locations","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:"inventory/edit",locations:a.computed.alias("controllers.inventory/edit.locations"),deleteLocations:a.computed.map("filteredLocations",function(e){return{name:"%@ (%@ available)".fmt(e.get("locationName"),e.get("quantity")),location:e}}),locationChanged:function(){var e=this.get("aisleLocation"),t=this.get("location"),s=this.get("locations");this.set("locationToFind",t),this.set("aisleToFind",e);var a=s.find(this.findLocation,this);this.set("deleteFromLocation",a)}.observes("aisleLocation","location"),filteredLocations:function(){var e=this.get("currentQuantity"),t=this.get("locations");return t.filter(function(t){var s=t.get("quantity");return s>=e})}.property("locations","currentQuantity"),showLocations:function(){var e=this.get("locations");return e.get("length")>0}.property("locations"),updateButtonText:function(){var e=this.get("expire");return a.isEmpty(e)||e!==!0?"Delete":"Expire"}.property("expire"),updateButtonAction:"delete",isUpdateDisabled:!1,showUpdateButton:!0,title:function(){var e=this.get("expire");return a.isEmpty(e)||e!==!0?"Delete Purchase":"Expire"}.property("expire"),actions:{cancel:function(){this.set("expire"),this.send("closeModal")},"delete":function(){var e=this.get("deleteFromLocation"),t=this.get("expire");a.isEmpty(t)||t!==!0?this.send("deletePurchase",this.get("model"),e):this.send("expirePurchase",this.get("model"),e)}}})}),define("hospitalrun/inventory/purchase/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){t.buffer.push("expire")}function o(e,t){t.buffer.push("delete")}function l(e,t){t.buffer.push("remove")}function u(e,t){var s,n="";return t.buffer.push("\n    "),s=a["if"].call(e,"showLocations",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}function h(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(b((s=a["em-select"]||e&&e["em-select"],n={hash:{label:"Remove From Location",prompt:"Do Not Remove From A Location",property:"deleteFromLocation",content:"deleteLocations",optionValuePath:"content.location",optionLabelPath:"content.name"},hashTypes:{label:"STRING",prompt:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{label:e,prompt:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},s?s.call(e,n):m.call(e,"em-select",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var p,c,d,f="",m=a.helperMissing,b=this.escapeExpression,y=this;return r.buffer.push('<div class="alert alert-danger">    \n    <p>\n        <span class="glyphicon glyphicon-warning-sign"></span>\n        Are you sure you wish to '),p=a["if"].call(t,"expire",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(3,o,r),fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),r.buffer.push(" this purchase?\n    </p>\n    <p>Doing so will "),p=a["if"].call(t,"expire",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(5,l,r),fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),r.buffer.push(" "),p=a._triageMustache.call(t,"currentQuantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),r.buffer.push(" items.</p>\n</div>\n"),c=a["em-form"]||t&&t["em-form"],d={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:y.noop,fn:y.program(7,u,r),contexts:[],types:[],data:r},p=c?c.call(t,d):m.call(t,"em-form",d),(p||0===p)&&r.buffer.push(p),f})}),define("hospitalrun/inventory/purchase/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/purchase/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:"inventory",cancelAction:"closeModal",canEditQuantity:function(){var e=this.get("originalQuantity"),t=this.get("currentQuantity");return e>t?!1:!0}.property("currentQuantity"),warehouseList:n.computed.alias("controllers.inventory.warehouseList"),aisleLocationList:n.computed.alias("controllers.inventory.aisleLocationList"),vendorList:n.computed.alias("controllers.inventory.vendorList"),lookupListsToUpdate:[{name:"aisleLocationList",property:"aisleLocation",id:"aisle_location_list"},{name:"vendorList",property:"vendor",id:"vendor_list"},{name:"warehouseList",property:"location",id:"warehouse_list"}],newPurchase:!1,updateQuantity:!1,updateCapability:"add_inventory_purchase",title:function(){var e=this.get("isNew");return e?"Add Purchase":"Edit Purchase"}.property("isNew"),beforeUpdate:function(){var e=this.get("isNew"),t=this.get("model").changedAttributes();return t.originalQuantity&&(this.set("currentQuantity",this.get("originalQuantity")),e||this.set("updateQuantity",!0)),e&&this.set("newPurchase",!0),n.RSVP.Promise.resolve()},afterUpdate:function(e){this.get("newPurchase")?this.send("addPurchase",e):this.send("updatePurchase",e,!0)}})}),define("hospitalrun/inventory/purchase/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"inventory/purchase",n):h.call(e,"partial","inventory/purchase",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/inventory/purchase/edit/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/purchase/item-controller/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({canDelete:function(){var e=this.parentController.get("canDeletePurchase");if(!e)return!1;var t=this.get("currentQuantity"),s=this.get("originalQuantity");return t===s?!0:!1}.property("originalQuantity","currentQuantity"),canEdit:function(){return this.parentController.get("canAddPurchase")}.property(),rowClass:function(){var e=this.get("expired");return e?"warning":""}.property("expired")})}),define("hospitalrun/inventory/purchase/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"inv-purchase",n):h.call(e,"partial","inv-purchase",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/inventory/quick-add/controller",["hospitalrun/inventory/edit/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"New Inventory Item",updateCapability:"add_inventory_item",actions:{cancel:function(){this.send("closeModal")}},beforeUpdate:function(){return this.get("skipSavePurchase")&&this.set("quantity",null),this._super()},afterUpdate:function(e){this.send("addedNewInventoryItem",e)}})}),define("hospitalrun/inventory/quick-add/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(c((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"inventory-basic",n):p.call(e,"partial","inventory-basic",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h="",p=a.helperMissing,c=this.escapeExpression,d=this;return r.buffer.push('<div class="alert alert-warning" role="alert">The inventory item <strong>'),o=a._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("</strong> could not be found.  If you would like to create a new inventory item, fill in the information below.  Otherwise press the Cancel button to return.</div>\n"),l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:d.noop,fn:d.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):p.call(t,"em-form",u),(o||0===o)&&r.buffer.push(o),h})}),define("hospitalrun/inventory/quick-add/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/reports/controller",["hospitalrun/controllers/abstract-report-controller","ember","hospitalrun/mixins/location-name","hospitalrun/mixins/modal-helper","hospitalrun/mixins/number-format","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{needs:["pouchdb"],effectiveDate:null,expenseCategories:["Inventory Consumed","Gift In Kind Usage","Inventory Obsolence"],expenseMap:null,grandCost:0,grandQuantity:0,locationSummary:null,pouchdbController:o.computed.alias("controllers.pouchdb"),reportColumns:{date:{label:"Date",include:!0,property:"date"},id:{label:"Id",include:!0,property:"inventoryItem.friendlyId"},name:{label:"Name",include:!0,property:"inventoryItem.name"},transactionType:{label:"Adjustment Type",include:!1,property:"transactionType"},expenseAccount:{label:"Expense Account",include:!1,property:"expenseAccount"},description:{label:"Description",include:!1,property:"inventoryItem.description"},type:{label:"Type",include:!0,property:"inventoryItem.type"},xref:{label:"Cross Reference",include:!1,property:"inventoryItem.crossReference"},reorder:{label:"Reorder Point",include:!1,property:"inventoryItem.reorderPoint",format:"_numberFormat"},price:{label:"Price Per Unit",include:!1,property:"inventoryItem.price",format:"_numberFormat"},quantity:{label:"Quantity",include:!0,property:"quantity",format:"_numberFormat"},consumedPerDay:{label:"Consumption Rate",include:!1,property:"consumedPerDay"},daysLeft:{label:"Days Left",include:!1,property:"daysLeft"},unit:{label:"Distribution Unit",include:!0,property:"inventoryItem.distributionUnit"},unitcost:{label:"Unit Cost",include:!0,property:"unitCost",format:"_numberFormat"},total:{label:"Total Cost",include:!0,property:"totalCost",format:"_numberFormat"},gift:{label:"Gift In Kind",include:!0,property:"giftInKind"},locations:{label:"Locations",include:!0,property:"locations",format:"_addLocationColumn"},aisle:{label:"Aisle",include:!1,property:"locations",format:"_addAisleColumn"},vendor:{label:"Vendor",include:!1,property:"vendors"}},reportTypes:[{name:"Days Supply Left In Stock",value:"daysLeft"},{name:"Detailed Adjustment",value:"detailedAdjustment"},{name:"Detailed Purchase",value:"detailedPurchase"},{name:"Detailed Stock Usage",value:"detailedUsage"},{name:"Detailed Stock Transfer",value:"detailedTransfer"},{name:"Detailed Expenses",value:"detailedExpense"},{name:"Expiration Date",value:"expiration"},{name:"Inventory By Location",value:"byLocation"},{name:"Inventory Valuation",value:"valuation"},{name:"Summary Expenses",value:"summaryExpense"},{name:"Summary Purchase",value:"summaryPurchase"},{name:"Summary Stock Usage",value:"summaryUsage"},{name:"Summary Stock Transfer",value:"summaryTransfer"}],includeDate:function(){var e=this.get("reportType");return o.isEmpty(e)||0!==e.indexOf("detailed")?(this.set("reportColumns.date.include",!1),!1):(this.set("reportColumns.date.include",!0),!0)}.property("reportType"),includeDaysLeft:function(){var e=this.get("reportType");return"daysLeft"===e?(this.set("reportColumns.consumedPerDay.include",!0),this.set("reportColumns.daysLeft.include",!0),!0):(this.set("reportColumns.consumedPerDay.include",!1),this.set("reportColumns.daysLeft.include",!1),!1)}.property("reportType"),includeCostFields:function(){var e=this.get("reportType");return"detailedTransfer"===e||"summaryTransfer"===e||"daysLeft"===e?(this.set("reportColumns.total.include",!1),this.set("reportColumns.unitcost.include",!1),!1):(this.set("reportColumns.total.include",!0),this.set("reportColumns.unitcost.include",!0),!0)}.property("reportType"),includeExpenseAccount:function(){var e=this.get("reportType");switch(e){case"detailedAdjustment":case"detailedTransfer":case"detailedUsage":return!0;case"detailedExpense":return this.set("reportColumns.expenseAccount.include",!0),!0;default:return this.set("reportColumns.expenseAccount.include",!1),!1}}.property("reportType"),includeTransactionType:function(){var e=this.get("reportType");return"detailedAdjustment"===e?(this.set("reportColumns.transactionType.include",!0),!0):(this.set("reportColumns.transactionType.include",!1),!1)}.property("reportType"),showEffectiveDate:function(){var e=this.get("reportType");return"valuation"===e||"byLocation"===e?(this.set("startDate",null),o.isEmpty(this.get("endDate"))&&this.set("endDate",new Date),!0):(o.isEmpty(this.get("startDate"))&&this.set("startDate",new Date),!1)}.property("reportType"),useFieldPicker:function(){var e=this.get("reportType");return"expiration"!==e}.property("reportType"),_addAisleColumn:function(e){return o.isEmpty(e)?void 0:e.map(function(e){return e.name.indexOf(":")>-1?e.name.split(":")[1]:void 0})},_addLocationColumn:function(e){return o.isEmpty(e)?void 0:e.map(function(e){return e.name.indexOf(":")>-1?e.name.split(":")[0]:e.name})},_addReportRow:function(e,t,s,a){!o.isEmpty(a)||o.isEmpty(e.inventoryItem)||o.isEmpty(e.inventoryItem._id)||(a={action:"viewInventory",model:e.inventoryItem._id.substr(10)}),this._super(e,t,s,a)},_addTotalsRow:function(e,t,s){s>0&&this._addReportRow({totalCost:e+this._numberFormat(t),quantity:e+this._numberFormat(s),unitCost:e+this._numberFormat(t/s)},!0)},_adjustLocation:function(e,t,s,a){var n=e.findBy("name",t);o.isEmpty(n)&&(n={name:t,quantity:0},e.push(n)),a?n.quantity+=s:n.quantity-=s},_adjustPurchase:function(e,t,s,a){var n=e.findBy("_id","inv-purchase_"+t);if(!o.isEmpty(n)){var r=n.calculatedQuantity;a?r+=s:r-=s,n.calculatedQuantity=r}},_calculateCosts:function(e,t){return o.isEmpty(e)||e.forEach(function(e){var s=this._calculateCostPerUnit(e),a=e.calculatedQuantity;t.quantity+=e.calculatedQuantity,t.totalCost+=a*s}.bind(this)),t.unitCost=0===t.totalCost||0===t.quantity?0:t.totalCost/t.quantity,t},_calculateCostPerUnit:function(e){var t=e.purchaseCost,s=parseInt(e.originalQuantity);return o.isEmpty(t)||o.isEmpty(s)?0:Number((t/s).toFixed(2))},_findInventoryItems:function(e,t,s,a){o.isEmpty(s)&&(s={});var n=this.get("pouchdbController");return new o.RSVP.Promise(function(r,i){n.queryMainDB(e,t).then(function(e){var t=o.keys(s),n=[];o.isEmpty(e.rows)||e.rows.forEach(function(e){e.doc.inventoryItem&&!t.contains(e.doc.inventoryItem)&&(n.push(e.doc.inventoryItem),t.push(e.doc.inventoryItem))}),this._getInventoryItems(n,s).then(function(t){e.rows.forEach(function(e){var s=t[e.doc.inventoryItem];if(!o.isEmpty(s)){var n=s[a];o.isEmpty(n)&&(n=[]),n.push(e.doc),s[a]=n}}),r(t)},i)}.bind(this),i)}.bind(this))},_findInventoryItemsByPurchase:function(e,t){return this._findInventoryItems({startkey:[e.startTime,"inv-purchase_"],endkey:[e.endTime,"inv-purchase_￿"],include_docs:!0},"inventory_purchase_by_date_received",t,"purchaseObjects")},_findInventoryItemsByRequest:function(e,t){return this._findInventoryItems({startkey:["Completed",e.startTime,"inv-request_"],endkey:["Completed",e.endTime,"inv-request_￿"],include_docs:!0},"inventory_request_by_status",t,"requestObjects")},_finishExpenseReport:function(e){var t=this.get("expenseCategories"),s=this.get("expenseMap");t.forEach(function(t){var a,n,r=0;this._addReportRow({inventoryItem:{name:"Expenses for: "+t}}),s[t].expenseAccounts.forEach(function(s){"detailedExpense"===e&&s.reportRows.forEach(function(e){this._addReportRow(e)}.bind(this)),a=o.isEmpty(s.name)?"(No Account)":s.name,n="Subtotal for %@: ".fmt(t+" - "+a),this._addReportRow({totalCost:n+this._numberFormat(s.total)},!0),r+=s.total}.bind(this)),n="Total for %@: ".fmt(t),this._addReportRow({totalCost:n+this._numberFormat(r)},!0),this.incrementProperty("grandCost",r)}.bind(this)),this._addReportRow({totalCost:"Total: "+this._numberFormat(this.get("grandCost"))},!0)},_finishLocationReport:function(){var e="",t=0,s=this.get("locationSummary"),a="",n=0;s=s.sortBy("name"),s.forEach(function(s){a=s.name.indexOf(":")>-1?s.name.split(":")[0].trim():s.name,e!==a&&(this._addTotalsRow("Total for %@: ".fmt(e),t,n),n=0,t=0,e=a);for(var r in s.items)this._addReportRow({giftInKind:s.items[r].giftInKind,inventoryItem:s.items[r].item,quantity:s.items[r].quantity,locations:[{name:s.name}],totalCost:s.items[r].totalCost,unitCost:s.items[r].unitCost}),n+=this._getValidNumber(s.items[r].quantity),t+=this._getValidNumber(s.items[r].totalCost),this.incrementProperty("grandCost",this._getValidNumber(s.items[r].totalCost)),this.incrementProperty("grandQuantity",this._getValidNumber(s.items[r].quantity))}.bind(this)),this._addTotalsRow("Total for %@: ".fmt(a),t,n)},_generateExpirationReport:function(){var e=0,t=this.get("pouchdbController"),s=this.get("reportRows"),a=this._getDateQueryParams();t.queryMainDB({startkey:[a.startTime,"inv-purchase_"],endkey:[a.endTime,"inv-purchase_￿"],include_docs:!0},"inventory_purchase_by_expiration_date").then(function(t){var a=[],n=[];t.rows.forEach(function(e){e.doc.currentQuantity>0&&!o.isEmpty(e.doc.expirationDate)&&(a.push(e.doc),n.push(e.doc.inventoryItem))}.bind(this)),this._getInventoryItems(n).then(function(t){a.forEach(function(a){var n=a.currentQuantity,r=new Date(a.expirationDate),i=t[a.inventoryItem];i&&(s.addObject([i.friendlyId,i.name,n,i.distributionUnit,moment(r).format("l")]),e+=n)}.bind(this)),s.addObject(["","","Total: "+e,"",""]),this.set("showReportResults",!0),this.set("reportHeaders",["Id","Name","Current Quantity","Distribution Unit","Expiration Date"]),this._generateExport(),this._setReportTitle(),this.closeProgressModal()}.bind(this))}.bind(this))},_generateInventoryReport:function(){this.set("grandCost",0),this.set("grandQuantity",0),this.set("locationSummary",[]);var e,t=this.get("locationSummary"),s=this.get("reportType"),a=this._getDateQueryParams();if("daysLeft"===s){var n=this.get("endDate"),r=this.get("startDate");if(o.isEmpty(n)||o.isEmpty(r))return void this.closeProgressModal();e=moment(n).diff(r,"days")}this._findInventoryItemsByRequest(a,{}).then(function(n){this._findInventoryItemsByPurchase(a,n).then(function(a){switch(o.keys(a).forEach(function(n){if(!o.isEmpty(a[n])){var r=a[n],i=r.purchaseObjects,l=r.requestObjects,u={giftInKind:"N",inventoryItem:r,quantity:0,unitCost:0,totalCost:0,locations:[],vendors:[]};o.isEmpty(i)||i.forEach(function(e){var t=this.getDisplayLocationName(e.location,e.aisleLocation),s=e.originalQuantity;e.calculatedQuantity=s,e.giftInKind===!0&&(u.giftInKind="Y"),o.isEmpty(e.vendor)||u.vendors.contains(e.vendor)||u.vendors.push(e.vendor),this._adjustLocation(u.locations,t,s,!0)}.bind(this)),o.isEmpty(l)||l.forEach(function(e){var t=e.adjustPurchases,s=!1,a=e.locationsAffected,n=e.purchasesAffected,r=e.transactionType;if(s="Adjustment (Add)"===r||"Return"===r,t)o.isEmpty(n)||o.isEmpty(i)||n.forEach(function(e){this._adjustPurchase(i,e.id,e.quantity,s)}.bind(this));else if("Transfer"===r){var l=this.getDisplayLocationName(e.deliveryLocation,e.deliveryAisle);this._adjustLocation(u.locations,l,e.quantity,!0)}a.forEach(function(e){this._adjustLocation(u.locations,e.name,e.quantity,s)}.bind(this))}.bind(this));var h=0,p=0;switch(s){case"byLocation":u.locations.forEach(function(e){var s=t.findBy("name",e.name);o.isEmpty(s)?(s=o.copy(e),s.items={},t.push(s)):s.quantity+=this._getValidNumber(e.quantity);var a=this._calculateCosts(i,{quantity:0,totalCost:0});s.items[r._id]={item:r,quantity:this._getValidNumber(e.quantity),giftInKind:u.giftInKind,totalCost:this._getValidNumber(a.unitCost)*this._getValidNumber(e.quantity),unitCost:this._getValidNumber(a.unitCost)}}.bind(this));break;case"daysLeft":if(!o.isEmpty(l)){var c=l.reduce(function(e,t){return"Fulfillment"===t.transactionType?e+=this._getValidNumber(t.quantity):e}.bind(this),0);u.quantity=this._getValidNumber(r.quantity),c>0?(u.consumedPerDay=this._numberFormat(c/e,!0),u.daysLeft=this._numberFormat(u.quantity/u.consumedPerDay)):(u.consumedPerDay=0===c?"0":"?"+c,u.daysLeft="?"),this._addReportRow(u)}break;case"detailedAdjustment":case"detailedTransfer":case"detailedUsage":case"detailedExpense":case"summaryExpense":o.isEmpty(l)||(l.forEach(function(e){if(this._includeTransaction(s,e.transactionType)){var t=this.getDisplayLocationName(e.deliveryLocation,e.deliveryAisle),a=[],n=this._getValidNumber(e.quantity)*this._getValidNumber(e.costPerUnit);a=e.locationsAffected.map(function(e){return"detailedTransfer"===s?{name:"From: %@ To: %@".fmt(e.name,t)}:{name:"%@ from %@".fmt(this._getValidNumber(e.quantity),e.name)}}.bind(this));var r={date:moment(new Date(e.dateCompleted)).format("l"),expenseAccount:e.expenseAccount,giftInKind:u.giftInKind,inventoryItem:u.inventoryItem,quantity:e.quantity,transactionType:e.transactionType,locations:a,unitCost:e.costPerUnit,totalCost:n};"detailedExpense"===s||"summaryExpense"===s?this._updateExpenseMap(e,r):(this._addReportRow(r),p+=this._getValidNumber(e.quantity),h+=this._getValidNumber(n))}}.bind(this)),"detailedExpense"!==s&&"summaryExpense"!==s&&(this._addTotalsRow("Subtotal: ",h,p),this.incrementProperty("grandCost",h),this.incrementProperty("grandQuantity",p)));break;case"summaryTransfer":case"summaryUsage":o.isEmpty(l)||(u.quantity=l.reduce(function(e,t){if(this._includeTransaction(s,t.transactionType)){var a=this._getValidNumber(t.quantity)*this._getValidNumber(t.costPerUnit);return h+=a,e+=this._getValidNumber(t.quantity)}return e}.bind(this),0),u.quantity>0&&(u.totalCost=h,u.unitCost=h/u.quantity,this._addReportRow(u),this.incrementProperty("grandCost",h),this.incrementProperty("grandQuantity",u.quantity)));break;case"detailedPurchase":o.isEmpty(i)||(i.forEach(function(e){var t="N";e.giftInKind===!0&&(t="Y"),this._addReportRow({date:moment(new Date(e.dateReceived)).format("l"),giftInKind:t,inventoryItem:u.inventoryItem,quantity:e.originalQuantity,unitCost:e.costPerUnit,totalCost:e.purchaseCost,locations:[{name:this.getDisplayLocationName(e.location,e.aisleLocation)}]}),h+=this._getValidNumber(e.purchaseCost),p+=this._getValidNumber(e.originalQuantity)}.bind(this)),this._addTotalsRow("Subtotal: ",h,p),this.incrementProperty("grandCost",h),this.incrementProperty("grandQuantity",p));break;case"summaryPurchase":o.isEmpty(i)||(u.locations=[],u.quantity=i.reduce(function(e,t){h+=this._getValidNumber(t.purchaseCost);var s=this.getDisplayLocationName(t.location,t.aisleLocation);return u.locations.findBy("name",s)||u.locations.push({name:this.getDisplayLocationName(t.location,t.aisleLocation)}),e+=this._getValidNumber(t.originalQuantity)}.bind(this),0),u.unitCost=h/u.quantity,u.totalCost=h,this._addReportRow(u),this.incrementProperty("grandCost",h),this.incrementProperty("grandQuantity",u.quantity));break;case"valuation":o.isEmpty(i)||(this._calculateCosts(i,u),this.incrementProperty("grandCost",this._getValidNumber(u.totalCost)),this.incrementProperty("grandQuantity",this._getValidNumber(u.quantity)),this._addReportRow(u))}}}.bind(this)),s){case"detailedExpense":case"summaryExpense":this._finishExpenseReport(s);break;case"byLocation":this._finishLocationReport(),this._addTotalsRow("Total: ",this.get("grandCost"),this.get("grandQuantity"));break;default:this._addTotalsRow("Total: ",this.get("grandCost"),this.get("grandQuantity"))}this._finishReport()}.bind(this),function(e){this._notifyReportError("Error in _findInventoryItemsByPurchase:"+e)}.bind(this))}.bind(this),function(e){this._notifyReportError("Error in _findInventoryItemsByRequest:"+e)}.bind(this))},_getDateQueryParams:function(){var e,t=this.get("endDate"),s=this.get("maxValue"),a=this.get("startDate");return o.isEmpty(t)||(s=moment(t).endOf("day").toDate().getTime()),o.isEmpty(a)||(e=moment(a).startOf("day").toDate().getTime()),{endTime:s,startTime:e}},_getInventoryItems:function(e,t){var s=this.get("pouchdbController");return new o.RSVP.Promise(function(a,n){o.isEmpty(t)&&(t={}),s.queryMainDB({keys:e,include_docs:!0}).then(function(e){e.rows.forEach(function(e){t[e.id]=e.doc}),a(t)},n)})},_includeTransaction:function(e,t){var s,a=0===e.indexOf("detailed");if("detailedExpense"===e||"summaryExpense"===e)return!0;switch(t){case"Fulfillment":s=a?"detailedUsage":"summaryUsage";break;case"Transfer":s=a?"detailedTransfer":"summaryTransfer";break;default:s=a?"detailedAdjustment":"summaryAdjustment"}return e===s},_updateExpenseMap:function(e,t){var s,a,n,r=this.get("expenseMap"),i="Y"===t.giftInKind,l=!0;switch(e.transactionType){case"Fulfillment":case"Return":s=i?r["Gift In Kind Usage"]:r["Inventory Consumed"],"Return"===e.transactionType&&(l=!1);
break;case"Adjustment (Add)":case"Adjustment (Remove)":case"Return To Vendor":case"Write Off":s=r["Inventory Obsolence"],"Adjustment (Add)"===e.transactionType&&(l=!1)}o.isEmpty(s)||(a=s.expenseAccounts.findBy("name",e.expenseAccount),o.isEmpty(a)&&(a={name:e.expenseAccount,total:0,reportRows:[]},s.expenseAccounts.push(a)),a.reportRows.push(t),n=this._getValidNumber(e.quantity)*this._getValidNumber(e.costPerUnit),l?(s.total+=n,a.total+=n):(s.total=s.total-n,a.total=a.total-n,t.totalCost=-1*t.totalCost))},actions:{generateReport:function(){var e=this.get("endDate"),t=this.get("reportRows"),s=this.get("reportType"),a=this.get("startDate");if(!o.isEmpty(a)||!o.isEmpty(e))switch(t.clear(),this.showProgressModal(),s){case"expiration":this._generateExpirationReport();break;case"detailedExpense":case"summaryExpense":var n=this.get("expenseCategories"),r={};n.forEach(function(e){r[e]={total:0,expenseAccounts:[]}}),this.set("expenseMap",r),this._generateInventoryReport();break;default:this._generateInventoryReport()}},viewInventory:function(e){this.store.find("inventory",e).then(function(e){e.set("returnTo","inventory.reports"),this.transitionToRoute("inventory.edit",e)}.bind(this))}}})}),define("hospitalrun/mixins/location-name",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({getDisplayLocationName:function(e,t){var a=this.formatLocationName(e,t);return s.isEmpty(a)&&(a="No Location"),a},formatLocationName:function(e,t){var a="";return s.isEmpty(e)||(a+=e,s.isEmpty(t)||(a+=" : ")),s.isEmpty(t)||(a+=t),a},locationName:function(){var e=this.get("aisleLocation"),t=this.get("location");return this.getDisplayLocationName(t,e)}.property("location","aisleLocation")})}),define("hospitalrun/inventory/reports/route",["hospitalrun/routes/abstract-index-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({pageTitle:"Inventory Report",model:function(){return n.RSVP.resolve()}})}),define("hospitalrun/inventory/reports/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="row">\n                '),t.buffer.push(I((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-xs-3",label:"Report Type",property:"reportType",content:"reportTypes",optionValuePath:"content.value",optionLabelPath:"content.name",selected:"reportType"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-select",r)))),t.buffer.push('\n            </div>\n            <div class="row">\n                '),s=a["if"].call(e,"showEffectiveDate",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(4,l,t),fn:D.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </div>        \n            "),s=a["if"].call(e,"useFieldPicker",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        \n        "),i}function o(e,t){var s,n,r="";return t.buffer.push("\n                    "),t.buffer.push(I((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"endDate",label:"Effective Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"date-picker",n)))),t.buffer.push("\n                "),r}function l(e,t){var s,n,r="";return t.buffer.push("\n                    "),t.buffer.push(I((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"startDate",label:"Start Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"date-picker",n)))),t.buffer.push("\n                    "),t.buffer.push(I((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"endDate",label:"End Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"date-picker",n)))),t.buffer.push("\n                "),r}function u(e,t){var s,n,r,i="";return t.buffer.push('\n                <h3>Fields to Include</h3>\n                <div class="row">\n                    <div class="col-xs-1"></div>\n                    '),s=a["if"].call(e,"includeDate",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.id.label",property:"reportColumns.id.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.name.label",property:"reportColumns.name.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.description.label",property:"reportColumns.description.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.type.label",property:"reportColumns.type.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push('                        \n                </div>\n                <div class="row">\n                    <div class="col-xs-1"></div>                \n                    '),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.quantity.label",property:"reportColumns.quantity.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.unit.label",property:"reportColumns.unit.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),s=a["if"].call(e,"includeCostFields",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(9,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"includeDaysLeft",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(11,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.price.label",property:"reportColumns.price.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push('\n                </div>\n                <div class="row">\n                    <div class="col-xs-1"></div>\n                    '),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.reorder.label",property:"reportColumns.reorder.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.gift.label",property:"reportColumns.gift.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.locations.label",property:"reportColumns.locations.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.aisle.label",property:"reportColumns.aisle.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.xref.label",property:"reportColumns.xref.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push('\n                    \n                </div>\n                <div class="row">\n                    <div class="col-xs-1"></div>        \n                    '),t.buffer.push(I((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"reportColumns.vendor.label",property:"reportColumns.vendor.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):T.call(e,"em-checkbox",r)))),t.buffer.push("\n                    "),s=a["if"].call(e,"includeExpenseAccount",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(13,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    \n                    "),s=a["if"].call(e,"includeTransactionType",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(15,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </div>\n            "),i}function h(e,t){var s,n,r="";return t.buffer.push("\n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.date.label",property:"reportColumns.date.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),r}function p(e,t){var s,n,r="";return t.buffer.push("                    \n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.total.label",property:"reportColumns.total.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("\n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.unitcost.label",property:"reportColumns.unitcost.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),r}function c(e,t){var s,n,r="";return t.buffer.push("\n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.consumedPerDay.label",property:"reportColumns.consumedPerDay.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("\n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.daysLeft.label",property:"reportColumns.daysLeft.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("                    \n                    "),r}function d(e,t){var s,n,r="";return t.buffer.push("\n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.expenseAccount.label",property:"reportColumns.expenseAccount.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),r}function f(e,t){var s,n,r="";return t.buffer.push("\n                        "),t.buffer.push(I((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.transactionType.label",property:"reportColumns.transactionType.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):T.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),r}function m(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="panel panel-primary">\n        <div class="panel-heading">\n            <h3 class="panel-title">'),s=a._triageMustache.call(e,"reportTitle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(I((n=a.partial||e&&e.partial,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"paging",r):T.call(e,"partial","paging",r)))),t.buffer.push('</h3>\n        </div>\n        <div class="panel-body">\n            <table class="table">\n                <tr class="table-header">\n                    '),s=a.each.call(e,"reportHeaders",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(18,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n                "),t.buffer.push(I((n=a.partial||e&&e.partial,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"report-rows",r):T.call(e,"partial","report-rows",r)))),t.buffer.push('\n            </table>\n        </div>\n        <div class="panel-footer">\n            <a '),t.buffer.push(I(a["bind-attr"].call(e,{hash:{href:"csvExport"},hashTypes:{href:"STRING"},hashContexts:{href:e},contexts:[],types:[],data:t}))),t.buffer.push(' target="_blank" download="report.csv" class="btn btn-default">Export Report</a>\n\n        </div>    \n    </div>\n'),i}function b(e,t){var s,n="";return t.buffer.push("\n                        <th>\n                            "),s=a._triageMustache.call(e,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </th>\n                    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var y,g,v,x="",T=a.helperMissing,I=this.escapeExpression,D=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">\n        '),g=a["em-form"]||t&&t["em-form"],v={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:D.noop,fn:D.program(1,i,r),contexts:[],types:[],data:r},y=g?g.call(t,v):T.call(t,"em-form",v),(y||0===y)&&r.buffer.push(y),r.buffer.push('\n    </div>\n    <div class="panel-footer">\n        <button class="btn btn-default" '),r.buffer.push(I(a.action.call(t,"generateReport",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r}))),r.buffer.push(">Generate Report</button>\n    </div>\n</div>\n"),y=a["if"].call(t,"showReportResults",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(17,m,r),contexts:[t],types:["ID"],data:r}),(y||0===y)&&r.buffer.push(y),x})}),define("hospitalrun/inventory/request/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/inventory-selection","ember","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(r,{needs:["inventory","pouchdb"],cancelAction:"allRequests",warehouseList:i.computed.alias("controllers.inventory.warehouseList"),aisleLocationList:i.computed.alias("controllers.inventory.aisleLocationList"),expenseAccountList:i.computed.alias("controllers.inventory.expenseAccountList"),inventoryList:function(){var e=this.get("inventoryItems");if(!i.isEmpty(e)){var t=e.map(function(e){return e.doc});return t}}.property("inventoryItems.[]"),lookupListsToUpdate:[{name:"expenseAccountList",property:"expenseAccount",id:"expense_account_list"},{name:"aisleLocationList",property:"deliveryAisle",id:"aisle_location_list"},{name:"warehouseList",property:"deliveryLocation",id:"warehouse_list"}],canFulfill:function(){var e=this.get("requestedItems");return i.isEmpty(e)&&this.currentUserCan("fulfill_inventory")}.property("requestedItems.@each"),isFulfilling:function(){var e=this.get("canFulfill"),t=this.get("isRequested"),s=this.get("shouldFulfillRequest");return e&&(t||s)}.property("isRequested","shouldFulfillRequest"),isRequested:function(){var e=this.get("status");return"Requested"===e}.property("status"),showRequestedItems:function(){var e=this.get("requestedItems");return!i.isEmpty(e)}.property("requestedItems.@each"),updateViaFulfillRequest:!1,updateDateCompleted:function(){var e=this.get("isFulfilling"),t=this.get("dateCompleted");e?i.isEmpty(t)&&this.set("dateCompleted",new Date):this.get("updateViaFulfillRequest")||this.set("dateCompleted")}.observes("isFulfilling"),updateButtonText:function(){return this.get("isFulfilling")?"Fulfill":this.get("isNew")?"Add":"Update"}.property("isNew","isFulfilling"),updateCapability:"add_inventory_request",actions:{addInventoryItem:function(){var e=this.get("inventoryItem"),t=this.get("model"),s=this.get("requestedItems"),a=this.get("quantity");if(t.validate(),this.get("isValid")&&!i.isEmpty(e)&&!i.isEmpty(a)){var n=i.Object.create({item:e.get("content"),quantity:a});s.addObject(n),this.set("inventoryItem"),this.set("inventoryItemTypeAhead"),this.set("quantity"),this.set("selectedInventoryItem")}},allRequests:function(){this.transitionToRoute("inventory.index")},removeItem:function(e){var t=this.get("requestedItems"),s=e.itemToRemove;t.removeObject(s),this.send("closeModal")},showRemoveItem:function(e){var t="Are you sure you want to remove this item from this request?",s=i.Object.create({itemToRemove:e}),a="Remove Payment";this.displayConfirm(a,t,"removeItem",s)},update:function(e){this.beforeUpdate().then(function(){var t=this.get("updateViaFulfillRequest");if(t)this.updateLookupLists(),this.send("fulfillRequest",this.get("model"));else{var s=this.get("isNew"),a=this.get("requestedItems");if(s&&!i.isEmpty(a)){var n=this.get("model"),r=n.getProperties(["dateRequested","deliveryAisle","deliveryLocation","expenseAccount","requestedBy","status"]),o=[],l=[],u=[];i.isEmpty(this.get("inventoryItem"))||i.isEmpty(this.get("quantity"))||u.push(n.save()),a.forEach(function(e){r.inventoryItem=e.get("item"),r.quantity=e.get("quantity");var t=this.get("store").createRecord("inv-request",r);o.push(t.get("inventoryItem")),l.push(t)}.bind(this)),i.RSVP.all(o,"Get inventory items for inventory requests").then(function(){l.forEach(function(e){u.push(e.save())}),i.RSVP.all(u,"Save batch inventory requests").then(function(){this.updateLookupLists(),this.afterUpdate()}.bind(this))}.bind(this))}else this.get("model").save().then(function(t){this.updateLookupLists(),e||this.afterUpdate(t)}.bind(this))}}.bind(this))}},afterUpdate:function(){this.send("allRequests")},beforeUpdate:function(){return this.get("isFulfilling")?this.set("updateViaFulfillRequest",!0):this.set("updateViaFulfillRequest",!1),this.get("isNew")&&(this.set("dateRequested",new Date),this.set("requestedBy",this.get("model").getUserName()),this.get("isFulfilling")||this.set("status","Requested")),i.RSVP.resolve()}})}),define("hospitalrun/inventory/request/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a["if"].call(e,"isRequested",{hash:{},hashTypes:{},hashContexts:{},inverse:g.program(4,l,t),fn:g.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n\n    "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"deliveryLocation",label:"Delivery Location",list:"warehouseList",selection:"deliveryLocation"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"deliveryAisle",label:"Delivery Aisle",list:"aisleLocationList",selection:"deliveryAisle"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"expenseAccount",label:"Bill To",list:"expenseAccountList",selection:"expenseAccount"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"select-or-typeahead",r)))),t.buffer.push("\n\n    "),s=a["if"].call(e,"isFulfilling",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(10,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),i}function o(e,t){var s,n="";return t.buffer.push('\n        <div class="form-group">\n            <label class="control-label">Item</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>        \n        </div>\n        <div class="form-group">\n            <label class="control-label">Quantity Requested</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>        \n        </div>\n        <div class="form-group">\n            <label class="control-label">Quantity on Hand</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"inventoryItem.quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>        \n        </div>\n    "),n}function l(e,t){var s,n,r,i="";return t.buffer.push('\n        <div class="row">\n            '),t.buffer.push(y((n=a["inventory-typeahead"]||e&&e["inventory-typeahead"],r={hash:{"class":"col-sm-8",property:"inventoryItemTypeAhead",label:"Inventory Item",content:"inventoryList",selection:"selectedInventoryItem"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",content:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,content:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"inventory-typeahead",r)))),t.buffer.push("\n            "),t.buffer.push(y((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"quantity",label:"Quantity","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"em-input",r)))),t.buffer.push('\n            <div class="form-group col-sm-1">\n                <label class="control-label"></label>\n                <h4 class="form-control-static">                    \n                    <span class="glyphicon glyphicon-plus" '),t.buffer.push(y(a.action.call(e,"addInventoryItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push("></span>                    \n                </h4>\n            </div>\n        </div>\n        "),s=a["if"].call(e,"showRequestedItems",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),s=a["if"].call(e,"canFulfill",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),i}function u(e,t){var s,n="";return t.buffer.push('\n            <h3>Requested Items</h3>\n            <table class="table">\n                <tr class="table-header">\n                    <th>Name</th>\n                    <th>Quantity</th>\n                    <th>Action</th>\n                </tr>\n                '),s=a.each.call(e,"requestedItems",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </table>\n        "),n}function h(e,t){var s,n,r,i="";return t.buffer.push("\n                    <tr>\n                        <td>\n                            "),s=a._triageMustache.call(e,"item.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </td>\n                        <td class="col-xs-1">\n                            <div class="form-group">\n                                '),t.buffer.push(y((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"quantity"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):b.call(e,"input",r)))),t.buffer.push('\n                            </div>\n                        </td>\n                        <td>\n                            <button class="btn btn-default warning" '),t.buffer.push(y(a.action.call(e,"showRemoveItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                <span class="octicon octicon-x"></span>Remove\n                            </button>\n                        </td>\n                    </tr>\n                '),i}function p(e,t){var s,n,r="";return t.buffer.push('\n            <div class="form-group">            \n                <label class="control-label">Fulfill Request</label>\n            </div>\n            '),t.buffer.push(y((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Fulfill Request Now",property:"shouldFulfillRequest"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"em-checkbox",n)))),t.buffer.push("        \n        "),r}function c(e,t){var s,n,r="";return t.buffer.push('\n        <div class="row">\n            '),t.buffer.push(y((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"dateCompleted",label:"Date Completed","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"date-picker",n)))),t.buffer.push("\n        </div>\n        "),t.buffer.push(y((s=a["inventory-location-picker"]||e&&e["inventory-location-picker"],n={hash:{label:"Pull From",quantityRequested:"quantity",locationList:"inventoryItem.availableLocations",selectedLocations:"inventoryLocations"},hashTypes:{label:"STRING",quantityRequested:"ID",locationList:"ID",selectedLocations:"ID"},hashContexts:{label:e,quantityRequested:e,locationList:e,selectedLocations:e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"inventory-location-picker",n)))),t.buffer.push('\n         <div class="form-group">            \n            <label class="control-label">Consume Purchases</label>\n         </div>\n        '),t.buffer.push(y((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Mark As Consumed",property:"markAsConsumed"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"em-checkbox",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var d,f,m,b=a.helperMissing,y=this.escapeExpression,g=this;f=a["em-form"]||t&&t["em-form"],m={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:g.noop,fn:g.program(1,i,r),contexts:[],types:[],data:r},d=f?f.call(t,m):b.call(t,"em-form",m),r.buffer.push(d||0===d?d:"")})}),define("hospitalrun/inventory/request/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/route",["hospitalrun/routes/abstract-module-route","hospitalrun/mixins/fulfill-request","hospitalrun/mixins/inventory-id","hospitalrun/mixins/inventory-locations","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,o,l,{addCapability:"add_inventory_item",additionalButtons:function(){return this.currentUserCan(this.get("addCapability"))?[{buttonAction:"newInventoryBatch",buttonText:"+ inventory received","class":"btn btn-primary"}]:void 0}.property(),additionalModels:[{name:"aisleLocationList",findArgs:["lookup","aisle_location_list"]},{name:"expenseAccountList",findArgs:["lookup","expense_account_list"]},{name:"inventoryTypeList",findArgs:["lookup","inventory_types"]},{name:"warehouseList",findArgs:["lookup","warehouse_list"]},{name:"vendorList",findArgs:["lookup","vendor_list"]}],currentItem:null,moduleName:"inventory",newButtonText:"+ new request",subActions:[{text:"Requests",linkTo:"inventory.index"},{text:"Items",linkTo:"inventory.listing"},{text:"Reports",linkTo:"inventory.reports"}],sectionTitle:"Inventory",actions:{addPurchase:function(e){var t=this.get("currentItem"),s=t.get("purchases");s.addObject(e),this.newPurchaseAdded(t,e),t.updateQuantity(),t.save(),this.send("closeModal")},newInventoryBatch:function(){this.currentUserCan(this.get("addCapability"))&&this.transitionTo("inventory.batch","new")},newRequest:function(){var e=this.get("store").createRecord("inv-request",{transactionType:"Request",requestedItems:[]});this.transitionTo("inventory.request",e)},allItems:function(){this.transitionTo("inventory.listing")},showAddPurchase:function(e){var t=this.get("store").createRecord("inv-purchase",{dateReceived:new Date,distributionUnit:e.get("distributionUnit"),inventoryItem:"inventory_"+e.get("id")});
this.set("currentItem",e),this.send("openModal","inventory.purchase.edit",t)}}})}),define("hospitalrun/mixins/fulfill-request",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({actions:{doneFulfillRequest:function(){},fulfillRequest:function(e,t,a,n){var r=e.get("markAsConsumed"),i=e.get("transactionType");"Request"===i&&(i=null),e.get("inventoryItem").then(function(o){r?(e.set("adjustPurchases",!0),s.isEmpty(i)&&e.set("transactionType","Fulfillment"),this._performFulfillment(e,o,a).then(function(){this._finishFulfillRequest(e,o,t,a,n)}.bind(this))):(e.set("adjustPurchases",!1),s.isEmpty(i)&&e.set("transactionType","Transfer"),this._finishFulfillRequest(e,o,t,a,n))}.bind(this))}},_findQuantity:function(e,t,s,a){var n,r,i=[],o=s.get("quantity"),l=parseInt(e.get("quantity")),u=l,h=[],p=0,c=t.any(function(e){return n=e.get("currentQuantity"),e.get("expired")||0>=n?!1:(r=e.get("costPerUnit"),a?(e.incrementProperty("currentQuantity",l),p+=r*u,h.push({id:e.get("id"),quantity:l}),i.addObject(e),!0):(u>n?(p+=r*n,u-=n,h.push({id:e.get("id"),quantity:parseInt(n)}),n=0):(p+=r*u,n-=u,h.push({id:e.get("id"),quantity:parseInt(u)}),u=0),e.set("currentQuantity",n),i.addObject(e),0===u))});return c?(e.set("costPerUnit",(p/l).toFixed(2)),e.set("quantityAtCompletion",o),e.set("purchasesAffected",h),e.set("purchases",i),s.updateQuantity(),!0):"Could not find any purchases that had the required quantity:"+l},_finishFulfillRequest:function(e,t,a,n,r){var i=e.get("inventoryLocations"),o=[],l=e.get("markAsConsumed"),u=[],h=parseInt(e.get("quantity")),p=e.get("purchases");if(n){var c=i.get("firstObject");c.incrementProperty("quantity",h),u.push(c.save()),o.push({name:c.get("locationName"),quantity:h})}else i.reduce(function(s,a){var n=e.get("deliveryLocation"),r=e.get("deliveryAisle"),i=parseInt(a.get("quantity"));return s>0?(l||(a.set("transferAisleLocation",r),a.set("transferLocation",n)),i>=s?(l?(a.decrementProperty("quantity",s),u.push(a.save())):(a.set("adjustmentQuantity",s),this.transferToLocation(t,a)),o.push({name:a.get("locationName"),quantity:s}),0):(l?(a.decrementProperty("quantity",i),u.push(a.save())):(a.set("adjustmentQuantity",i),this.transferToLocation(t,a)),o.push({name:a.get("locationName"),quantity:i}),s-i)):void 0}.bind(this),h);e.set("locationsAffected",o),l&&p.forEach(function(e){u.push(e.save())}),u.push(t.save()),e.set("status","Completed"),e.set("completedBy",e.getUserName()),u.push(e.save()),s.RSVP.all(u,"All saving done for inventory fulfillment").then(function(){this.send("doneFulfillRequest"),a&&this.send("closeModal"),r||this.transitionTo("inventory.request")}.bind(this))},_performFulfillment:function(e,t,a){return new s.RSVP.Promise(function(s,n){var r=t.get("purchases"),i=t.get("quantity"),o=e.get("quantity");if(a||i>=o){var l=this._findQuantity(e,r,t,a);l===!0?s():n(l)}else n("The quantity on hand, %@ is less than the requested quantity of %@.".fmt(i,o))}.bind(this))}})}),define("hospitalrun/inventory/search/controller",["hospitalrun/inventory/listing/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/inventory/search/route",["hospitalrun/routes/abstract-search-route","hospitalrun/utils/inventory-search","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({moduleName:"inventory",searchKeys:["crossReference","description","friendlyId","name"],searchIndex:n,searchModel:"inventory"})}),define("hospitalrun/routes/abstract-search-route",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Route.extend(s.SimpleAuth.AuthenticatedRouteMixin,{searchKeys:null,searchModel:null,searchText:null,_findBySearchIndex:function(e){return new s.RSVP.Promise(function(t,a){var n=this.get("searchIndex"),r=this.get("searchModel");if(s.isEmpty(n))a();else{var i=s.copy(n);i.query=e,this.store.find(r,{searchIndex:i}).then(function(e){s.isEmpty(e)?a():t(e)},a)}}.bind(this))},_findByContains:function(e){var t=this.get("searchKeys"),s=this.get("searchModel"),a={containsValue:{value:e,keys:t}};return this.store.find(s,a)},model:function(e){return new s.RSVP.Promise(function(t){var s=e.search_text;this.controllerFor("navigation").set("currentSearchText",s),this.set("searchText",s),this._findByContains(s).then(t,function(e){throw t(new DS.AdapterPopulatedRecordArray),new Error(e)}.bind(this))}.bind(this))},setupController:function(e,t){this._super(e,t),s.isEmpty(t)?e.set("hasRecords",!1):e.set("hasRecords",t.get("length")>0),e.set("searchText",this.get("searchText")),this.controllerFor("navigation").closeProgressModal();var a=this.controllerFor(this.get("moduleName")),n="Search Results for <i>"+this.get("searchText")+"</i>";a.set("currentScreenTitle",n.htmlSafe())}})}),define("hospitalrun/utils/inventory-search",["exports"],function(e){"use strict";e["default"]={fields:["crossReference","description","friendlyId","name"],filter:function(e){var t=e._id.indexOf("_"),s=e._id.substring(0,t);return"inventory"===s}}}),define("hospitalrun/inventory/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(u((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"inventory/listing",n):l.call(e,"partial","inventory/listing",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.view.call(t,"search-listing",{hash:{newButtonText:"New Item",allButtonText:"All Inventory"},hashTypes:{newButtonText:"STRING",allButtonText:"STRING"},hashContexts:{newButtonText:t,allButtonText:t},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["STRING"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/inventory/transfer/controller",["hospitalrun/controllers/abstract-edit-controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:"inventory",warehouseList:n.computed.alias("controllers.inventory.warehouseList"),aisleLocationList:n.computed.alias("controllers.inventory.aisleLocationList"),lookupListsToUpdate:[{name:"aisleLocationList",property:"transferAisleLocation",id:"aisle_location_list"},{name:"warehouseList",property:"transferLocation",id:"warehouse_list"}],title:"Transfer Items",updateButtonText:"Transfer",updateButtonAction:"transfer",updateCapability:"adjust_inventory_location",actions:{cancel:function(){this.send("closeModal")},transfer:function(){this.updateLookupLists(),this.send("transferItems",this.get("model"),!0)}}})}),define("hospitalrun/inventory/transfer/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="form-group">\n        <label class="control-label">Item</label>\n        <p class="form-control-static">'),s=a._triageMustache.call(e,"transferItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>        \n    </div>\n    <div class="form-group">\n        <label class="control-label">Transfer From</label>\n        <p class="form-control-static">'),s=a._triageMustache.call(e,"locationName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>        \n    </div>\n    <div class="form-group">\n        <label class="control-label">Quantity Available</label>\n        <p class="form-control-static">'),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n    </div>\n    "),t.buffer.push(p((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"transferLocation",label:"Transfer To Location",list:"warehouseList",selection:"transferLocation"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    "),t.buffer.push(p((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"transferAisleLocation",label:"Transfer To Aisle Location",list:"aisleLocationList",selection:"transferAisleLocation"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(p((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"adjustmentQuantity",label:"Quantity","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"em-input",r)))),t.buffer.push('        \n    </div>\n    <div class="row">\n        '),t.buffer.push(p((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"dateCompleted",label:"Date Transferred","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):h.call(e,"date-picker",r)))),t.buffer.push("\n    </div>\n"),i}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/inventory/transfer/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/invoices/add-line-item/controller",["hospitalrun/mixins/billing-categories","ember","hospitalrun/mixins/is-update-disabled","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=r.ObjectController.extend(n,i,{needs:["invoices","invoices/edit"],billingCategoryList:r.computed.alias("controllers.invoices.billingCategoryList"),editController:r.computed.alias("controllers.invoices/edit"),title:"Add Line Item",updateButtonText:"Add",updateButtonAction:"add",showUpdateButton:!0,actions:{cancel:function(){this.send("closeModal")},add:function(){this.get("model").save().then(function(e){this.get("editController").send("addLineItem",e)}.bind(this))}},billingCategories:function(){var e=this.get("defaultBillingCategories"),t=this.get("billingCategoryList");return r.isEmpty(t)?r.Object.create({value:e}):t}.property("billingCategoryList","defaultBillingCategories")})}),define("hospitalrun/invoices/add-line-item/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"name",label:"Name","class":"required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"category","class":"required",label:"Category",list:"billingCategories",selection:"category"},hashTypes:{property:"STRING","class":"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,"class":e,label:e,list:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"select-or-typeahead",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/invoices/add-line-item/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/invoices/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete Invoice"})}),define("hospitalrun/invoices/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete <b>'),i=a._triageMustache.call(t,"displayInvoiceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("</b>?\n</div>"),o})}),define("hospitalrun/invoices/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/invoices/detail-item/controller",["ember","hospitalrun/mixins/number-format","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:"invoices",expenseAccountList:a.computed.alias("controllers.invoices.expenseAccountList.value"),canAddCharge:function(){return this.parentController.get("canAddCharge")}.property(),detailDiscountChanged:function(){var e=this.get("discount");a.isEmpty(e)||this.set("discountPercentage")}.observes("discount")})}),define("hospitalrun/invoices/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/number-format","hospitalrun/mixins/patient-submodule","hospitalrun/mixins/publish-statuses","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{needs:["invoices","pouchdb"],expenseAccountList:o.computed.alias("controllers.invoices.expenseAccountList.value"),patientList:o.computed.alias("controllers.invoices.patientList"),pharmacyCharges:[],pricingProfiles:o.computed.alias("controllers.invoices.pricingProfiles"),supplyCharges:[],updateCapability:"add_invoice",wardCharges:[],additionalButtons:function(){var e=[],t=this.get("isValid"),s=this.get("status");return t&&"Draft"===s&&e.push({"class":"btn btn-default default",buttonAction:"finalizeInvoice",buttonIcon:"glyphicon glyphicon-ok",buttonText:"Invoice Ready"}),e.push({"class":"btn btn-default neutral",buttonAction:"printInvoice",buttonIcon:"glyphicon glyphicon-print",buttonText:"Print"}),e}.property("isValid","status"),canAddCharge:function(){return this.currentUserCan("add_charge")}.property(),canAddPayment:function(){return this.currentUserCan("add_payment")}.property(),pharmacyExpenseAccount:function(){var e=this.get("expenseAccountList"),t=e.find(function(e){return e.toLowerCase().indexOf("pharmacy")>-1?!0:void 0});return t}.property("expenseAccountList.value"),actions:{addLineItem:function(e){var t=this.get("lineItems");t.addObject(e),this.send("update",!0),this.send("closeModal")},deleteCharge:function(e){e.deleteFrom.removeObject(e.itemToDelete),e.itemToDelete.get("isNew")||e.itemToDelete.destroyRecord(),this.send("update",!0),this.send("closeModal")},deleteLineItem:function(e){var t=this.get("lineItems");t.removeObject(e.itemToDelete),e.itemToDelete.get("isNew")||e.itemToDelete.destroyRecord(),this.send("update",!0),this.send("closeModal")},finalizeInvoice:function(){var e=this.get("payments"),t=[];this.get("patient.payments").then(function(s){s.forEach(function(s){var a=s.get("invoice");o.isEmpty(a)&&(s.set("invoice",a),t.push(s),e.addObject(s))}.bind(this)),this.set("status","Billed"),this.send("update")}.bind(this))},printInvoice:function(){this.transitionToRoute("print.invoice",this.get("model"))},removePayment:function(e){var t=this.get("payments"),s=e.itemToRemove;s.set("invoice"),t.removeObject(e.itemToRemove),this.send("update",!0),this.send("closeModal")},showAddLineItem:function(){var e=this.store.createRecord("billing-line-item",{});this.send("openModal","invoices.add-line-item",e)},showRemovePayment:function(e){var t="Are you sure you want to remove this payment from this invoice?",s=o.Object.create({itemToRemove:e}),a="Remove Payment";this.displayConfirm(a,t,"removePayment",s)}},changePaymentProfile:function(){var e=this.get("patient"),t=this.get("paymentProfile");!o.isEmpty(e)&&o.isEmpty(t)&&this.set("paymentProfile",e.get("paymentProfile"))}.observes("patient"),paymentProfileChanged:function(){var e=this._getValidNumber(this.get("paymentProfile.discountPercentage")),t=this.get("originalPaymentProfileId"),s=this.get("paymentProfile.id");if(s!==t){var a=this.get("lineItems");a.forEach(function(t){var a=t.get("details"),n=0;a.forEach(function(t){var a=t.get("total"),r=!1,i=t.get("pricingItem.pricingOverrides");if(!o.isEmpty(i)){var l=i.findBy("profile.id",s);o.isEmpty(l)||(o.set(t,"discount",this._numberFormat(a-l.get("price"),!0)),r=!0)}!r&&a>0&&(o.set(t,"discountPercentage",e/100),o.set(t,"discount",this._numberFormat(e/100*a,!0))),n+=this._getValidNumber(o.get(t,"discount"))}.bind(this)),t.set("discount",this._numberFormat(n,!0))}.bind(this)),this.set("originalPaymentProfileId",s)}}.observes("paymentProfile"),visitChanged:function(){var e=this.get("visit"),t=this.get("lineItems");if(!o.isEmpty(e)&&o.isEmpty(t)){this.set("originalPaymentProfileId");var s=this.resolveVisitChildren();o.RSVP.allSettled(s,"Resolved visit children before generating invoice").then(function(t){var s=this._resolveVisitDescendents(t,"charges");if(o.isEmpty(s))this._generateLineItems(e,t),this.paymentProfileChanged();else{var a="Reloaded charges before generating invoice";o.RSVP.allSettled(s,a).then(function(s){var n=[];s.forEach(function(e){if(!o.isEmpty(e.value)){var t=e.value.get("pricingItem");o.isEmpty(t)||n.push(t.reload())}}),a="Reloaded pricing items before generating invoice",o.RSVP.allSettled(n,a).then(function(){this._generateLineItems(e,t),this.paymentProfileChanged()}.bind(this))}.bind(this))}}.bind(this),function(e){console.log("Error resolving visit children",e)})}}.observes("visit"),_addPharmacyCharge:function(e,t){var s=e.get(t),a=s.get("price"),n=e.get("quantity"),r=this.get("pharmacyCharges"),i=this.get("pharmacyExpenseAccount"),o=this.store.createRecord("line-item-detail",{name:s.get("name"),quantity:n,price:a,department:"Pharmacy",expenseAccount:i});r.addObject(o)},_addSupplyCharge:function(e,t){var s=this.get("supplyCharges"),a=this._createChargeItem(e,t);s.addObject(a)},_createChargeItem:function(e,t){var s=this.store.createRecord("line-item-detail",{name:e.get("pricingItem.name"),expenseAccount:e.get("pricingItem.expenseAccount"),quantity:e.get("quantity"),price:e.get("pricingItem.price"),department:t,pricingItem:e.get("pricingItem")});return s},_mapWardCharge:function(e){return this._createChargeItem(e,"Ward")},_completeBeforeUpdate:function(e,t,s){var a,n="inv";e.incrementProperty("value",1),a=e.get("value"),n+=1e5>a?String("00000"+a).slice(-5):a,this.set("id",n),e.save().then(t,s)},_generateLineItems:function(e,t){var s,a,n=e.get("endDate"),r=t[0].value,i=t[1].value,l=this.get("lineItems"),u=t[2].value,h=t[3].value,p=e.get("startDate"),c=e.get("charges");if(this.setProperties({pharmacyCharges:[],supplyCharges:[],wardCharges:[]}),!o.isEmpty(n)&&!o.isEmpty(p)){n=moment(n),p=moment(p);var d=n.diff(p,"days");d>1&&(s=this.store.createRecord("line-item-detail",{name:"Days",quantity:d}),a=this.store.createRecord("billing-line-item",{category:"Hospital Charges",name:"Room/Accomodation"}),a.get("details").addObject(s),l.addObject(a))}u.forEach(function(e){this._addPharmacyCharge(e,"inventoryItem")}.bind(this)),this.set("wardCharges",c.map(this._mapWardCharge.bind(this))),h.forEach(function(e){var t=e.get("charges");t.forEach(function(e){e.get("medicationCharge")?this._addPharmacyCharge(e,"medication"):this._addSupplyCharge(e,"O.R.")}.bind(this))}.bind(this)),i.forEach(function(e){o.isEmpty(r.get("labType"))||this._addSupplyCharge(o.Object.create({pricingItem:r.get("labType"),quantity:1}),"Lab"),e.get("charges").forEach(function(e){this._addSupplyCharge(e,"Lab")}.bind(this))}.bind(this)),r.forEach(function(e){o.isEmpty(e.get("imagingType"))||this._addSupplyCharge(o.Object.create({pricingItem:e.get("imagingType"),quantity:1}),"Imaging"),e.get("charges").forEach(function(e){this._addSupplyCharge(e,"Imaging")}.bind(this))}.bind(this)),a=this.store.createRecord("billing-line-item",{name:"Pharmacy",category:"Hospital Charges"}),a.get("details").addObjects(this.get("pharmacyCharges")),l.addObject(a),a=this.store.createRecord("billing-line-item",{name:"X-ray/Lab/Supplies",category:"Hospital Charges"}),a.get("details").addObjects(this.get("supplyCharges")),l.addObject(a),a=this.store.createRecord("billing-line-item",{name:"Others/Misc",category:"Hospital Charges"}),a.get("details").addObjects(this.get("wardCharges")),l.addObject(a),this.send("update",!0)},_resolveVisitDescendents:function(e,t){var s=[];return e.forEach(function(e){o.isEmpty(e.value)||e.value.forEach(function(e){var a=e.get(t);o.isEmpty(a)||a.forEach(function(e){s.push(e.reload())})})}),s},beforeUpdate:function(){return new o.RSVP.Promise(function(e,t){var s=this.get("lineItems"),a=[];s.forEach(function(e){e.get("details").forEach(function(e){a.push(e.save())}.bind(this)),a.push(e.save())}.bind(this)),o.RSVP.all(a,"Saved invoice children before saving invoice").then(function(){this.get("isNew")?this.store.find("sequence","invoice").then(function(s){this._completeBeforeUpdate(s,e,t)}.bind(this),function(){var s=this.get("store").push("sequence",{id:"invoice",value:0});this._completeBeforeUpdate(s,e,t)}.bind(this)):e()}.bind(this),t)}.bind(this))},afterUpdate:function(e){var t="The invoice record has been saved.".fmt(e.get("displayName"));this.displayAlert("Invoice Saved",t)}})}),define("hospitalrun/mixins/publish-statuses",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({publishStatuses:["Draft","Published","Private","Archived"]})}),define("hospitalrun/invoices/edit/route",["hospitalrun/routes/abstract-edit-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({editTitle:"Edit Invoice",modelName:"invoice",newTitle:"New Invoice",actions:{deleteCharge:function(e){this.controller.send("deleteCharge",e)},deleteLineItem:function(e){this.controller.send("deleteLineItem",e)},removePayment:function(e){this.controller.send("removePayment",e)}},afterModel:function(e){return new n.RSVP.Promise(function(t,s){var a=e.get("lineItems"),r=[];a.forEach(function(e){r.push(e.reload())}),n.RSVP.all(r,"Reload billing line items for invoice").then(function(e){var a=[];e.forEach(function(e){e.get("details").forEach(function(e){a.push(e.reload())})}),n.RSVP.all(a,"Reload billing line item details for invoice").then(t,s)},s)})},getNewData:function(){return n.RSVP.resolve({billDate:new Date,status:"Draft"})},setupController:function(e,t){t.set("originalPaymentProfileId",t.get("paymentProfile.id")),this._super(e,t);var s=t.get("lineItems"),a=[];s.forEach(function(e){e.get("details").forEach(function(e){var t=e.get("pricingItem");n.isEmpty(t)||a.push(t.reload())})})}})}),define("hospitalrun/invoices/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="row">\n        '),s=a.unless.call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),t.buffer.push(N((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"billDate",label:"Bill Date","class":"col-xs-2"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"date-picker",r)))),t.buffer.push("\n        "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:_.program(6,u,t),fn:_.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(N((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"externalInvoiceNumber",label:"External Invoice #","class":"col-xs-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"em-input",r)))),t.buffer.push("\n        "),t.buffer.push(N((n=a["em-select"]||e&&e["em-select"],r={hash:{label:"Payment Profile",property:"paymentProfile",content:"pricingProfiles",optionValuePath:"content",optionLabelPath:"content.name","class":"col-xs-3",prompt:" ",selected:"paymentProfile"},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING","class":"STRING",prompt:"STRING",selected:"ID"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,"class":e,prompt:e,selected:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"em-select",r)))),t.buffer.push("\n    </div>\n"),i}function o(e,t){var s,n="";return t.buffer.push('\n            <div class="form-group col-xs-2">\n                <label>Invoice Id</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"id",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>        \n        "),n}function l(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(N((s=a["patient-typeahead"]||e&&e["patient-typeahead"],n={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"col-xs-4 required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):S.call(e,"patient-typeahead",n)))),t.buffer.push("\n            "),t.buffer.push(N((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-xs-4 required",label:"Visit",property:"visit",content:"patientVisits",optionValuePath:"content",optionLabelPath:"content.visitDescription",selected:"visit",prompt:"Please select a visit"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID",prompt:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):S.call(e,"em-select",n)))),t.buffer.push("                \n        "),r}function u(e,t){var s,n="";return t.buffer.push('\n            <div class="form-group col-xs-3">\n                <label>Patient</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>\n            </div>\n            <div class="form-group col-xs-3">\n                <label>Visit</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"visit.visitDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>        \n        "),n}function h(e,t){var s="";return t.buffer.push('\n                    <button class="btn btn-primary align-right" '),t.buffer.push(N(a.action.call(e,"showAddLineItem",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Line Item</button>\n                '),s}function p(e,t){var s,n,r,i="";return t.buffer.push(' \n                    <tr>\n                        <td colspan="7">\n                            <strong>'),s=a._triageMustache.call(e,"category",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</strong>\n                        </td>\n                    </tr>\n                    "),s=a.each.call(e,"items",{hash:{itemController:"invoices/line-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:_.noop,fn:_.program(11,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    <tr>\n                        <td>\n                            <strong>Total "),s=a._triageMustache.call(e,"category",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</strong>\n                        </td>\n                        <td class="text-right">'),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"total",r):S.call(e,"number-format","total",r)))),t.buffer.push('</td>\n                        <td class="text-right">'),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"discount",r):S.call(e,"number-format","discount",r)))),t.buffer.push('</td>\n                        <td class="text-right">'),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"nationalInsurance",r):S.call(e,"number-format","nationalInsurance",r)))),t.buffer.push('</td>\n                        <td class="text-right">'),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"privateInsurance",r):S.call(e,"number-format","privateInsurance",r)))),t.buffer.push('</td>\n                        <td class="text-right">'),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"amountOwed",r):S.call(e,"number-format","amountOwed",r)))),t.buffer.push("</td>                            \n                        <td></td>\n                    </tr>\n                "),i}function c(e,t){var s,n,r,i="";return t.buffer.push('\n                        <tr>\n                            <td class="col-xs-5">\n                                <div class="form-group">\n                                    <div class="input-group">\n                                        <span '),t.buffer.push(N(a["bind-attr"].call(e,{hash:{"class":":input-group-addon :glyphicon showDetails:glyphicon-minus:glyphicon-plus"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(" \n                                            "),t.buffer.push(N(a.action.call(e,"toggleDetails",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push("> </span>\n                                        <strong>"),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"name"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('</strong>\n                                    </div>\n                                </div>                                \n                            </td>\n                            <td class="col-xs-1">\n                                <div class="form-group">\n                                    '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control text-right",value:"total"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                </div>\n                            </td>\n                            <td class="col-xs-1">\n                                <div class="form-group">\n                                    '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control text-right",value:"discount"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                </div>\n                            </td>\n                            <td class="col-xs-1">\n                                <div class="form-group">\n                                    '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control text-right",value:"nationalInsurance"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                </div>\n                            </td>\n                            <td class="col-xs-1">\n                                <div class="form-group">\n                                    '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control text-right",value:"privateInsurance"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                </div>\n                            </td>\n                            <td class="col-xs-1 text-right">'),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"amountOwed",r):S.call(e,"number-format","amountOwed",r)))),t.buffer.push('</td>\n                            <td class="col-xs-2">\n                                '),s=a["if"].call(e,"canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(12,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            </td>\n                        </tr>\n                        "),s=a["if"].call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(14,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i
}function d(e,t){var s="";return t.buffer.push('     \n                                    <button class="btn btn-default warning" '),t.buffer.push(N(a.action.call(e,"showDeleteLineItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                        <span class="octicon octicon-x"></span>Delete\n                                    </button>\n                                '),s}function f(e,t){var s,n="";return t.buffer.push('                            \n                            <tr>\n                                <th>Name</th>\n                                <th>Quantity</th>\n                                <th>Price</th>\n                                <th>Discount</th>\n                                <th>Expense Account</th>\n                                <th class="col-xs-1 text-right">Total</th>\n                                <th>\n                                    '),s=a["if"].call(e,"canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(15,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </th>\n                            </tr>\n                            "),s=a.each.call(e,"details",{hash:{itemController:"invoices/detail-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:_.noop,fn:_.program(17,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),n}function m(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-primary" '),t.buffer.push(N(a.action.call(e,"addCharge","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                            <span class="octicon octicon-plus"></span>Add Charge\n                                        </button>\n                                    '),s}function b(e,t){var s,n,r,i="";return t.buffer.push('\n                                <tr>\n                                    <td class="col-xs-5">\n                                        <div class="form-group">\n                                            '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"name"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                        </div>\n                                    </td>                                \n                                    <td class="col-xs-1">\n                                        <div class="form-group">\n                                            '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"quantity"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                        </div>\n                                    </td>\n                                    <td class="col-xs-1">\n                                        <div class="form-group">\n                                            '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"price"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                        </div>\n                                    </td>\n                                    <td class="col-xs-1">\n                                        <div class="form-group">\n                                            '),t.buffer.push(N((n=a.input||e&&e.input,r={hash:{"class":"form-control",value:"discount"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":e,value:e},contexts:[],types:[],data:t},n?n.call(e,r):S.call(e,"input",r)))),t.buffer.push('\n                                        </div>\n                                    </td>\n                                    <td class="col-xs-1">\n                                        <div class="form-group">\n                                            '),t.buffer.push(N(a.view.call(e,"Ember.Select",{hash:{"class":"form-control",content:"expenseAccountList",optionValuePath:"content",optionLabelPath:"content",value:"expenseAccount"},hashTypes:{"class":"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",value:"ID"},hashContexts:{"class":e,content:e,optionValuePath:e,optionLabelPath:e,value:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\n                                        </div>\n                                    </td>\n                                    <td class="col-xs-1 text-right">\n                                        '),t.buffer.push(N((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"amountOwed",r):S.call(e,"number-format","amountOwed",r)))),t.buffer.push('\n                                    </td>\n                                    <td class="col-xs-3">\n                                        '),s=a["if"].call(e,"canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(18,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </td>\n                                </tr>\n                            "),i}function y(e,t){var s="";return t.buffer.push('                            \n                                            <button class="btn btn-default warning" '),t.buffer.push(N(a.action.call(e,"showDeleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                                <span class="octicon octicon-x"></span>Delete\n                                            </button>\n                                        '),s}function g(e,t){var s="";return t.buffer.push('\n                <button class="btn btn-primary align-right" '),t.buffer.push(N(a.action.call(e,"showAddPayment","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Payment</button>\n            '),s}function v(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr "),t.buffer.push(N(a.action.call(e,"showEditPayment","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    <td>"),t.buffer.push(N((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"datePaid",r):S.call(e,"date-format","datePaid",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"type",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    "),s=a["if"].call(e,"parentController.canAddPayment",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(23,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),i}function x(e,t){var s,n="";return t.buffer.push('\n                        <td>\n                            <button class="btn btn-default neutral" '),t.buffer.push(N(a.action.call(e,"showEditPayment","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                            "),s=a["if"].call(e,"canRemovePayment",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(24,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </td>\n                    "),n}function T(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default warning" '),t.buffer.push(N(a.action.call(e,"showRemovePayment","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                    <span class="octicon octicon-x"></span>Remove\n                                </button>\n                            '),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var I,D,C,R="",S=a.helperMissing,N=this.escapeExpression,_=this;return D=a["em-form"]||t&&t["em-form"],C={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:_.noop,fn:_.program(1,i,r),contexts:[],types:[],data:r},I=D?D.call(t,C):S.call(t,"em-form",C),(I||0===I)&&r.buffer.push(I),r.buffer.push('\n<form class="form-inline">\n    <div class="panel detail-section">\n        <div class="panel-heading">\n            <h3 class="panel-title">\n                Line Items\n                '),I=a["if"].call(t,"canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(8,h,r),contexts:[t],types:["ID"],data:r}),(I||0===I)&&r.buffer.push(I),r.buffer.push('\n            </h3>\n        </div>\n        <div class="panel-body detail-section-content">\n            <table class="table">\n                <tr class="table-header">\n                    <th>Description</th>\n                    <th class="text-right">Actual Charges</th>\n                    <th class="text-right">Discount</th>\n                    <th class="text-right">PhilHealth</th>\n                    <th class="text-right">HMO/COM</th>\n                    <th class="text-right">Excess</th>\n                    <th class="text-right">Action</th>\n                </tr>\n                \n                '),I=a.each.call(t,"lineItemsByCategory",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(10,p,r),contexts:[t],types:["ID"],data:r}),(I||0===I)&&r.buffer.push(I),r.buffer.push('\n                 <tr>\n                    <td>\n                        <strong>Total</strong>\n                    </td>\n                    <td class="text-right">'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"total",C):S.call(t,"number-format","total",C)))),r.buffer.push('</td>\n                    <td class="text-right">'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"discount",C):S.call(t,"number-format","discount",C)))),r.buffer.push('</td>\n                    <td class="text-right">'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"ationalInsurance",C):S.call(t,"number-format","ationalInsurance",C)))),r.buffer.push('</td>\n                    <td class="text-right">'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"privateInsurance",C):S.call(t,"number-format","privateInsurance",C)))),r.buffer.push('</td>\n                    <td class="text-right">'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"patientResponsibility",C):S.call(t,"number-format","patientResponsibility",C)))),r.buffer.push('</td>                            \n                    <td></td>\n                </tr>\n                <tr>\n                    <td>\n                        <strong>Payments/Deposits</strong>\n                    </td>\n                    <td colspan="4"></td>\n                    <td class="text-right">-'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"paidTotal",C):S.call(t,"number-format","paidTotal",C)))),r.buffer.push('</td>                            \n                    <td></td>\n                </tr>\n                <tr>\n                    <td>\n                        <strong>Grand Total</strong>\n                    </td>\n                    <td colspan="4"></td>\n                    <td class="text-right">'),r.buffer.push(N((D=a["number-format"]||t&&t["number-format"],C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},D?D.call(t,"remainingBalance",C):S.call(t,"number-format","remainingBalance",C)))),r.buffer.push('</td>                            \n                    <td></td>\n                </tr>\n            </table>\n        </div>\n    </div>\n</form>\n<div class="panel detail-section">\n    <div class="panel-heading">\n        <h3 class="panel-title">\n            Payments\n            '),I=a["if"].call(t,"canAddPayment",{hash:{},hashTypes:{},hashContexts:{},inverse:_.noop,fn:_.program(20,g,r),contexts:[t],types:["ID"],data:r}),(I||0===I)&&r.buffer.push(I),r.buffer.push('\n        </h3>\n    </div>\n    <div class="panel-body detail-section-content">\n        <table class="table">\n            <tr class="table-header">\n                <th>Date</th>\n                <th>Amount</th>\n                <th>Type</th>\n                <th>Notes</th>\n                <th>Action</th>\n            </tr>\n            '),I=a.each.call(t,"payments",{hash:{itemController:"invoices/payment-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:t},inverse:_.noop,fn:_.program(22,v,r),contexts:[t],types:["ID"],data:r}),(I||0===I)&&r.buffer.push(I),r.buffer.push("\n        </table>\n    </div>\n</div>"),R})}),define("hospitalrun/invoices/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/invoices/index/controller",["hospitalrun/controllers/abstract-paged-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addPermission:"add_invoice",deletePermission:"delete_invoice",canAddPayment:function(){return this.currentUserCan("add_payment")}.property(),startKey:[],queryParams:["startKey","status"]})}),define("hospitalrun/invoices/index/route",["hospitalrun/routes/abstract-index-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({modelName:"invoice",pageTitle:"Invoice Listing",_getStartKeyFromItem:function(e){var t=e.get("labDateAsTime"),s=this.get("keyPrefix"),a=e.get("status");return[a,t,s+e.get("id")]},_modelQueryParams:function(e){var t,s=this.get("keyPrefix"),a=this.get("maxValue"),r=e.status;return n.isEmpty(r)&&(r="Billed"),this.set("pageTitle","%@ Invoices".fmt(r)),t={options:{startkey:[r,null,s],endkey:[r,a,s+a]},mapReduce:"invoice_by_status"},"All"===r&&(t.options.startkey[0]=null,t.options.endkey[0]=a),t},queryParams:{startKey:{refreshModel:!0},status:{refreshModel:!0}}})}),define("hospitalrun/invoices/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Number</th>\n            <th>Bill Date</th>\n            <th>Status</th>\n            <th>Patient</th>\n            <th>Total</th>\n            <th>Balance Due</th>            \n            '),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a.each.call(e,{hash:{itemController:"invoices/invoice-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:b.noop,fn:b.program(4,l,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n,r,i="";return t.buffer.push("\n            <tr "),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                <td>"),s=a._triageMustache.call(e,"displayInvoiceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),t.buffer.push(m((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"billDate",r):y.call(e,"date-format","billDate",r)))),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"patient.displayPatientId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" <br>"),s=a._triageMustache.call(e,"visit.primaryDiagnosis",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"total",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"remainingBalance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>\n                    "),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </td>\n            </tr>            \n        "),i}function u(e,t){var s,n="";return t.buffer.push(" \n                        "),s=a["if"].call(e,"parentController.canAddPayment",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"parentController.canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"parentController.canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(10,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n}function h(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default neutral" '),t.buffer.push(m(a.action.call(e,"showAddPayment","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                <span class="octicon octicon-plus"></span> Add Payment\n                            </button>\n                        '),s}function p(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default neutral" '),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                        "),s}function c(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default warning" '),t.buffer.push(m(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                        '),s}function d(e,t){var s="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No invoices found.  Create an invoice?</em> <button class="btn btn-primary" '),t.buffer.push(m(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Invoice</button>\n    </div>\n"),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m=this.escapeExpression,b=this,y=a.helperMissing;f=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(12,d,r),fn:b.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(f||0===f?f:"")})}),define("hospitalrun/invoices/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Invoice Listing",newButtonText:"New Invoice"})}),define("hospitalrun/invoices/invoice-item/controller",["ember","hospitalrun/mixins/number-format","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{showActions:function(){var e=this.parentController.get("showActions");if(e){var t=this.get("status");return"Paid"===t?!1:!0}}.property("status")})}),define("hospitalrun/invoices/line-item/controller",["ember","hospitalrun/mixins/number-format","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{canAddCharge:function(){return this.parentController.get("canAddCharge")}.property(),actions:{addCharge:function(){var e=this.get("details"),t=this.store.createRecord("line-item-detail");e.addObject(t)},deleteCharge:function(e){var t=this.get("details");t.removeObject(e.itemToDelete),this.send("update",!0),this.send("closeModal")},showDeleteItem:function(e){this.send("openModal","dialog",a.Object.create({confirmAction:"deleteCharge",deleteFrom:this.get("details"),title:"Delete Charge",message:"Are you sure you want to delete %@?".fmt(e.name),itemToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))},showDeleteLineItem:function(e){this.send("openModal","dialog",a.Object.create({confirmAction:"deleteLineItem",title:"Delete Line Item",message:"Are you sure you want to delete %@?".fmt(e.name),itemToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))},toggleDetails:function(){this.toggleProperty("showDetails")}}})}),define("hospitalrun/invoices/payment-item/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({canRemovePayment:function(){return"Deposit"===this.get("type")}.property()})}),define("hospitalrun/invoices/payment/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{cancelAction:"closeModal",findPatientVisits:!1,needs:["invoices"],expenseAccountList:r.computed.alias("controllers.invoices.expenseAccountList"),patientList:r.computed.alias("controllers.invoices.patientList"),_finishUpdate:function(e,t){this.send("closeModal"),this.displayAlert(t,e)},currentPatient:function(){var e=this.get("type");return this.get("Deposit"===e?"patient":"invoice.patient")}.property("patient","type","invoice.patient"),title:function(){var e=this.get("isNew"),t=this.get("type");return e?"Add %@".fmt(t):"Edit %@".fmt(t)}.property("isNew","type"),selectPatient:function(){var e=this.get("isNew"),t=this.get("type");return e&&"Deposit"===t}.property("isNew","type"),beforeUpdate:function(){this.get("isNew")?this.set("newPayment",!0):this.set("newPayment",!1);var e=this.get("currentPatient");return this.set("charityPatient","Charity"===e.get("patientType")),r.RSVP.resolve()},afterUpdate:function(){this.get("model").save().then(function(e){if(this.get("newPayment")){var t=this.get("currentPatient");t.get("payments").then(function(s){s.addObject(e),t.save().then(function(){if("Deposit"===e.get("type")){var s="A deposit of %@ was added for patient %@".fmt(e.get("amount"),t.get("displayName"));this._finishUpdate(s,"Deposit Added")}else{var a=this.get("invoice");a.addPayment(e),a.save().then(function(){var t="A payment of %@ was added to invoice %@".fmt(e.get("amount"),a.get("id"));this._finishUpdate(t,"Payment Added")}.bind(this))}}.bind(this))}.bind(this))}else this.send("closeModal")}.bind(this))}})}),define("hospitalrun/invoices/payment/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),t.buffer.push(f((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"amount",label:"Amount","class":"required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-input",r)))),t.buffer.push("\n    "),t.buffer.push(f((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"datePaid",label:"Date Paid",maxDate:"now","class":"required"},hashTypes:{property:"STRING",label:"STRING",maxDate:"STRING","class":"STRING"},hashContexts:{property:e,label:e,maxDate:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"date-picker",r)))),t.buffer.push("\n    "),t.buffer.push(f((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"expenseAccount",label:"Credit To",list:"expenseAccountList",selection:"expenseAccount"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    "),t.buffer.push(f((n=a["em-text"]||e&&e["em-text"],r={hash:{property:"notes",label:"Notes"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"em-text",r)))),t.buffer.push("\n"),i}function o(e,t){var s,n="";return t.buffer.push("\n            "),s=a["if"].call(e,"selectPatient",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(5,u,t),fn:m.program(3,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),n}function l(e,t){var s,n,r="";return t.buffer.push("\n                "),t.buffer.push(f((s=a["patient-typeahead"]||e&&e["patient-typeahead"],n={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"patient-typeahead",n)))),t.buffer.push("\n            "),r}function u(e,t){var s,n="";return t.buffer.push('\n                <div class="form-group">\n                    <label>Patient</label>\n                    <p class="form-control-static">'),s=a._triageMustache.call(e,"invoice.patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n                </div>\n            "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p,c,d=a.helperMissing,f=this.escapeExpression,m=this;p=a["em-form"]||t&&t["em-form"],c={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:m.noop,fn:m.program(1,i,r),contexts:[],types:[],data:r},h=p?p.call(t,c):d.call(t,"em-form",c),r.buffer.push(h||0===h?h:"")})}),define("hospitalrun/invoices/payment/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/invoices/route",["hospitalrun/routes/abstract-module-route","hospitalrun/mixins/modal-helper","hospitalrun/mixins/patient-list-route","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(r,i,{addCapability:"add_invoice",currentScreenTitle:"Invoices",editTitle:"Edit Invoice",newTitle:"New Invoice",moduleName:"invoices",newButtonText:"+ new invoice",sectionTitle:"Invoices",additionalButtons:function(){return this.currentUserCan("add_payment")?[{"class":"btn btn-default",buttonText:"+ add deposit",buttonAction:"showAddDeposit"}]:void 0}.property(),additionalModels:[{name:"billingCategoryList",findArgs:["lookup","billing_categories"]},{name:"expenseAccountList",findArgs:["lookup","expense_account_list"]},{name:"pricingProfiles",findArgs:["price-profile"]}],actions:{showAddDeposit:function(){var e=this.store.createRecord("payment",{type:"Deposit",datePaid:new Date});this.send("openModal","invoices.payment",e)},showAddPayment:function(e){var t=this.store.createRecord("payment",{invoice:e,type:"Payment",datePaid:new Date});this.send("openModal","invoices.payment",t)},showEditPayment:function(e){this.currentUserCan("add_payment")&&this.send("openModal","invoices.payment",e)}},subActions:function(){var e=[{text:"Billed",linkTo:"invoices.index",statusQuery:"Billed"}];return this.currentUserCan("add_invoice")&&(e.push({text:"Drafts",linkTo:"invoices.index",statusQuery:"Draft"}),e.push({text:"All Invoices",linkTo:"invoices.index",statusQuery:"All"})),e.push({text:"Paid",linkTo:"invoices.index",statusQuery:"Paid"}),e}.property()})}),define("hospitalrun/invoices/search/route",["hospitalrun/routes/abstract-search-route","hospitalrun/utils/invoice-search","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({moduleName:"invoices",searchKeys:["externalInvoiceNumber","patientInfo"],searchIndex:n,searchModel:"invoice"})}),define("hospitalrun/utils/invoice-search",["exports"],function(e){"use strict";e["default"]={fields:["patientInfo","externalInvoiceNumber"],filter:function(e){var t=e._id.indexOf("_"),s=e._id.substring(0,t);return"invoice"===s}}}),define("hospitalrun/invoices/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(u((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"invoices/index",n):l.call(e,"partial","invoices/index",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.view.call(t,"search-listing",{hash:{newButtonText:"New Invoice",allButtonText:"All Invoices"},hashTypes:{newButtonText:"STRING",allButtonText:"STRING"},hashContexts:{newButtonText:t,allButtonText:t},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["STRING"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/labs/charge/controller",["hospitalrun/procedures/charge/controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:["labs/edit"],cancelAction:"closeModal",newPricingItem:!1,requestingController:n.computed.alias("controllers.labs/edit"),pricingList:n.computed.alias("controllers.labs/edit.chargesPricingList")})
}),define("hospitalrun/labs/charge/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o,l=a.helperMissing,u=this.escapeExpression;r.buffer.push(u((i=a.partial||t&&t.partial,o={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},i?i.call(t,"procedures/charge",o):l.call(t,"partial","procedures/charge",o))))})}),define("hospitalrun/labs/charge/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/labs/completed/controller",["hospitalrun/controllers/abstract-paged-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({startKey:[],showActions:!1})}),define("hospitalrun/labs/completed/route",["hospitalrun/labs/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({pageTitle:"Completed Labs",searchStatus:"Completed"})}),define("hospitalrun/labs/index/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"lab",pageTitle:"Lab Requests",searchStatus:"Requested",_getStartKeyFromItem:function(e){var t=e.get("labDateAsTime"),s=this.get("keyPrefix"),a=e.get("requestedDateAsTime"),n=this.get("searchStatus");return[n,a,t,s+e.get("id")]},_modelQueryParams:function(){var e=this.get("keyPrefix"),t=this.get("maxValue"),s=this.get("searchStatus");return{options:{startkey:[s,null,null,e],endkey:[s,t,t,e+t]},mapReduce:"lab_by_status"}},actions:{completeItem:function(e){e.set("isCompleting",!0),this.transitionTo("labs.edit",e)}}})}),define("hospitalrun/labs/completed/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Date Requested</th>\n            <th>Date Completed</th>\n            <th>Patient</th>\n            <th>Lab Type</th>\n            <th>Results</th>\n            <th>Notes</th>            \n        </tr>\n            '),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(2,o,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("        \n    </table>\n"),n}function o(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr>\n                    <td>"),t.buffer.push(p((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):h.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                    <td>"),t.buffer.push(p((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"labDate",r):h.call(e,"date-format","labDate",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"labType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"result",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                </tr>\n            "),i}function l(e,t){t.buffer.push('\n    <div class="alert alert-info">\n        <em>No completed items found.</em>\n    </div>\n')}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h=a.helperMissing,p=this.escapeExpression,c=this;u=a["if"].call(t,"model",{hash:{},hashTypes:{},hashContexts:{},inverse:c.program(4,l,r),fn:c.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(u||0===u?u:"")})}),define("hospitalrun/labs/completed/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/labs/delete/controller",["hospitalrun/controllers/abstract-delete-controller","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{title:"Delete Request",actions:{"delete":function(){this.removeChildFromVisit(this.get("model"),"labs").then(function(){this.get("model").destroyRecord().then(function(){this.send("closeModal")}.bind(this))}.bind(this))}}})}),define("hospitalrun/labs/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete this lab request?\n</div>')})}),define("hospitalrun/labs/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/labs/edit/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/charge-actions","ember","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{needs:["labs","pouchdb"],chargePricingCategory:"Lab",chargeRoute:"labs.charge",canComplete:function(){return this.currentUserCan("complete_lab")}.property(),actions:{completeLab:function(){this.set("status","Completed"),this.get("model").validate(),this.get("isValid")&&(this.set("labDate",new Date),this.send("update"))}},additionalButtons:function(){var e=this.get("canComplete"),t=this.get("isValid");return t&&e?[{buttonAction:"completeLab",buttonIcon:"glyphicon glyphicon-ok","class":"btn btn-primary on-white",buttonText:"Complete"}]:void 0}.property("canComplete","isValid"),pricingTypeForObjectType:"Lab Procedure",pricingTypes:o.computed.alias("controllers.labs.labPricingTypes"),pricingList:null,labTypeChanged:function(){this.objectTypeChanged("labTypeName","labType")}.observes("labType"),labTypeNameChanged:function(){this.objectTypeNameChanged("labTypeName","selectedLabType")}.observes("labTypeName"),showCharges:function(){var e=this.get("labType"),t=this.get("patient"),s=this.get("visit");return!o.isEmpty(e)&&!o.isEmpty(t)&&!o.isEmpty(s)}.property("labType","patient","visit"),updateCapability:"add_lab",selectedLabTypeChanged:function(){this.selectedObjectTypeChanged("selectedLabType","labType")}.observes("selectedLabType"),afterUpdate:function(){var e,t;"Completed"===this.get("status")?(t="Lab Request Completed",e="The lab request has been completed."):(t="Lab Request Saved",e="The lab request has been saved."),this.saveVisitIfNeeded(t,e)},beforeUpdate:function(){return this.get("isValid")?new o.RSVP.Promise(function(e,t){this.updateCharges().then(function(){if(this.get("isNew")){var s=this.get("model");if(this.set("status","Requested"),this.set("requestedBy",s.getUserName()),this.set("requestedDate",new Date),!this.get("newObjectType"))return this.addChildToVisit(s,"labs","Lab").then(e,t);this.saveNewPricing(this.get("labTypeName"),"Lab","labType").then(function(){this.addChildToVisit(s,"labs","Lab").then(e,t)}.bind(this),t)}else e()}.bind(this),t)}.bind(this),"beforeUpdate on lab edit"):o.RSVP.reject()}})}),define("hospitalrun/labs/edit/route",["hospitalrun/routes/abstract-edit-route","hospitalrun/mixins/charge-route","ember","hospitalrun/mixins/patient-list-route","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{editTitle:"Edit Lab Request",modelName:"lab",newTitle:"New Lab Request",pricingCategory:"Lab",getNewData:function(){return o.RSVP.resolve({selectPatient:!0,requestDate:moment().startOf("day").toDate()})}})}),define("hospitalrun/labs/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="row">\n        '),s=a["if"].call(e,"selectPatient",{hash:{},hashTypes:{},hashContexts:{},inverse:x.program(4,l,t),fn:x.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:x.program(8,h,t),fn:x.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n    "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:x.program(12,c,t),fn:x.program(10,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),s=a["if"].call(e,"canComplete",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(14,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),t.buffer.push(v((n=a["em-text"]||e&&e["em-text"],r={hash:{property:"notes",label:"Notes",rows:3},hashTypes:{property:"STRING",label:"STRING",rows:"INTEGER"},hashContexts:{property:e,label:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):g.call(e,"em-text",r)))),t.buffer.push("\n    "),s=a["if"].call(e,"showCharges",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(16,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(v((s=a["patient-typeahead"]||e&&e["patient-typeahead"],n={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"col-xs-3 required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"patient-typeahead",n)))),t.buffer.push("\n        "),r}function l(e,t){var s,n="";return t.buffer.push('\n            <div class="form-group col-xs-3">\n                <label>Patient</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>\n        "),n}function u(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(v((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-xs-3 required",label:"Visit",property:"visit",content:"patientVisits",optionValuePath:"content",optionLabelPath:"content.visitDescription",prompt:"--Add New Visit--",selected:"visit"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"em-select",n)))),t.buffer.push("\n        "),r}function h(e,t){var s,n="";return t.buffer.push('        \n            <div class="form-group col-xs-3">\n                <label>Visit</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"visit.visitDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>\n        "),n}function p(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(v((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"labTypeName",label:"Lab Type",list:"objectTypeList",selection:"selectedLabType",optionLabelPath:"content.name",typeAheadType:"pricing","class":"required",prompt:" "},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID",optionLabelPath:"STRING",typeAheadType:"STRING","class":"STRING",prompt:"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,optionLabelPath:e,typeAheadType:e,"class":e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"select-or-typeahead",n)))),t.buffer.push("\n    "),r}function c(e,t){var s,n="";return t.buffer.push('\n        <div class="form-group">\n            <label>Lab Type</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"labType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n        </div>\n    "),n}function d(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(v((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"result",label:"Result"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):g.call(e,"em-input",n)))),t.buffer.push("\n    "),r}function f(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(v((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"item-charges",n):g.call(e,"partial","item-charges",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var m,b,y,g=a.helperMissing,v=this.escapeExpression,x=this;b=a["em-form"]||t&&t["em-form"],y={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:x.noop,fn:x.program(1,i,r),contexts:[],types:[],data:r},m=b?b.call(t,y):g.call(t,"em-form",y),r.buffer.push(m||0===m?m:"")})}),define("hospitalrun/labs/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/labs/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{startKey:[],addPermission:"add_lab"})}),define("hospitalrun/labs/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Date Requested</th>\n            <th>Patient</th>\n            <th>Lab Type</th>\n            <th>Notes</th>\n            '),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,u,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function u(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr "),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    <td>"),t.buffer.push(m((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):y.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"labType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                     "),s=a["if"].call(e,"parentController.showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),i}function h(e,t){var s,n="";return t.buffer.push("\n                        <td>\n                            "),s=a["if"].call(e,"parentController.canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(7,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </td>\n                    "),n}function p(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default neutral" '),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                            "),s}function c(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No labs found.</em>\n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(10,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function d(e,t){var s="";return t.buffer.push('\n            <em>Create a new record?</em>\n            <button class="btn btn-primary" '),t.buffer.push(m(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Lab</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m=this.escapeExpression,b=this,y=a.helperMissing;f=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(9,c,r),fn:b.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(f||0===f?f:"")})}),define("hospitalrun/labs/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/labs/item-controller/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({actions:{editLab:function(e){this.get("canEdit")&&this.parentController.send("editLab",e)}},canEdit:function(){var e=this.get("status");return"Requested"===e}.property("status")})}),define("hospitalrun/labs/route",["hospitalrun/routes/abstract-module-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addCapability:"add_lab",additionalModels:[{name:"labPricingTypes",findArgs:["lookup","lab_pricing_types"]}],allowSearch:!1,moduleName:"labs",newButtonText:"+ new lab",sectionTitle:"Labs",subActions:[{text:"Requests",linkTo:"labs.index"},{text:"Completed",linkTo:"labs.completed"}]})}),define("hospitalrun/medication/completed/controller",["hospitalrun/controllers/abstract-paged-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({showActions:!1,startKey:[]})}),define("hospitalrun/medication/completed/route",["hospitalrun/medication/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"medication",pageTitle:"Completed Medication",searchStatus:"Fulfilled"})}),define("hospitalrun/medication/index/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"medication",pageTitle:"Medication Requests",searchStatus:"Requested",_getStartKeyFromItem:function(e){var t=e.get("prescriptionDateAsTime"),s=this.get("keyPrefix"),a=e.get("requestedDateAsTime"),n=this.get("searchStatus");return[n,a,t,s+e.get("id")]},_modelQueryParams:function(){var e=this.get("keyPrefix"),t=this.get("maxValue"),s=this.get("searchStatus");return{options:{startkey:[s,null,null,e],endkey:[s,t,t,e+t]},mapReduce:"medication_by_status"}}})}),define("hospitalrun/medication/completed/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({templateName:"medication/index"})}),define("hospitalrun/medication/delete/controller",["hospitalrun/controllers/abstract-delete-controller","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{title:"Delete Request",actions:{"delete":function(){this.removeChildFromVisit(this.get("model"),"medication").then(function(){this.get("model").destroyRecord().then(function(){this.send("closeModal")}.bind(this))}.bind(this))}}})}),define("hospitalrun/medication/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete this medication request?\n</div>')})}),define("hospitalrun/medication/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/medication/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/inventory-selection","hospitalrun/mixins/patient-submodule","hospitalrun/mixins/user-session","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{needs:["medication","pouchdb"],canFulfill:function(){return this.currentUserCan("fulfill_medication")}.property(),durationTypes:["Days","Weeks"],isFulfilling:function(){var e=this.get("canFulfill"),t=this.get("isRequested"),s=this.get("shouldFulfillRequest");return e&&(t||s)}.property("canFulfill","isRequested","shouldFulfillRequest"),isRequested:function(){var e=this.get("status");return"Requested"===e}.property("status"),lookupListsToUpdate:[{name:"medicationFrequencyList",property:"frequency",id:"medication_frequency"}],medicationList:[],medicationFrequencyList:o.computed.alias("controllers.medication.medicationFrequencyList"),updateCapability:"add_medication",afterUpdate:function(){var e="Medication Request Saved",t="The medication record has been saved.";this.saveVisitIfNeeded(e,t)},beforeUpdate:function(){var e=this.get("isFulfilling"),t=this.get("isNew");return t||e?new o.RSVP.Promise(function(s,a){var n=this.get("model");t?(this.set("newMedication",!0),this.set("status","Requested"),this.set("requestedBy",n.getUserName()),this.set("requestedDate",new Date),this.addChildToVisit(n,"medication","Pharmacy").then(function(){this.finishBeforeUpdate(e,s)}.bind(this),a)):this.finishBeforeUpdate(e,s)}.bind(this)):o.RSVP.resolve()},finishBeforeUpdate:function(e,t){if(e){var s=this.get("inventoryLocations"),a=this.get("store").createRecord("inv-request",{dateCompleted:new Date,inventoryItem:this.get("inventoryItem"),inventoryLocations:s,quantity:this.get("quantity"),transactionType:"Fulfillment",patient:this.get("patient"),markAsConsumed:!0});this.send("fulfillRequest",a,!1,!1,!0),this.set("status","Fulfilled"),t()}else t()},updateButtonText:function(){return this.get("isFulfilling")?"Fulfill":this.get("isNew")?"Add":"Update"}.property("isNew","isFulfilling")})}),define("hospitalrun/medication/edit/route",["hospitalrun/routes/abstract-edit-route","ember","hospitalrun/mixins/fulfill-request","hospitalrun/mixins/inventory-locations","hospitalrun/mixins/patient-list-route","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{editTitle:"Edit Medication Request",modelName:"medication",newTitle:"New Medication Request",getNewData:function(){return o.RSVP.resolve({selectPatient:!0,prescriptionDate:moment().startOf("day").toDate()})},afterModel:function(e){var t=e.get("inventoryItem");return o.isEmpty(t)?void 0:new o.RSVP.Promise(function(s,a){t.reload().then(function(t){e.set("inventoryItem",t),s()},a)}.bind(this))},setupController:function(e,t){this._super(e,t);var s={key:"Medication",include_docs:!0},a=t.get("inventoryItem"),n=t.get("patient");o.isEmpty(a)&&this.controllerFor("pouchdb").queryMainDB(s,"inventory_by_type").then(function(t){var s=t.rows.map(function(e){return e.doc});e.set("medicationList",s)}),o.isEmpty(n)&&this._fetchPatientList(e)}})}),define("hospitalrun/medication/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="row">\n        '),s=a["if"].call(e,"selectPatient",{hash:{},hashTypes:{},hashContexts:{},inverse:v.program(4,l,t),fn:v.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n    "),s=a["if"].call(e,"isRequested",{hash:{},hashTypes:{},hashContexts:{},inverse:v.program(8,h,t),fn:v.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(g((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"dose",label:"Dose","class":"col-xs-3 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-input",r)))),t.buffer.push("\n        "),t.buffer.push(g((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"frequency",label:"Frequency","class":"col-xs-3 required",list:"medicationFrequencyList",selection:"frequency"},hashTypes:{property:"STRING",label:"STRING","class":"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,"class":e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    </div>        \n    <div class="row">\n        '),t.buffer.push(g((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"duration",label:"Duration","class":"col-xs-3 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-input",r)))),t.buffer.push("\n        "),t.buffer.push(g((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-xs-3",label:" ",property:"durationType",content:"durationTypes",optionValuePath:"content",optionLabelPath:"content"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-select",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(g((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"prescriptionDate",label:"Prescription Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"date-picker",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(g((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"quantity",label:"Quantity Requested","class":"col-xs-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-input",r)))),t.buffer.push("          \n        "),t.buffer.push(g((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"refills",label:"Refills","class":"col-xs-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-input",r)))),t.buffer.push("\n    </div>\n    "),t.buffer.push(g((n=a["em-text"]||e&&e["em-text"],r={hash:{property:"notes",label:"Prescription Notes",rows:"3"},hashTypes:{property:"STRING",label:"STRING",rows:"STRING"},hashContexts:{property:e,label:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-text",r)))),t.buffer.push("\n    "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(10,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),s=a["if"].call(e,"isFulfilling",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(13,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(g((s=a["patient-typeahead"]||e&&e["patient-typeahead"],n={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"col-xs-3 required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):y.call(e,"patient-typeahead",n)))),t.buffer.push("\n            "),t.buffer.push(g((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-xs-3 required",label:"Visit",property:"visit",content:"patientVisits",optionValuePath:"content",optionLabelPath:"content.visitDescription",prompt:"--Add New Visit--",selected:"visit"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):y.call(e,"em-select",n)))),t.buffer.push("        \n        "),r}function l(e,t){var s,n="";return t.buffer.push('\n            <div class="form-group col-xs-3">\n                <label>Patient</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</p>\n            </div>\n            <div class="form-group col-xs-3">\n                <label>Visit</label>\n                <p class="form-control-static">'),s=a._triageMustache.call(e,"visit.visitDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n            </div>\n        "),n}function u(e,t){var s,n="";return t.buffer.push('\n        <div class="form-group">\n            <label class="control-label">Medication</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>        \n        </div>\n    "),n}function h(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(g((s=a["inventory-typeahead"]||e&&e["inventory-typeahead"],n={hash:{property:"inventoryItemTypeAhead",label:"Medication",content:"medicationList",selection:"selectedInventoryItem","class":"required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):y.call(e,"inventory-typeahead",n)))),t.buffer.push("\n    "),r
}function p(e,t){var s,n="";return t.buffer.push("\n        "),s=a["if"].call(e,"canFulfill",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(11,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),n}function c(e,t){var s,n,r="";return t.buffer.push('\n            <div class="form-group">            \n                <label class="control-label">Fulfill Request</label>\n             </div>\n            '),t.buffer.push(g((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"Fulfill Request Now",property:"shouldFulfillRequest"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):y.call(e,"em-checkbox",n)))),t.buffer.push("\n        "),r}function d(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(g((s=a["inventory-location-picker"]||e&&e["inventory-location-picker"],n={hash:{label:"Pull From",quantityRequested:"quantity",locationList:"inventoryItem.availableLocations",selectedLocations:"inventoryLocations"},hashTypes:{label:"STRING",quantityRequested:"ID",locationList:"ID",selectedLocations:"ID"},hashContexts:{label:e,quantityRequested:e,locationList:e,selectedLocations:e},contexts:[],types:[],data:t},s?s.call(e,n):y.call(e,"inventory-location-picker",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m,b,y=a.helperMissing,g=this.escapeExpression,v=this;m=a["em-form"]||t&&t["em-form"],b={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:v.noop,fn:v.program(1,i,r),contexts:[],types:[],data:r},f=m?m.call(t,b):y.call(t,"em-form",b),r.buffer.push(f||0===f?f:"")})}),define("hospitalrun/medication/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/medication/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{startKey:[],canAdd:function(){return this.currentUserCan("add_medication")}.property(),showActions:function(){return this.currentUserCan("fulfill_medication")}.property()})}),define("hospitalrun/medication/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Date</th>\n            <th>Patient</th>\n            <th>Medication</th>\n            <th>Quantity</th>        \n            <th>Status</th>\n            '),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a["with"].call(e,"showActions","as","showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,u,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function u(e,t){var s,n,r,i="";return t.buffer.push("\n                <tr "),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    <td>"),t.buffer.push(m((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"prescriptionDate",r):b.call(e,"date-format","prescriptionDate",r)))),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    "),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),i}function h(e,t){var s="";return t.buffer.push('\n                        <td>\n                            <button class="btn btn-default" '),t.buffer.push(m(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Fulfill</button>\n                        </td>\n                    "),s}function p(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No items found.</em> \n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function c(e,t){var s="";return t.buffer.push('\n            <em>Create a new medication request?</em> \n            <button class="btn btn-primary" '),t.buffer.push(m(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Medication Request</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var d,f="",m=this.escapeExpression,b=a.helperMissing,y=this;return d=a["if"].call(t,"model",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(8,p,r),fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),(d||0===d)&&r.buffer.push(d),r.buffer.push("\n"),f})}),define("hospitalrun/medication/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/medication/item-controller/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({actions:{editMedication:function(e){this.get("canEdit")&&this.parentController.send("editMedication",e)}},canEdit:function(){var e=this.get("status");return"Requested"===e}.property("status")})}),define("hospitalrun/medication/return/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/fulfill-request","hospitalrun/mixins/inventory-locations","hospitalrun/mixins/inventory-selection","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s,a,n,r,i){"use strict";var o=e["default"],l=t["default"],u=s["default"],h=a["default"],p=n["default"],c=r["default"];i["default"]=o.extend(u,h,p,c,{needs:["medication","pouchdb"],lookupListsToUpdate:[{name:"aisleLocationList",property:"aisleLocation",id:"aisle_location_list"},{name:"expenseAccountList",property:"expenseAccount",id:"expense_account_list"},{name:"medicationFrequencyList",property:"frequency",id:"medication_frequency"},{name:"warehouseList",property:"location",id:"warehouse_list"}],aisleLocationList:l.computed.alias("controllers.medication.aisleLocationList"),expenseAccountList:l.computed.alias("controllers.medication.expenseAccountList"),medicationFrequencyList:l.computed.alias("controllers.medication.medicationFrequencyList"),warehouseList:l.computed.alias("controllers.medication.warehouseList"),updateCapability:"add_medication",medicationChanged:function(){var e=this.get("medication");if(l.isEmpty(e))this.set("inventoryItem");else{var t=e.get("inventoryItem");this.set("inventoryItemTypeAhead","%@ - %@".fmt(t.get("name"),t.get("friendlyId"))),this.set("inventoryItem",t)}l.run.later(function(){this.get("model").validate()}.bind(this))}.observes("medication"),patientVisitsChanged:function(){var e=this.get("patientVisits");l.isEmpty(e)||this.set("visit",e.get("firstObject"))}.observes("patientVisits"),showPatientMedicationList:function(){var e=this.get("patientMedication");return!l.isEmpty(e)}.property("patientMedication"),setPatientMedicationList:function(){var e=this.get("visit");l.isEmpty(e)?this.set("patientMedication"):e.get("medication").then(function(e){e=e.filterBy("status","Fulfilled"),this.set("patientMedication",e),this.set("medication",e.get("firstObject"))}.bind(this))}.observes("patient","visit"),_finishUpdate:function(){var e=this.get("deliveryAisle"),t=this.get("deliveryLocation"),s=this.get("inventoryItem"),a=this._findOrCreateLocation(s,t,e);this.set("adjustPurchases",!0),this.set("inventoryLocations",[a]),this.set("markAsConsumed",!0),this.get("inventoryItem").then(function(){this.send("fulfillRequest",this.get("model"),!1,!0,!0)}.bind(this))},actions:{doneFulfillRequest:function(){this.updateLookupLists(),this.displayAlert("Medication Returned","The medication has been marked as returned.","allItems")},update:function(){var e=this.get("medication"),t=this.get("quantity");l.isEmpty(e)?this._finishUpdate():e.reload().then(function(){e.decrementProperty("quantity",t),e.get("quantity")<0&&e.set("quantity",0),e.save().then(this._finishUpdate.bind(this))}.bind(this))}},updateButtonText:"Return Medication"})}),define("hospitalrun/medication/return/route",["hospitalrun/medication/edit/route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({editTitle:"Return Medication",modelName:"inv-request",newTitle:"Return Medication",getNewData:function(){return n.RSVP.resolve({dateCompleted:new Date,selectPatient:!0,transactionType:"Return"})}})}),define("hospitalrun/medication/return/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a["if"].call(e,"showPatientMedicationList",{hash:{},hashTypes:{},hashContexts:{},inverse:f.program(4,l,t),fn:f.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(d((n=a["patient-typeahead"]||e&&e["patient-typeahead"],r={hash:{property:"patientTypeAhead",label:"Patient",content:"patientList",selection:"selectedPatient","class":"col-xs-6"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"patient-typeahead",r)))),t.buffer.push("\n        "),t.buffer.push(d((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-xs-6",label:"Visit",property:"visit",content:"patientVisits",optionValuePath:"content",optionLabelPath:"content.visitDescription",selected:"visit"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-select",r)))),t.buffer.push('        \n    </div>\n    <div class="row">\n        '),t.buffer.push(d((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"quantity",label:"Quantity To Return","class":"col-xs-3 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-input",r)))),t.buffer.push("\n        "),t.buffer.push(d((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"deliveryLocation",label:"Return Location",list:"warehouseList",selection:"location","class":"col-xs-4"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"select-or-typeahead",r)))),t.buffer.push("\n        "),t.buffer.push(d((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"deliveryAisle",label:"Return Aisle",list:"aisleLocationList",selection:"aisleLocation","class":"col-xs-4"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    </div>\n    "),t.buffer.push(d((n=a["em-text"]||e&&e["em-text"],r={hash:{property:"reason",label:"Return Reason/Notes",rows:"3"},hashTypes:{property:"STRING",label:"STRING",rows:"STRING"},hashContexts:{property:e,label:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-text",r)))),t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(d((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"dateCompleted",label:"Adjustment Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"date-picker",r)))),t.buffer.push("\n        "),t.buffer.push(d((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"expenseAccount",label:"Credit To Account",list:"expenseAccountList",selection:"expenseAccount","class":"col-sm-8"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"select-or-typeahead",r)))),t.buffer.push("\n    </div>\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(d((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"required",label:"Medication",property:"medication",content:"patientMedication",optionValuePath:"content",optionLabelPath:"content.inventoryItem.name",selected:"medication"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):c.call(e,"em-select",n)))),t.buffer.push("        \n    "),r}function l(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(d((s=a["inventory-typeahead"]||e&&e["inventory-typeahead"],n={hash:{property:"inventoryItemTypeAhead",label:"Medication",content:"medicationList",selection:"selectedInventoryItem","class":"required",showQuantity:!1},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING",showQuantity:"BOOLEAN"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e,showQuantity:e},contexts:[],types:[],data:t},s?s.call(e,n):c.call(e,"inventory-typeahead",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h,p,c=a.helperMissing,d=this.escapeExpression,f=this;h=a["em-form"]||t&&t["em-form"],p={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:f.noop,fn:f.program(1,i,r),contexts:[],types:[],data:r},u=h?h.call(t,p):c.call(t,"em-form",p),r.buffer.push(u||0===u?u:"")})}),define("hospitalrun/medication/return/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/medication/route",["hospitalrun/routes/abstract-module-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addCapability:"add_medication",moduleName:"medication",newButtonText:"+ new request",sectionTitle:"Medication",additionalButtons:function(){return this.currentUserCan(this.get("addCapability"))?[{buttonIcon:"octicon octicon-mail-reply",buttonAction:"returnMedication",buttonText:"return medication","class":"btn btn-primary"}]:void 0}.property(),additionalModels:[{name:"aisleLocationList",findArgs:["lookup","aisle_location_list"]},{name:"expenseAccountList",findArgs:["lookup","expense_account_list"]},{name:"medicationFrequencyList",findArgs:["lookup","medication_frequency"]},{name:"warehouseList",findArgs:["lookup","warehouse_list"]}],subActions:[{text:"Requests",linkTo:"medication.index"},{text:"Completed",linkTo:"medication.completed"}],actions:{returnMedication:function(){this.currentUserCan(this.get("addCapability"))&&this.transitionTo("medication.return","new")}}})}),define("hospitalrun/medication/search/route",["hospitalrun/routes/abstract-search-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({moduleName:"medication",searchKeys:["prescription"],searchModel:"medication"})}),define("hospitalrun/medication/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(u((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"medication/index",n):l.call(e,"partial","medication/index",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.view.call(t,"search-listing",{hash:{newButtonText:"New Request",allButtonText:"All Requests"},hashTypes:{newButtonText:"STRING",allButtonText:"STRING"},hashContexts:{newButtonText:t,allButtonText:t},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["STRING"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/mixins/blood-types",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({bloodTypes:["A+","A-","AB-","AB+","B+","B-","O+","O-"]})}),define("hospitalrun/mixins/dob-days",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({convertDOBToText:function(e,t,s){var a=new Date,n=0,r=0,i=0;e&&(void 0===e.getFullYear&&(e=moment(e,"l").toDate()),void 0!==e.getFullYear&&(n=a.getFullYear()-e.getFullYear(),(a.getMonth()<e.getMonth()||a.getMonth()===e.getMonth()&&a.getDate()<e.getDate())&&n--),e.getMonth&&(r=a.getMonth()-e.getMonth(),i=a.getDate()-e.getDate(),0>=r?0>i?r+=11:0>r&&(r+=12):0>i&&(r-=1)),e.getDate&&(i=a.getDate()-e.getDate(),0>i&&(i+=30)));var o="";return o=t?n>0?n+"y %@1m %@2d":"%@1m %@2d":s?n>1?n+" years %@1 months":1===n?n+" year %@1 months":"%@1 months":n>1?n+" years %@1 months %@2 days":1===n?n+" year %@1 months %@2 days":"%@1 months %@2 days",o.fmt(r,i)}})}),define("hospitalrun/mixins/gender-list",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({genderList:[{label:"Male",value:"M"},{label:"Female",value:"F"}]})}),define("hospitalrun/mixins/patient-id",["ember","hospitalrun/mixins/pouchdb","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Mixin.create(n,{idPrefix:null,_createId:function(e){var t,s=this.get("idPrefix");return t=1e5>e?s+String("00000"+e).slice(-5):String(s+e)},_findUnusedId:function(e,t,s){var n=e.incrementProperty("value"),r=this.get("maxValue"),i=this._createId(n),o={startkey:[i,null],endkey:[i,r]},l=this.controllerFor("pouchdb");l.queryMainDB(o,"patient_by_display_id").then(function(r){a.isEmpty(r.rows)?(e.set("value",n),e.save().then(function(){t(i)},s)):this._findUnusedId(e,t,s)}.bind(this),s)},generateFriendlyId:function(){return new a.RSVP.Promise(function(e,t){var s=this.modelFor("application"),n="P",r=s.findBy("id","patient_id_prefix");a.isEmpty(r)||(n=r.get("value")),this.set("idPrefix",n),this.store.find("sequence","patient").then(function(s){this._findUnusedId(s,e,t)}.bind(this),function(){var s=this.get("store").push("sequence",{id:"patient",value:0});this._findUnusedId(s,e,t)}.bind(this))}.bind(this))}})}),define("hospitalrun/mixins/payment-profiles",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({paymentProfiles:["Private","Discounted","Free"]})}),define("hospitalrun/mixins/result-validation",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({validations:{result:{acceptance:{accept:!0,"if":function(e){if(!e.get("isDirty"))return!1;var t=e.get("status"),a=e.get("result");return"Completed"===t&&s.isEmpty(a)?!0:!1},message:"Please enter a result before completing"}}}})}),define("hospitalrun/mixins/user-roles",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Mixin.create({userRoles:[{name:"Business Office",roles:["Business Office","user"]},{name:"Cashier",roles:["Cashier","user"]},{name:"Data Entry",roles:["Data Entry","user"]},{name:"Doctor",roles:["Doctor","user"]},{name:"Finance",roles:["Finance","user"]},{name:"Finance Manager",roles:["Finance Manager","user"]},{name:"Hospital Administrator",roles:["Hospital Administrator","user"]},{name:"Inventory Manager",roles:["Inventory Manager","user"]},{name:"Imaging Technician",roles:["Imaging Technician","user"]},{name:"Lab Technician",roles:["Lab Technician","user"]},{name:"Medical Records Officer",roles:["Medical Records Officer","user"]},{name:"Nurse",roles:["Nurse","user"]},{name:"Nurse Manager",roles:["Nurse Manager","user"]},{name:"Patient Administration",roles:["Patient Administration","user"]},{name:"Pharmacist",roles:["Pharmacist","user"]},{name:"Social Worker",roles:["Social Worker","user"]},{name:"System Administrator",roles:["System Administrator","admin","user"]},{name:"User Administrator",roles:["User Administrator","admin","user"]}]})}),define("hospitalrun/models/abstract",["ember","ember-validations","hospitalrun/mixins/user-session","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=DS.Model.extend(i,r.Mixin,{lastModified:DS.attr("date"),modifiedBy:DS.attr(),modifiedFields:DS.attr(),save:function(e){var t,s=this.changedAttributes(),a=new Date,r=this.get("modifiedFields"),i=this.get("session");if(!i||!i.isAuthenticated)return new n.RSVP.Promise(function(e,t){n.run(null,t,"ERROR you must be logged in to save")});if(this.get("isDirty")&&!this.get("isDeleted")){n.isEmpty(r)&&(r={}),this.set("lastModified",a);for(t in s)r[t]=a;this.set("modifiedFields",r),this.set("modifiedBy",this.getUserName())}return new n.RSVP.Promise(function(t,a){this._super().then(function(e){n.run(null,t,e)},function(r){e?n.run(null,a,r):r.indexOf&&r.indexOf("conflict")>-1?(this.rollback(),this.reload().then(function(e){for(var r in s)e.set(r,s[r][1]);e.save(!0).then(function(e){n.run(null,t,e)},function(e){n.run(null,a,e)})},function(e){n.run(null,a,e)})):n.run(null,a,r)}.bind(this))}.bind(this))}})}),define("hospitalrun/models/add-diagnosis",["hospitalrun/utils/diagnosis-validation","ember","ember-validations","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=r.Object.extend(i,{diagnosis:null,diagnosisId:null,validations:{diagnosis:{acceptance:n.diagnosisValidation.acceptance,length:{minimum:3,allowBlank:!0}}}})}),define("hospitalrun/utils/diagnosis-validation",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]={diagnosisValidation:{acceptance:{accept:!0,"if":function(e,t){var a=e.get(t),n=e.get(t+"Id");return!s.isEmpty(a)&&s.isEmpty(n)?!0:!1},message:"Please select a valid diagnosis"}}}}),define("hospitalrun/models/appointment",["hospitalrun/models/abstract","hospitalrun/utils/patient-validation","ember","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend({allDay:DS.attr(),patient:DS.belongsTo("patient"),provider:DS.attr("string"),location:DS.attr("string"),appointmentType:DS.attr("string"),startDate:DS.attr("date"),endDate:DS.attr("date"),notes:DS.attr("string"),validations:{appointmentDate:{presence:{"if":function(e){var t=e.get("appointmentType");return"Admission"!==t}}},patientTypeAhead:r.patientTypeAhead,patient:{presence:!0},appointmentType:{presence:!0},location:{presence:!0},startDate:{presence:!0},endDate:{acceptance:{accept:!0,"if":function(e){if(!e.get("isDirty"))return!1;var t=e.get("allDay"),s=e.get("startDate"),a=e.get("endDate");if(i.isEmpty(a)||i.isEmpty(s))return!0;if(t){if(a.getTime()<s.getTime())return!0}else if(a.getTime()<=s.getTime())return!0;return!1},message:"Please select an end date later than the start date"}}}})}),define("hospitalrun/utils/patient-validation",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]={patientTypeAhead:{acceptance:{accept:!0,"if":function(e){if(!e.get("selectPatient"))return!1;if(!e.get("isDirty"))return!1;var t=e.get("patient.displayName"),a=e.get("patientTypeAhead");if(s.isEmpty(t)||s.isEmpty(a))return!0;var n=a.substr(0,t.length);return t!==n?!0:!1},message:"Please select a patient"}}}}),define("hospitalrun/models/billing-line-item",["hospitalrun/models/abstract","ember","hospitalrun/mixins/number-format","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{amountOwed:DS.attr("number"),category:DS.attr("string"),description:DS.attr("string"),details:DS.hasMany("line-item-detail"),discount:DS.attr("number"),name:DS.attr("string"),nationalInsurance:DS.attr("number"),privateInsurance:DS.attr("number"),total:DS.attr("number"),amountOwedChanged:function(){r.run.debounce(this,function(){var e=this._getValidNumber(this.get("discount")),t=this._getValidNumber(this.get("nationalInsurance")),s=this._getValidNumber(this.get("privateInsurance")),a=this._getValidNumber(this.get("total"));a=a-e-t-s,0>a&&(a=0),this.set("amountOwed",this._numberFormat(a,!0))},150)}.observes("discount","nationalInsurance","privateInsurance","total"),discountChanged:function(){r.run.debounce(this,function(){var e=this.get("details"),t=0;r.isEmpty("details")||(t=this._calculateTotal(e,"discount"),this.set("discount",this._numberFormat(t,!0)))},150)}.observes("details.@each.discount"),totalChanged:function(){r.run.debounce(this,function(){var e=this.get("details"),t=0;r.isEmpty("details")||(t=this._calculateTotal(e,"total"),this.set("total",this._numberFormat(t,!0)))},150)}.observes("details.@each.total"),validations:{category:{presence:!0},discount:{numericality:{allowBlank:!0}},nationalInsurance:{numericality:{allowBlank:!0}},name:{presence:!0},privateInsurance:{numericality:{allowBlank:!0}},total:{numericality:{allowBlank:!0}}}})}),define("hospitalrun/models/config",["exports"],function(e){"use strict";e["default"]=DS.Model.extend({value:DS.attr("")})}),define("hospitalrun/models/family-info",["ember","ember-validations","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Object.extend(n,{age:null,civilStatus:null,education:null,income:null,insurance:null,name:null,occupation:null,relationship:null,validations:{age:{numericality:{allowBlank:!0}},name:{presence:!0}}})}),define("hospitalrun/models/imaging",["hospitalrun/models/abstract","hospitalrun/mixins/date-format","hospitalrun/utils/patient-validation","hospitalrun/mixins/result-validation","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{charges:DS.hasMany("proc-charge"),imagingDate:DS.attr("date"),imagingType:DS.belongsTo("pricing"),notes:DS.attr("string"),patient:DS.belongsTo("patient"),requestedBy:DS.attr("string"),requestedDate:DS.attr("date"),result:DS.attr("string"),status:DS.attr("string"),visit:DS.belongsTo("visit"),imagingDateAsTime:function(){return this.dateToTime(this.get("imagingDate"))}.property("imagingDate"),requestedDateAsTime:function(){return this.dateToTime(this.get("requestedDate"))}.property("requestedDate"),validations:{imagingTypeName:{presence:{"if":function(e){return e.get("isNew")?!0:void 0}}},patientTypeAhead:o.patientTypeAhead,patient:{presence:!0}}})}),define("hospitalrun/models/inv-location",["hospitalrun/models/abstract","ember","hospitalrun/mixins/location-name","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"],o=n.extend(i,{quantity:DS.attr("number"),location:DS.attr("string"),aisleLocation:DS.attr("string"),locationNameWithQuantity:function(){var e=this.get("quantity"),t=this.get("locationName");return"%@ (%@ available)".fmt(t,e)}.property("locationName"),validations:{adjustmentQuantity:{numericality:{greaterThan:0},acceptance:{accept:!0,"if":function(e){var t=e.get("adjustmentQuantity"),s=e.get("transactionType"),a=e.get("quantity");return r.isEmpty(t)||isNaN(t)?!0:"Adjustment (Add)"!==s&&t>a?!0:!1},message:"Invalid quantity"}},transferLocation:{acceptance:{accept:!0,"if":function(e){var t=e.get("transferLocation"),s=e.get("transferItem");return!r.isEmpty(s)&&r.isEmpty(t)?!0:!1},message:"Please select a location to transfer to"}}}});a["default"]=o}),define("hospitalrun/models/inv-purchase",["hospitalrun/models/abstract","ember","hospitalrun/mixins/location-name","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"],o=n.extend(i,{purchaseCost:DS.attr("number"),lotNumber:DS.attr("string"),dateReceived:DS.attr("date"),costPerUnit:function(){var e=this.get("purchaseCost"),t=parseInt(this.get("originalQuantity"));return r.isEmpty(e)||r.isEmpty(t)||0===e||0===t?0:Number((e/t).toFixed(2))}.property("purchaseCost","originalQuantity"),originalQuantity:DS.attr("number"),currentQuantity:DS.attr("number"),expirationDate:DS.attr("date"),expired:DS.attr("boolean"),location:DS.attr("string"),aisleLocation:DS.attr("string"),giftInKind:DS.attr("boolean"),inventoryItem:DS.attr("string"),vendor:DS.attr("string"),vendorItemNo:DS.attr("string"),distributionUnit:DS.attr("string"),invoiceNo:DS.attr("string"),quantityGroups:DS.attr(),validations:{purchaseCost:{numericality:!0},originalQuantity:{numericality:!0},vendor:{presence:!0}}});a["default"]=o}),define("hospitalrun/models/inv-request",["hospitalrun/models/abstract","ember","hospitalrun/mixins/location-name","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"],o=n.extend(i,{adjustPurchases:DS.attr("boolean"),completedBy:DS.attr("string"),costPerUnit:DS.attr("number"),dateCompleted:DS.attr("date"),dateRequested:DS.attr("date"),deliveryAisle:DS.attr("string"),deliveryLocation:DS.attr("string"),expenseAccount:DS.attr("string"),inventoryItem:DS.belongsTo("inventory",{async:!0}),locationsAffected:DS.attr(),markAsConsumed:DS.attr("boolean",{defaultValue:!0}),patient:DS.belongsTo("patient"),purchasesAffected:DS.attr(),quantity:DS.attr("number"),quantityAtCompletion:DS.attr("number"),reason:DS.attr("string"),requestedBy:DS.attr("string"),status:DS.attr("string"),transactionType:DS.attr("string"),visit:DS.belongsTo("visit"),deliveryLocationName:function(){var e=this.get("deliveryAisle"),t=this.get("deliveryLocation");return this.formatLocationName(t,e)}.property("deliveryAisle","deliveryLocation"),validations:{inventoryItemTypeAhead:{acceptance:{accept:!0,"if":function(e){if(!e.get("isDirty"))return!1;var t=e.get("inventoryItem.name"),s=e.get("inventoryItemTypeAhead"),a=e.get("requestedItems"),n=e.get("status");if("Requested"===n)return!1;if(r.isEmpty(t)||r.isEmpty(s))return r.isEmpty(a);var i=s.substr(0,t.length);return t!==i?!0:!1},message:"Please select a valid inventory item"}},quantity:{numericality:{greaterThan:0,"if":function(e){var t=e.get("requestedItems");
return r.isEmpty(t)}},acceptance:{accept:!0,"if":function(e){var t=e.get("isNew"),s=parseInt(e.get("quantity")),a=e.get("transactionType"),n=null;return"Return"===a?!1:(n=e.get(t&&"Request"===a?"inventoryItem.quantity":"inventoryLocation.quantity"),s>n?!0:!1)},message:"The quantity must be less than or equal to the number of available items."}}}});a["default"]=o}),define("hospitalrun/models/inventory-batch",["hospitalrun/models/abstract","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({haveInvoiceItems:function(){var e=this.get("invoiceItems");return n.isEmpty(e)},validations:{dateReceived:{presence:!0},inventoryItemTypeAhead:{presence:{"if":function(e){return e.haveInvoiceItems()}}},purchaseCost:{numericality:{greaterThan:0,"if":function(e){return e.haveInvoiceItems()}}},quantity:{numericality:{greaterThan:0,"if":function(e){return e.haveInvoiceItems()}}},vendor:{presence:!0}}})}),define("hospitalrun/models/inventory",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({purchases:DS.hasMany("inv-purchase"),locations:DS.hasMany("inv-location"),description:DS.attr("string"),friendlyId:DS.attr("string"),keywords:DS.attr(),name:DS.attr("string"),quantity:DS.attr("number"),crossReference:DS.attr("string"),type:DS.attr("string"),price:DS.attr("number"),reorderPoint:DS.attr("number"),distributionUnit:DS.attr("string"),availableLocations:function(){var e=this.get("locations").filter(function(e){return e.get("quantity")>0});return e}.property("locations@each.lastModified"),validations:{purchaseCost:{numericality:{"if":function(e){return e.get("isNew")}}},name:{presence:!0},quantity:{numericality:!0},price:{numericality:{allowBlank:!0}},reorderPoint:{numericality:{allowBlank:!0}},type:{presence:!0}},updateQuantity:function(){var e=this.get("purchases"),t=e.reduce(function(e,t){var s=0;return t.get("expired")||(s=t.get("currentQuantity")),e+s},0);this.set("quantity",t)}})}),define("hospitalrun/models/invoice",["hospitalrun/models/abstract","hospitalrun/mixins/date-format","ember","hospitalrun/mixins/number-format","hospitalrun/utils/patient-validation","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(o,u,{discount:DS.attr("number"),externalInvoiceNumber:DS.attr("string"),patient:DS.belongsTo("patient"),patientInfo:DS.attr("string"),visit:DS.belongsTo("visit"),status:DS.attr("string"),billDate:DS.attr("date"),nationalInsurance:DS.attr("number"),paidTotal:DS.attr("number"),paidFlag:DS.attr("boolean",{defaultValue:!1}),patientResponsibility:DS.attr("number"),paymentProfile:DS.belongsTo("price-profile"),payments:DS.hasMany("payment"),privateInsurance:DS.attr("number"),lineItems:DS.hasMany("billing-line-item"),addPayment:function(e){var t=this.get("payments");t.addObject(e),this.paymentAmountChanged()},billDateAsTime:function(){return this.dateToTime(this.get("billDate"))}.property("billDate"),discountChanged:function(){l.run.debounce(this,function(){this.set("discount",this._calculateTotal("lineItems","discount"))},300)}.observes("lineItems.@each.discount"),nationalInsuranceChanged:function(){l.run.debounce(this,function(){this.set("nationalInsurance",this._calculateTotal("lineItems","nationalInsurance"))},300)}.observes("lineItems.@each.nationalInsurance"),remainingBalance:function(){var e=this.get("patientResponsibility"),t=this.get("paidTotal");return this._numberFormat(e-t,!0)}.property("patientResponsibility","paidTotal"),privateInsuranceChanged:function(){l.run.debounce(this,function(){this.set("privateInsurance",this._calculateTotal("lineItems","privateInsurance"))},300)}.observes("lineItems.@each.privateInsurance"),total:function(){return this._calculateTotal("lineItems","total")}.property("lineItems.@each.total"),displayInvoiceNumber:function(){var e=this.get("externalInvoiceNumber"),t=this.get("id");return l.isEmpty(e)?t:e}.property("externalInvoiceNumber","id"),lineItemsByCategory:function(){var e=this.get("lineItems"),t=[];return e.forEach(function(e){var s=e.get("category"),a=t.findBy("category",s);l.isEmpty(a)&&(a={category:s,items:[]},t.push(a)),a.items.push(e)}.bind(this)),t.forEach(function(e){e.amountOwed=this._calculateTotal(e.items,"amountOwed"),e.discount=this._calculateTotal(e.items,"discount"),e.nationalInsurance=this._calculateTotal(e.items,"nationalInsurance"),e.privateInsurance=this._calculateTotal(e.items,"privateInsurance"),e.total=this._calculateTotal(e.items,"total")}.bind(this)),t}.property("lineItems.@each.amountOwed"),patientIdChanged:function(){if(!l.isEmpty(this.get("patient"))){var e=this.get("patient.displayName"),t=this.get("patient.displayPatientId");this.set("patientInfo","%@ - %@".fmt(e,t))}}.observes("patient.displayName","patient.id","patient.displayPatientId"),patientResponsibilityChanged:function(){var e=this._calculateTotal("lineItems","amountOwed");this.set("patientResponsibility",e)}.observes("lineItems.@each.amountOwed"),paymentAmountChanged:function(){var e=this.get("payments"),t=e.reduce(function(e,t){return e+=this._getValidNumber(t.get("amount"))}.bind(this),0);this.set("paidTotal",this._numberFormat(t,!0));var s=this.get("remainingBalance");0>=s&&this.set("status","Paid")}.observes("payments.[]","payments.@each.amount"),validations:{patientTypeAhead:h.patientTypeAhead,patient:{presence:!0},visit:{presence:!0}}})}),define("hospitalrun/models/lab",["hospitalrun/models/abstract","hospitalrun/mixins/date-format","hospitalrun/utils/patient-validation","hospitalrun/mixins/result-validation","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{charges:DS.hasMany("proc-charge"),labDate:DS.attr("date"),labType:DS.belongsTo("pricing"),notes:DS.attr("string"),patient:DS.belongsTo("patient"),requestedBy:DS.attr("string"),requestedDate:DS.attr("date"),result:DS.attr("string"),status:DS.attr("string"),visit:DS.belongsTo("visit"),labDateAsTime:function(){return this.dateToTime(this.get("labDate"))}.property("labDate"),requestedDateAsTime:function(){return this.dateToTime(this.get("requestedDate"))}.property("requestedDate"),validations:{labTypeName:{presence:{"if":function(e){return e.get("isNew")?!0:void 0}}},patientTypeAhead:o.patientTypeAhead,patient:{presence:!0}}})}),define("hospitalrun/models/line-item-detail",["hospitalrun/models/abstract","ember","hospitalrun/mixins/number-format","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{amountOwed:DS.attr("number"),department:DS.attr("string"),discount:DS.attr("number"),discountPercentage:DS.attr("number"),expenseAccount:DS.attr("string"),name:DS.attr("string"),price:DS.attr("number"),pricingItem:DS.belongsTo("pricing"),quantity:DS.attr("number"),total:DS.attr("number"),_calculateAmountOwed:function(){var e,t=this.get("discount"),s=this.get("total");this._validNumber(s)&&(e=this._validNumber(t)?this._numberFormat(s-t,!0):this._numberFormat(s,!0)),this.set("amountOwed",e)},_calculateTotal:function(){var e,t=this.get("discountPercentage"),s=this.get("price"),a=this.get("quantity");if(this._validNumber(s)&&this._validNumber(a)&&(e=this._numberFormat(s*a,!0),!r.isEmpty(t))){var n=this._numberFormat(t*e,!0);this.set("discount",n)}this.set("total",e)},amountOwedChanged:function(){r.run.debounce(this,this._calculateAmountOwed,150)}.observes("discount","total"),totalChanged:function(){r.run.debounce(this,this._calculateTotal,300)}.observes("price","quantity")})}),define("hospitalrun/models/lookup",["exports"],function(e){"use strict";e["default"]=DS.Model.extend({_attachments:DS.attr(),importFile:DS.attr("boolean",{defaultValue:!1}),value:DS.attr(""),organizeByType:DS.attr("boolean"),userCanAdd:DS.attr("boolean")})}),define("hospitalrun/models/medication",["hospitalrun/models/abstract","hospitalrun/mixins/date-format","ember","hospitalrun/utils/patient-validation","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,{dose:DS.attr("string"),duration:DS.attr("number"),durationType:DS.attr("string"),frequency:DS.attr("string"),inventoryItem:DS.belongsTo("inventory"),notes:DS.attr("string"),patient:DS.belongsTo("patient"),prescriptionDate:DS.attr("date"),quantity:DS.attr("number"),refills:DS.attr("number"),requestedDate:DS.attr("date"),requestedBy:DS.attr("string"),status:DS.attr("string"),visit:DS.belongsTo("visit"),prescription:function(){var e=this.get("dose"),t=this.get("duration"),s=this.get("durationType"),a=this.get("frequency");return"%@ %@ for %@ %@".fmt(e,a,t,s)}.property("dose","duration","durationType","frequency"),prescriptionDateAsTime:function(){return this.dateToTime(this.get("prescriptionDate"))}.property("prescriptionDate"),requestedDateAsTime:function(){return this.dateToTime(this.get("requestedDate"))}.property("requestedDate"),validations:{dose:{presence:!0},duration:{numericality:!0},durationType:{presence:!0},frequency:{presence:!0},inventoryItemTypeAhead:{acceptance:{accept:!0,"if":function(e){if(!e.get("isDirty"))return!1;var t=e.get("inventoryItem.name"),s=e.get("inventoryItemTypeAhead");if(o.isEmpty(t)||o.isEmpty(s))return!0;var a=s.substr(0,t.length);return t!==a?!0:!1},message:"Please select a valid medication"}},patientTypeAhead:l.patientTypeAhead,patient:{presence:!0},quantity:{numericality:{allowBlank:!0}},refills:{numericality:{allowBlank:!0}}}})}),define("hospitalrun/models/option",["exports"],function(e){"use strict";e["default"]=DS.Model.extend({value:DS.attr("")})}),define("hospitalrun/models/override-price",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({profile:DS.belongsTo("price-profile"),price:DS.attr("number"),validations:{profile:{presence:!0},price:{numericality:!0}}})}),define("hospitalrun/models/patient",["hospitalrun/models/abstract","hospitalrun/mixins/dob-days","hospitalrun/utils/email-validation","ember","hospitalrun/mixins/patient-name","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(o,h,{admitted:DS.attr("boolean",{defaultValue:!1}),additionalContacts:DS.attr(),additionalData:DS.attr(null,{defaultValue:{}}),address:DS.attr("string"),address2:DS.attr("string"),address3:DS.attr("string"),address4:DS.attr("string"),bloodType:DS.attr("string"),clinic:DS.attr("string"),country:DS.attr("string"),dateOfBirth:DS.attr("date"),economicClassification:DS.attr("string"),email:DS.attr("string"),expenses:DS.attr(),externalPatientId:DS.attr("string"),familySupport1:DS.attr("string"),familySupport2:DS.attr("string"),familySupport3:DS.attr("string"),familySupport4:DS.attr("string"),familySupport5:DS.attr("string"),friendlyId:DS.attr("string"),familyInfo:DS.attr(),firstName:DS.attr("string"),gender:DS.attr("string"),history:DS.attr("string"),insurance:DS.attr("string"),lastName:DS.attr("string"),livingArrangement:DS.attr("string"),middleName:DS.attr("string"),notes:DS.attr("string"),otherIncome:DS.attr("string"),payments:DS.hasMany("payment",{async:!0}),patientType:DS.attr("string"),parent:DS.attr("string"),paymentProfile:DS.belongsTo("price-profile"),phone:DS.attr("string"),placeOfBirth:DS.attr("string"),referredDate:DS.attr("date"),referredBy:DS.attr("string"),religion:DS.attr("string"),socialActionTaken:DS.attr("string"),socialRecommendation:DS.attr("string"),status:DS.attr("string"),age:function(){var e=this.get("dateOfBirth");return this.convertDOBToText(e)}.property("dateOfBirth"),displayAddress:function(){var e=this.getProperties("address","address2","address3","address4"),t="";for(var s in e)u.isEmpty(e[s])||(u.isEmpty(t)||(t+=", "),t+=e[s]);return t}.property("address","address2","address3","address4"),displayName:function(){return this.getPatientDisplayName(this)}.property("firstName","lastName","middleName"),displayPatientId:function(){return this.getPatientDisplayId(this)}.property("id","externalPatientId","friendlyId"),validations:{email:{format:{"with":l.emailRegex,allowBlank:!0,message:"please enter a valid email address"}},friendlyId:{presence:!0},firstName:{presence:!0},lastName:{presence:!0}}})}),define("hospitalrun/utils/email-validation",["exports"],function(e){"use strict";e["default"]={emailRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}}),define("hospitalrun/models/payment",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({amount:DS.attr("number"),charityPatient:DS.attr("boolean"),expenseAccount:DS.attr("string"),invoice:DS.belongsTo("invoice"),datePaid:DS.attr("date"),type:DS.attr("string"),notes:DS.attr("string"),validations:{amount:{numericality:!0},datePaid:{presence:!0}}})}),define("hospitalrun/models/photo",["hospitalrun/models/abstract","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({_attachments:DS.attr(),coverImage:DS.attr("boolean"),fileName:DS.attr("string"),localFile:DS.attr("boolean"),patient:DS.belongsTo("patient"),caption:DS.attr("string"),url:DS.attr("string"),downloadImageFromServer:function(e){var t=this,s=e.get("url"),a=new XMLHttpRequest;n.isEmpty(s)||(this.getPatientDirectory(e.get("patientId")),a.open("GET",s,!0),a.responseType="blob",a.onload=function(){var s=new Blob([a.response]);t.addImageToFileStore(s,null,e)},a.send())}})}),define("hospitalrun/models/price-profile",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({name:DS.attr("string"),discountAmount:DS.attr("number"),discountPercentage:DS.attr("number"),validations:{name:{presence:!0},discountAmount:{numericality:{allowBlank:!0}},discountPercentage:{numericality:{allowBlank:!0}}}})}),define("hospitalrun/models/pricing",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({category:DS.attr("string"),expenseAccount:DS.attr("string"),name:DS.attr("string"),price:DS.attr("number"),type:DS.attr("string"),pricingOverrides:DS.hasMany("override-price"),validations:{category:{presence:!0},name:{presence:!0},price:{numericality:!0}}})}),define("hospitalrun/models/proc-charge",["hospitalrun/models/abstract","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({medication:DS.belongsTo("inventory"),pricingItem:DS.belongsTo("pricing"),quantity:DS.attr("number"),dateCharged:DS.attr("date"),medicationCharge:function(){var e=this.get("medication"),t=this.get("newMedicationCharge");return!n.isEmpty(e)||t}.property("medication"),inventoryItemChanged:function(){var e=this.get("inventoryItem");this.set("medication",e)}.observes("inventoryItem"),validations:{itemName:{presence:!0,acceptance:{accept:!0,"if":function(e){var t=e.get("medicationCharge");if(!t||!e.get("isDirty"))return!1;var s=e.get("inventoryItem.name"),a=e.get("itemName");if(n.isEmpty(s)||n.isEmpty(a))return!0;var r=a.substr(0,s.length);return s!==r?!0:!1},message:"Please select a valid medication"}},quantity:{numericality:{greaterThan:0}}}})}),define("hospitalrun/models/procedure",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({anesthesiaType:DS.attr("string"),anesthesiologist:DS.attr("string"),assistant:DS.attr("string"),description:DS.attr("string"),charges:DS.hasMany("proc-charge"),cptCode:DS.attr("string"),location:DS.attr("string"),notes:DS.attr("string"),physician:DS.attr("string"),procedureDate:DS.attr("date"),timeStarted:DS.attr("string"),timeEnded:DS.attr("string"),visit:DS.belongsTo("visit"),validations:{description:{presence:!0},oxygenHours:{numericality:{allowBlank:!0}},pacuHours:{numericality:{allowBlank:!0}},physician:{presence:!0},procedureDate:{presence:!0},display_procedureDate:{presence:{message:"Please select a valid date"}}}})}),define("hospitalrun/models/sequence",["exports"],function(e){"use strict";e["default"]=DS.Model.extend({prefix:DS.attr("string"),value:DS.attr("number")})}),define("hospitalrun/models/social-expense",["ember","ember-validations","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.Object.extend(n,{category:null,sources:null,cost:null,validations:{cost:{numericality:!0}}})}),define("hospitalrun/models/user",["hospitalrun/utils/email-validation","ember-validations","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"],r=DS.Model.extend(n,{derived_key:DS.attr("string"),displayName:DS.attr("string"),email:DS.attr("string"),iterations:DS.attr(),name:DS.attr("string"),password:DS.attr("string"),password_scheme:DS.attr("string"),password_sha:DS.attr("string"),rev:DS.attr("string"),roles:DS.attr(),salt:DS.attr("string"),userPrefix:DS.attr("string"),validations:{email:{format:{"with":a.emailRegex,message:"please enter a valid email address"}}}});s["default"]=r}),define("hospitalrun/models/visit",["hospitalrun/models/abstract","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({additionalDiagnoses:DS.attr(),charges:DS.hasMany("proc-charge"),dischargeInfo:DS.attr("string"),endDate:DS.attr("date"),examiner:DS.attr("string"),history:DS.attr("string"),historySince:DS.attr("string"),imaging:DS.hasMany("imaging",{async:!0}),labs:DS.hasMany("lab",{async:!0}),location:DS.attr("string"),medication:DS.hasMany("medication",{async:!0}),notes:DS.attr("string"),outPatient:DS.attr("boolean"),patient:DS.belongsTo("patient"),primaryDiagnosis:DS.attr("string"),primaryBillingDiagnosis:DS.attr("string"),primaryBillingDiagnosisId:DS.attr("string"),procedures:DS.hasMany("procedure",{async:!0}),startDate:DS.attr("date"),status:DS.attr("string"),visitType:DS.attr(),vitals:DS.hasMany("vital",{async:!0}),diagnosisList:function(){var e=this.get("additionalDiagnoses"),t=[],s=this.get("primaryDiagnosis");return n.isEmpty(s)||t.push(s),n.isEmpty(e)||t.addObjects(e.map(function(e){return e.description})),t}.property("additionalDiagnosis@each","primaryDiagnosis"),visitDate:function(){var e=this.get("endDate"),t=moment(this.get("startDate")),s=t.format("l");return n.isEmpty(e)||t.isSame(e,"day")||(s+=" - "+moment(e).format("l")),s}.property("startDate","endDate"),visitDescription:function(){var e=this.get("visitDate"),t=this.get("visitType");return"%@ (%@)".fmt(e,t)}.property("visitDate","visitType"),validations:{endDate:{acceptance:{accept:!0,"if":function(e){if(!e.get("isDirty"))return!1;var t=e.get("startDate"),s=e.get("endDate");return n.isEmpty(s)||n.isEmpty(t)?!1:s.getTime()<t.getTime()?!0:!1},message:"Please select an end date later than the start date"}},startDate:{presence:!0},visitType:{presence:!0}}})}),define("hospitalrun/models/vital",["hospitalrun/models/abstract","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({dateRecorded:DS.attr("date"),temperature:DS.attr("number"),weight:DS.attr("string"),height:DS.attr("string"),sbp:DS.attr("number"),dbp:DS.attr("number"),heartRate:DS.attr("number"),respiratoryRate:DS.attr("number"),validations:{temperature:{numericality:!0},sbp:{numericality:!0},dbp:{numericality:!0},heartRate:{numericality:!0},respiratoryRate:{numericality:!0}}})}),define("hospitalrun/patients/add-contact/controller",["ember","hospitalrun/mixins/is-update-disabled","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:"patients/edit",editController:a.computed.alias("controllers.patients/edit"),title:"Add Contact",updateButtonText:"Add",updateButtonAction:"add",showUpdateButton:!0,actions:{cancel:function(){this.send("closeModal")},add:function(){var e=this.getProperties("name","phone","email","relationship");this.get("editController").send("addContact",e)}}})}),define("hospitalrun/patients/add-contact/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Name",property:"name"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Phone",property:"phone"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Email",property:"email"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Relationship",property:"relationship"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/patients/add-contact/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete Patient"})}),define("hospitalrun/patients/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete '),i=a._triageMustache.call(t,"firstName",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push(" "),i=a._triageMustache.call(t,"lastName",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("?\n</div>"),o})}),define("hospitalrun/patients/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/edit/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/blood-types","ember","hospitalrun/models/family-info","hospitalrun/mixins/gender-list","hospitalrun/mixins/pouch-adapter-utils","hospitalrun/mixins/return-to","hospitalrun/models/social-expense","hospitalrun/mixins/user-session","exports"],function(e,t,s,a,n,r,i,o,l,u){"use strict";var h=e["default"],p=t["default"],c=s["default"],d=a["default"],f=n["default"],m=r["default"],b=i["default"],y=o["default"],g=l["default"];u["default"]=h.extend(p,f,m,b,g,{canAddAppointment:function(){return this.currentUserCan("add_appointment")}.property(),canAddContact:function(){return this.currentUserCan("add_patient")}.property(),canAddImaging:function(){return this.currentUserCan("add_imaging")}.property(),canAddLab:function(){return this.currentUserCan("add_lab")}.property(),canAddMedication:function(){return this.currentUserCan("add_medication")}.property(),canAddPhoto:function(){var e=this.get("isFileSystemEnabled");return this.currentUserCan("add_photo")&&e}.property(),canAddSocialWork:function(){return this.currentUserCan("add_socialwork")}.property(),canAddVisit:function(){return this.currentUserCan("add_visit")}.property(),canDeleteAppointment:function(){return this.currentUserCan("delete_appointment")}.property(),canDeleteContact:function(){return this.currentUserCan("add_patient")}.property(),canDeleteImaging:function(){return this.currentUserCan("delete_imaging")}.property(),canDeleteLab:function(){return this.currentUserCan("delete_lab")}.property(),canDeleteMedication:function(){return this.currentUserCan("delete_medication")}.property(),canDeletePhoto:function(){return this.currentUserCan("delete_photo")}.property(),canDeleteSocialWork:function(){return this.currentUserCan("delete_socialwork")}.property(),canDeleteVisit:function(){return this.currentUserCan("delete_visit")}.property(),economicClassificationTypes:["A","B","C1","C2","C3","D"],livingArrangementList:["Homeless","Institution","Owned","Rent","Shared"],patientTypes:["Charity","Private"],philhealthTypes:["Employed: Government","Employed: Non Paying Member/Lifetime","Employed: OWWA/OFW","Employed: Private","Employed: Sponsored/Indigent","Self Employed"],primaryDiagnosisIdChanged:function(){this.get("model").validate()}.observes("primaryDiagnosisId"),needs:["filesystem","pouchdb","patients"],addressOptions:c.computed.alias("controllers.patients.addressOptions"),address1Include:c.computed.alias("controllers.patients.addressOptions.value.address1Include"),address1Label:c.computed.alias("controllers.patients.addressOptions.value.address1Label"),address2Include:c.computed.alias("controllers.patients.addressOptions.value.address2Include"),address2Label:c.computed.alias("controllers.patients.addressOptions.value.address2Label"),address3Include:c.computed.alias("controllers.patients.addressOptions.value.address3Include"),address3Label:c.computed.alias("controllers.patients.addressOptions.value.address3Label"),address4Include:c.computed.alias("controllers.patients.addressOptions.value.address4Include"),address4Label:c.computed.alias("controllers.patients.addressOptions.value.address4Label"),clinicList:c.computed.alias("controllers.patients.clinicList"),countryList:c.computed.alias("controllers.patients.countryList"),fileSystem:c.computed.alias("controllers.filesystem"),isFileSystemEnabled:c.computed.alias("controllers.filesystem.isFileSystemEnabled"),patientController:c.computed.alias("controllers.patients"),pricingProfiles:c.computed.alias("controllers.patients.pricingProfiles"),statusList:c.computed.alias("controllers.patients.statusList"),haveAdditionalContacts:function(){var e=this.get("additionalContacts");return!c.isEmpty(e)}.property("additionalContacts"),haveAddressOptions:function(){var e=this.get("addressOptions");return!c.isEmpty(e)}.property("addressOptions"),lookupListsToUpdate:[{name:"countryList",property:"country",id:"country_list"},{name:"clinicList",property:"clinic",id:"clinic_list"},{name:"statusList",property:"status",id:"patient_status_list"}],havePrimaryDiagnoses:function(){var e=this.get("primaryDiagnoses.length");return e>0}.property("primaryDiagnoses.length"),haveProcedures:function(){var e=this.get("patientProcedures.length");return e>0}.property("patientProcedures.length"),haveSecondaryDiagnoses:function(){var e=this.get("secondaryDiagnoses.length");return e>0}.property("secondaryDiagnoses.length"),patientImaging:function(){return this._getVisitCollection("imaging")}.property("visits.@each.imaging"),patientLabs:function(){return this._getVisitCollection("labs")}.property("visits.@each.labs"),patientMedications:function(){return this._getVisitCollection("medication")}.property("visits.@each.medication"),patientProcedures:function(){return this._getVisitCollection("procedures")}.property("visits.@each.procedures"),primaryDiagnoses:function(){var e=[],t=this.get("visits");c.isEmpty(t)||t.forEach(function(t){this._addDiagnosisToList(t.get("primaryDiagnosis"),e,t),this._addDiagnosisToList(t.get("primaryBillingDiagnosis"),e,t)}.bind(this));var s=e.get("firstObject");return c.isEmpty(s)||(s.first=!0),e}.property("visits.@each"),secondaryDiagnoses:function(){var e=[],t=this.get("visits");c.isEmpty(t)||t.forEach(function(t){c.isEmpty(t.get("additionalDiagnoses"))||e.addObjects(t.get("additionalDiagnoses"))});var s=e.get("firstObject");return c.isEmpty(s)||(s.first=!0),e}.property("visits.@each"),showExpenseTotal:!0,totalExpenses:function(){var e=this.get("expenses");if(!c.isEmpty(e)){var t=e.reduce(function(e,t){return c.isEmpty(t.cost)?void 0:e+parseInt(t.cost)},0);return this.set("showExpenseTotal",!0),t}this.set("showExpenseTotal",!1)}.property("expenses"),updateCapability:"add_patient",actions:{addContact:function(e){var t=this.getWithDefault("additionalContacts",[]);t.addObject(e),this.set("additionalContacts",t),this.send("update",!0),this.send("closeModal")},addPhoto:function(e,t,s){var a=this.get("id")+"/photos/",n=this.get("fileSystem"),r=this.get("photos"),i=this.get("store").createRecord("photo",{patient:this.get("model"),localFile:!0,caption:t,coverImage:s}),o=this._idToPouchId(i.get("id"),"photo");n.addFile(e,a,o).then(function(t){n.fileToDataURL(e).then(function(s){var a=s.split(",");i.setProperties({fileName:t.fullPath,url:t.toURL(),_attachments:{file:{content_type:e.type,data:a[1]}}}),i.save().then(function(){r.addObject(i),this.send("closeModal")}.bind(this))}.bind(this))}.bind(this))},appointmentDeleted:function(e){var t=this.get("appointments");t.removeObject(e),this.send("closeModal")},deleteContact:function(e){var t=e.get("contactToDelete"),s=this.get("additionalContacts");s.removeObject(t),this.set("additionalContacts",s),this.send("update",!0)},deleteExpense:function(e){var t=e.get("expenseToDelete"),s=this.get("expenses");s.removeObject(t),this.set("expenses",s),this.send("update",!0)},deleteFamily:function(e){var t=e.get("familyToDelete"),s=this.get("familyInfo");s.removeObject(t),this.set("familyInfo",s),this.send("update",!0)},deletePhoto:function(e){var t=e.get("photoToDelete"),s=e.get("id"),a=this.get("photos"),n=t.get("fileName");a.removeObject(t),t.destroyRecord().then(function(){var e=this.get("fileSystem"),t=this.get("isFileSystemEnabled");if(t){var a=this._idToPouchId(s,"photo");e.deleteFile(n,a)}}.bind(this))},editAppointment:function(e){e.set("returnToPatient",!0),this.transitionToRoute("appointments.edit",e)},editImaging:function(e){e.setProperties({isCompleting:!1,returnToPatient:!0}),this.transitionToRoute("imaging.edit",e)},editLab:function(e){e.setProperties({isCompleting:!1,returnToPatient:!0}),this.transitionToRoute("labs.edit",e)},editMedication:function(e){e.set("returnToPatient",!0),this.transitionToRoute("medication.edit",e)},editPhoto:function(e){this.send("openModal","patients.photo",e)},editVisit:function(e){this.transitionToRoute("visits.edit",e)},newAppointment:function(){var e=moment().hours(8).minutes(0).seconds(0).toDate(),t=this.get("store").createRecord("appointment",{patient:this.get("model"),startDate:e,endDate:e});t.set("returnToPatient",!0),this.transitionToRoute("appointments.edit",t)},newImaging:function(){var e=this.get("store").createRecord("imaging",{isCompleting:!1,patient:this.get("model"),returnToPatient:!0});this.transitionToRoute("imaging.edit",e)},newLab:function(){var e=this.get("store").createRecord("lab",{isCompleting:!1,patient:this.get("model"),returnToPatient:!0});this.transitionToRoute("labs.edit",e)},newMedication:function(){var e=this.get("store").createRecord("medication",{prescriptionDate:moment().startOf("day").toDate(),patient:this.get("model"),returnToPatient:!0});this.transitionToRoute("medication.edit",e)},newVisit:function(){var e=this.get("model"),t=this.get("visits");this.send("createNewVisit",e,t)},showAddContact:function(){this.send("openModal","patients.add-contact",{})},showAddPhoto:function(){this.send("openModal","patients.photo",{isNew:!0})
},showDeleteAppointment:function(e){e.set("deleteFromPatient",!0),this.send("openModal","appointments.delete",e)},showDeleteContact:function(e){this.send("openModal","dialog",c.Object.create({confirmAction:"deleteContact",title:"Delete Contact",message:"Are you sure you want to delete this contact?",contactToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))},showDeleteExpense:function(e){this.send("openModal","dialog",c.Object.create({confirmAction:"deleteExpense",title:"Delete Expense",message:"Are you sure you want to delete this expense?",expenseToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))},showDeleteFamily:function(e){this.send("openModal","dialog",c.Object.create({confirmAction:"deleteFamily",title:"Delete Family Member",message:"Are you sure you want to delete this family member?",familyToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))},showDeleteImaging:function(e){this.send("openModal","imaging.delete",e)},showDeleteLab:function(e){this.send("openModal","labs.delete",e)},showDeleteMedication:function(e){this.send("openModal","medication.delete",e)},showDeletePhoto:function(e){this.send("openModal","dialog",c.Object.create({confirmAction:"deletePhoto",title:"Delete Photo",message:"Are you sure you want to delete this photo?",photoToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))},showDeleteVisit:function(e){e.set("deleteFromPatient",!0),this.send("openModal","visits.delete",e)},showEditExpense:function(e){c.isEmpty(e)&&(e=y.create({isNew:!0})),this.send("openModal","patients.socialwork.expense",e)},showEditFamily:function(e){c.isEmpty(e)&&(e=d.create({isNew:!0})),this.send("openModal","patients.socialwork.family-info",e)},updateExpense:function(e){var t=this.getWithDefault("expenses",[]),s=e.isNew;s&&(delete e.isNew,t.addObject(e)),this.set("expenses",t),this.send("update",!0),this.send("closeModal")},updateFamilyInfo:function(e){var t=this.getWithDefault("familyInfo",[]),s=e.isNew;s&&(delete e.isNew,t.addObject(e),this.set("familyInfo",t)),this.send("update",!0),this.send("closeModal")},updatePhoto:function(e){e.save().then(function(){this.send("closeModal")}.bind(this))},visitDeleted:function(e){var t=this.get("visits");t.removeObject(e),this.send("closeModal")}},_addDiagnosisToList:function(e,t,s){c.isEmpty(e)||c.isEmpty(t.findBy("description",e))&&t.addObject({date:s.get("startDate"),description:e})},_getVisitCollection:function(e){var t=[],s=this.get("visits");return c.isEmpty(s)||s.forEach(function(s){s.get(e).then(function(e){t.addObjects(e),t.length>0&&t[0].set("first",!0)})}),t},beforeUpdate:function(){return new c.RSVP.Promise(function(e,t){this.get("payments").then(e,t)}.bind(this))},afterUpdate:function(e){var t="The patient record for %@ has been saved.".fmt(e.get("displayName"));this.displayAlert("Patient Saved",t)}})}),define("hospitalrun/patients/edit/route",["hospitalrun/routes/abstract-edit-route","ember","hospitalrun/mixins/patient-id","hospitalrun/mixins/patient-visits","hospitalrun/mixins/pouchdb","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{editTitle:"Edit Patient",modelName:"patient",newTitle:"New Patient",photos:null,actions:{appointmentDeleted:function(e){this.controller.send("appointmentDeleted",e)},deleteContact:function(e){this.controller.send("deleteContact",e)},deleteExpense:function(e){this.controller.send("deleteExpense",e)},deleteFamily:function(e){this.controller.send("deleteFamily",e)},deletePhoto:function(e){this.controller.send("deletePhoto",e)},updateExpense:function(e){this.controller.send("updateExpense",e)},updateFamilyInfo:function(e){this.controller.send("updateFamilyInfo",e)},visitDeleted:function(e){this.controller.send("visitDeleted",e)}},getNewData:function(){return new o.RSVP.Promise(function(e,t){this.generateFriendlyId().then(function(t){e({friendlyId:t})},t)}.bind(this))},setupController:function(e,t){var s=t.get("friendlyId"),a=t.get("externalPatientId"),n=this.get("maxValue"),r="patient_"+t.get("id");o.isEmpty(s)&&!o.isEmpty(a)&&t.set("friendlyId",a),this._super(e,t),this.getPatientVisits(t).then(function(t){e.set("visits",t)}),this.store.find("appointment",{options:{startkey:[r,null,null,"appointment_"],endkey:[r,n,n,n]},mapReduce:"appointments_by_patient"}).then(function(t){e.set("appointments",t)}),this.store.find("photo",{options:{key:r},mapReduce:"photo_by_patient"}).then(function(t){e.set("photos",t)})}})}),define("hospitalrun/patients/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a.unless.call(e,"isNewOrDeleted",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    <div class="tab-content">\n        <div role="tabpanel" class="tab-pane active" id="general">        \n            <div class="panel detail-section">\n                <div class="panel-heading">\n                    <h3 class="panel-title">\n                            General Information\n                    </h3>\n                </div>\n\n                <div class="panel-body detail-section-content">\n                    <div class="row">\n                        <div class="col-xs-12 col-sm-6">\n                            '),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"friendlyId",label:"Id","class":"required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"firstName",label:"First Name","class":"required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"middleName",label:"Middle Name"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"lastName",label:"Last Name","class":"required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push('\n                            <div class="form-group">\n                                <label>Gender</label>\n                                <div>\n                                    '),t.buffer.push(bt((n=a["ext-radio"]||e&&e["ext-radio"],r={hash:{name:"gender",content:"genderList",value:"gender",showInline:!0},hashTypes:{name:"ID",content:"ID",value:"ID",showInline:"BOOLEAN"},hashContexts:{name:e,content:e,value:e,showInline:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"ext-radio",r)))),t.buffer.push("\n                                </div>\n                            </div>\n                            "),t.buffer.push(bt((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"dateOfBirth",label:"Date of Birth",maxDate:"now"},hashTypes:{property:"STRING",label:"STRING",maxDate:"STRING"},hashContexts:{property:e,label:e,maxDate:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"date-picker",r)))),t.buffer.push('\n                            <div class="form-group">\n                                <label class="control-label">Age</label>\n                                <p class="form-control-static">'),s=a._triageMustache.call(e,"age",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n                            </div>\n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"placeOfBirth",label:"Place of Birth"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push('\n                            <div class="form-group">\n                                <label>Patient Type</label>\n                                <div>\n                                    '),t.buffer.push(bt((n=a["ext-radio"]||e&&e["ext-radio"],r={hash:{name:"patientType",content:"patientTypes",value:"patientType",showInline:!0,radioLabelPath:"content",radioValuePath:"content"},hashTypes:{name:"ID",content:"ID",value:"ID",showInline:"BOOLEAN",radioLabelPath:"STRING",radioValuePath:"STRING"},hashContexts:{name:e,content:e,value:e,showInline:e,radioLabelPath:e,radioValuePath:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"ext-radio",r)))),t.buffer.push('\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-xs-12 col-sm-6">\n                            '),t.buffer.push(bt((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"status",label:"Patient Status",list:"statusList",selection:"status"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"select-or-typeahead",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"externalPatientId",label:"External Patient Id"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-select"]||e&&e["em-select"],r={hash:{prompt:" ",label:"Blood Type",property:"bloodType",content:"bloodTypes",optionValuePath:"content",optionLabelPath:"content"},hashTypes:{prompt:"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{prompt:e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-select",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"clinic",label:"Clinic Site",list:"clinicList",selection:"clinic"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"select-or-typeahead",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"referredBy",label:"Referred By"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"referredDate",label:"Referred Date"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"date-picker",r)))),t.buffer.push("                            \n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"religion",label:"Religion"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("                            \n                            "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"parent",label:"Parent/Guardian"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-select"]||e&&e["em-select"],r={hash:{label:"Payment Profile",property:"paymentProfile",content:"pricingProfiles",optionValuePath:"content",optionLabelPath:"content.name",prompt:" "},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-select",r)))),t.buffer.push('                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="panel detail-section">\n                <div class="panel-heading">\n                    <h3 class="panel-title">\n                            Address/Contact Information\n                            '),s=a["if"].call(e,"canAddContact",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(14,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h3>\n                </div>\n\n                <div class="panel-body detail-section-content">\n                    <div class="row">\n\n                        '),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"phone",label:"Phone Contact","class":"col-xs-12 col-sm-6"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                        "),t.buffer.push(bt((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"email",type:"email",label:"Email","class":"col-xs-12 col-sm-6"},hashTypes:{property:"STRING",type:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,type:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-input",r)))),t.buffer.push("\n                        "),s=a["if"].call(e,"haveAddressOptions",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.program(25,T,t),fn:ft.program(16,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),t.buffer.push(bt((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"country",label:"Country",list:"countryList",selection:"country","class":"col-xs-12 col-sm-6"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"select-or-typeahead",r)))),t.buffer.push("\n\n                    </div>\n                </div>\n                "),s=a["with"].call(e,"","as","patientController",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(27,I,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </div>\n        </div>\n        "),s=a.unless.call(e,"isNewOrDeleted",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(34,N,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),i}function o(e,t){var s,n="";return t.buffer.push('\n        <div class="panel panel-success">\n            <div class="panel-body">\n                <div class="row">        \n                    <div class="form-group col-sm-3">\n                        <label class="control-label">Id</label> '),s=a._triageMustache.call(e,"displayPatientId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </div>\n                    <div class="form-group col-sm-4">\n                        <label class="control-label">Name</label> '),s=a._triageMustache.call(e,"displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </div>\n                    <div class="form-group col-sm-2">\n                        <label class="control-label">Gender</label> '),s=a._triageMustache.call(e,"gender",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </div>\n                    <div class="form-group col-sm-3">\n                        <label class="control-label">Age</label> '),s=a._triageMustache.call(e,"age",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </div>\n                </div>\n                "),s=a["if"].call(e,"havePrimaryDiagnoses",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(3,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),s=a["if"].call(e,"haveSecondaryDiagnoses",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(7,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),s=a["if"].call(e,"haveProcedures",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(9,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('                \n            </div>\n        </div>\n        <ul class="nav nav-pills" role="tablist">\n            <li role="presentation" class="active" ><a class="active" href="#general" role="tab" data-toggle="pill">General</a></li>\n            <li role="presentation"><a href="#photos" role="tab" data-toggle="pill">Photos</a></li>            \n            <li role="presentation"><a href="#medication" role="tab" data-toggle="pill">Medication</a></li>\n            <li role="presentation"><a href="#imaging" role="tab" data-toggle="pill">Imaging</a></li>\n            <li role="presentation"><a href="#labs" role="tab" data-toggle="pill">Labs</a></li>\n            <li role="presentation"><a href="#visits" role="tab" data-toggle="pill">Visits/Appointments</a></li>\n            '),s=a["if"].call(e,"canAddSocialWork",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(12,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </ul>\n    "),n}function l(e,t){var s,n="";return t.buffer.push('\n                    <div class="row">        \n                        <div class="form-group col-sm-12">\n                            <label class="control-label">Primary Diagnoses</label> \n                            '),s=a.each.call(e,"primaryDiagnoses",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(4,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </div>\n                    </div>\n                "),n}function u(e,t){var s,n,r,i="";return t.buffer.push("\n                                "),s=a.unless.call(e,"first",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(5,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),s=a._triageMustache.call(e,"description",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" (<strong>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"date",r):mt.call(e,"date-format","date",r)))),t.buffer.push("</strong>)\n                            "),i}function h(e,t){t.buffer.push(", ")}function p(e,t){var s,n="";return t.buffer.push('\n                    <div class="row">\n                        <div class="form-group col-sm-12">\n                            <label class="control-label">Secondary Diagnoses</label>\n                            '),s=a.each.call(e,"secondaryDiagnoses",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(4,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                \n                        </div>\n                    </div>\n                "),n}function c(e,t){var s,n="";return t.buffer.push('\n                    <div class="row">\n                        <div class="form-group col-sm-12">\n                            <label class="control-label">Procedures</label>\n                            '),s=a.each.call(e,"patientProcedures",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(10,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                \n                        </div>\n                    </div>\n                "),n}function d(e,t){var s,n,r,i="";return t.buffer.push("\n                                "),s=a.unless.call(e,"first",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(5,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),s=a._triageMustache.call(e,"description",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" (<strong>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"procedureDate",r):mt.call(e,"date-format","procedureDate",r)))),t.buffer.push("</strong>)\n                            "),i}function f(e,t){t.buffer.push('\n                <li role="presentation"><a href="#social" role="tab" data-toggle="pill">Social Work</a></li>\n            ')}function m(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"showAddContact",{hash:{bubbles:!1,on:"click"},hashTypes:{bubbles:"BOOLEAN",on:"STRING"},hashContexts:{bubbles:e,on:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Contact</button>\n                            '),s}function b(e,t){var s,n="";return t.buffer.push("\n                            "),s=a["if"].call(e,"address1Include",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(17,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                                \n                            "),s=a["if"].call(e,"address2Include",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(19,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),s=a["if"].call(e,"address3Include",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(21,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),s=a["if"].call(e,"address4Include",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(23,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                            \n                        "),n}function y(e,t){var s,n,r="";return t.buffer.push("\n                                "),t.buffer.push(bt((s=a["em-text"]||e&&e["em-text"],n={hash:{label:"address1Label",property:"address",rows:3,"class":"col-xs-12 col-sm-6"},hashTypes:{label:"ID",property:"STRING",rows:"INTEGER","class":"STRING"},hashContexts:{label:e,property:e,rows:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):mt.call(e,"em-text",n)))),t.buffer.push("\n                            "),r}function g(e,t){var s,n,r="";return t.buffer.push("\n                                "),t.buffer.push(bt((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"address2Label",property:"address2","class":"col-xs-12 col-sm-6"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):mt.call(e,"em-input",n)))),t.buffer.push("\n                            "),r}function v(e,t){var s,n,r="";return t.buffer.push("\n                                "),t.buffer.push(bt((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"address3Label",property:"address3","class":"col-xs-12 col-sm-6"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):mt.call(e,"em-input",n)))),t.buffer.push("\n                            "),r}function x(e,t){var s,n,r="";return t.buffer.push("\n                                "),t.buffer.push(bt((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"address4Label",property:"address4","class":"col-xs-12 col-sm-6"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):mt.call(e,"em-input",n)))),t.buffer.push("\n                            "),r}function T(e,t){var s,n,r="";return t.buffer.push("\n                            "),t.buffer.push(bt((s=a["em-text"]||e&&e["em-text"],n={hash:{label:"Address",property:"address",rows:3,"class":"col-xs-12 col-sm-6"},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER","class":"STRING"},hashContexts:{label:e,property:e,rows:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):mt.call(e,"em-text",n)))),t.buffer.push("\n                        "),r}function I(e,t){var s,n="";return t.buffer.push("\n                    "),s=a["if"].call(e,"haveAdditionalContacts",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(28,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),n}function D(e,t){var s,n="";return t.buffer.push('\n                        <h4>Additional Contacts</h4>\n                        <table class="table">\n                            <tr class="table-header">\n                                <th>Name</th>\n                                <th>Phone</th>\n                                <th>Email</th>\n                                <th>Relationship</th>\n                                '),s=a["if"].call(e,"parentController.canDeleteContact",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(29,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            </tr>\n                            "),s=a.each.call(e,"additionalContacts",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(31,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </table>                \n                    "),n}function C(e,t){t.buffer.push("\n                                    <th>Action</th>\n                                ")}function R(e,t){var s,n="";return t.buffer.push("\n                                <tr>\n                                    <td>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"phone",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"email",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"relationship",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    "),s=a["if"].call(e,"patientController.canDeleteContact",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(32,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </tr>\n                            "),n}function S(e,t){var s="";return t.buffer.push('\n                                        <td>\n                                            <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteContact","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                                        </td>\n                                    '),s}function N(e,t){var s,n="";return t.buffer.push('\n            <div role="tabpanel" class="tab-pane" id="photos">\n                <div class="panel">    \n                    <div class="panel-heading">\n                        <h3 class="panel-title">\n\n                            Photos\n                            '),s=a["if"].call(e,"canAddPhoto",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(35,_,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('                \n                        </h3>\n                    </div>\n                    <div class="panel-body detail-section-content">\n                        <div class="row">\n                            '),s=a.each.call(e,"photos",{hash:{itemController:"patients/photo-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:ft.noop,fn:ft.program(37,w,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="medication">\n                <div class="panel">\n                    <div class="panel-heading">\n                        <h3 class="panel-title">\n                            Medication\n                            '),s=a["if"].call(e,"canAddMedication",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(42,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </h3>\n                    </div>\n                    <div class="panel-body detail-section-content">\n                        <table class="table">\n                            <tr class="table-header">\n                                <th>Date</th>\n                                <th>Name</th>\n                                <th>Status</th>\n                                <th>Prescription</th>\n                                <th>Requested By</th>\n                                <th>Actions</th>\n                            </tr>\n                            '),s=a.each.call(e,"patientMedications",{hash:{itemController:"medication/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:ft.noop,fn:ft.program(44,L,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="imaging">\n                <div class="panel">\n                    <div class="panel-heading">\n                        <h3 class="panel-title">\n                            Imaging\n                            '),s=a["if"].call(e,"canAddImaging",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(50,O,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </h3>\n                    </div>\n                    <div class="panel-body detail-section-content">\n                        <table class="table">\n                            <tr class="table-header">\n                                <th>Date Requested</th>\n                                <th>Imaging Type</th>\n                                <th>Status</th>\n                                <th>Date Processed</th>\n                                <th>Result</th>\n                                <th>Notes</th>\n                                <th>Requested By</th>\n                                <th>Actions</th>\n                            </tr>\n                            '),s=a.each.call(e,"patientImaging",{hash:{itemController:"imaging/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:ft.noop,fn:ft.program(52,q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="labs">\n                <div class="panel">\n                    <div class="panel-heading">\n                        <h3 class="panel-title">\n                            Labs\n                            '),s=a["if"].call(e,"canAddLab",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(58,H,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </h3>\n                    </div>\n\n                    <div class="panel-body detail-section-content">\n                        <table class="table">\n                            <tr class="table-header">\n                                <th>Date Requested</th>\n                                <th>Lab Type</th>\n                                <th>Status</th>\n                                <th>Date Processed</th>\n                                <th>Result</th>\n                                <th>Notes</th>\n                                <th>Requested By</th>\n                                <th>Actions</th>\n                            </tr>\n                            '),s=a.each.call(e,"patientLabs",{hash:{itemController:"labs/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:ft.noop,fn:ft.program(60,U,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="visits">\n                <div class="panel">\n                    <div class="panel-heading">\n                        <h3 class="panel-title">\n                            Visits\n                            '),s=a["if"].call(e,"canAddVisit",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(66,z,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </h3>\n                    </div>\n\n                    <div class="panel-body detail-section-content">\n                        <table class="table" >\n                            <tr class="table-header">\n                                <th>Start Date</th>\n                                <th>End Date</th>\n                                <th>Diagnosis</th>\n                                <th>Provider</th>\n                                <th>Location</th>\n                                <th>Type</th>\n                                <th>Actions</th>\n                            </tr>\n                            '),s=a["with"].call(e,"","as","patientController",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(68,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </table>\n                    </div>\n                </div>\n                <div class="panel">\n                    <div class="panel-heading">\n                        <h3 class="panel-title">\n                            Appointments\n                            '),s=a["if"].call(e,"canAddAppointment",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(74,J,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </h3>\n                    </div>\n                    <div class="panel-body detail-section-content">\n                        <table class="table">\n                            <tr class="table-header">\n                                <th>Date</th>\n                                <th>Examiner</th>\n                                <th>Location</th>\n                                <th>Type</th>\n                                <th>Actions</th>\n                            </tr>\n                            '),s=a["with"].call(e,"","as","patientController",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(76,Z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </table>\n                    </div>\n                </div>\n            </div>\n            "),s=a["if"].call(e,"canAddSocialWork",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(82,at,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n
}function _(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"showAddPhoto",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>New Photo</button>\n                            '),s}function w(e,t){var s,n="";return t.buffer.push('\n                                <div class="col-sm-4 col-md-3">                                \n                                     <div '),t.buffer.push(bt(a.action.call(e,"editPhoto","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(' class="thumbnail">\n                                        <img '),t.buffer.push(bt(a["bind-attr"].call(e,{hash:{alt:"caption",src:"photoUrl"},hashTypes:{alt:"STRING",src:"STRING"},hashContexts:{alt:e,src:e},contexts:[],types:[],data:t}))),t.buffer.push(' class="img-responsive" >\n                                        <div class="caption">\n                                            '),s=a._triageMustache.call(e,"caption",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            <p>\n                                                "),s=a["if"].call(e,"parentController.canAddPhoto",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(38,P,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                                "),s=a["if"].call(e,"parentController.canDeletePhoto",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(40,A,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            "),n}function P(e,t){var s="";return t.buffer.push('\n                                                    <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"editPhoto","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                                "),s}function A(e,t){var s="";return t.buffer.push('\n                                                    <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeletePhoto","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                                                '),s}function G(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"newMedication",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>New Medication</button>\n                            '),s}function L(e,t){var s,n,r,i="";return t.buffer.push("\n                                <tr "),t.buffer.push(bt(a.action.call(e,"editMedication","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                    <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"prescriptionDate",r):mt.call(e,"date-format","prescriptionDate",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"prescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>\n                                        "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(45,E,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </td>\n                                </tr>\n                            "),i}function E(e,t){var s,n="";return t.buffer.push("\n                                            "),s=a["if"].call(e,"parentController.canAddMedication",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(46,k,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            "),s=a["if"].call(e,"parentController.canDeleteMedication",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(48,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),n}function k(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"editMedication","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                            "),s}function M(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteMedication","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                                            '),s}function O(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"newImaging",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Imaging</button>\n                            '),s}function q(e,t){var s,n,r,i="";return t.buffer.push("\n                                <tr "),t.buffer.push(bt(a.action.call(e,"editImaging","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                    <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):mt.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"imagingType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"imagingDate",r):mt.call(e,"date-format","imagingDate",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"result",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>\n                                        "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(53,B,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </td>\n                                </tr>\n                            "),i}function B(e,t){var s,n="";return t.buffer.push("\n                                            "),s=a["if"].call(e,"parentController.canAddImaging",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(54,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            "),s=a["if"].call(e,"parentController.canDeleteImaging",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(56,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),n}function V(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"editImaging","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                            "),s}function F(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteImaging","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                            '),s}function H(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"newLab",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Lab</button>\n                            '),s}function U(e,t){var s,n,r,i="";return t.buffer.push("\n                                <tr "),t.buffer.push(bt(a.action.call(e,"editLab","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                    <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):mt.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"labType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"labDate",r):mt.call(e,"date-format","labDate",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"result",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>\n                                        "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(61,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </td>\n                                </tr>\n                            "),i}function j(e,t){var s,n="";return t.buffer.push("\n                                            "),s=a["if"].call(e,"parentController.canAddLab",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(62,K,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            "),s=a["if"].call(e,"parentController.canDeleteLab",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(64,Q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),n}function K(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"editLab","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                            "),s}function Q(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteLab","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                            '),s}function z(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"newVisit",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Visit</button>\n                            '),s}function W(e,t){var s,n="";return t.buffer.push("\n                                "),s=a.each.call(e,"visits",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(69,$,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),n}function $(e,t){var s,n,r,i="";return t.buffer.push("\n                                    <tr "),t.buffer.push(bt(a.action.call(e,"editVisit","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                        <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"startDate",r):mt.call(e,"date-format","startDate",r)))),t.buffer.push("</td>\n                                        <td>"),t.buffer.push(bt((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"endDate",r):mt.call(e,"date-format","endDate",r)))),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"primaryDiagnosis",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"examiner",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"location",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"visitType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>\n                                            "),s=a["if"].call(e,"patientController.canAddVisit",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(70,X,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            "),s=a["if"].call(e,"patientController.canDeleteVisit",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(72,Y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        </td>\n                                    </tr>\n                                "),i}function X(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"editVisit","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                            "),s}function Y(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteVisit","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                            '),s}function J(e,t){var s="";return t.buffer.push('\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"newAppointment",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Appointment</button>\n                            '),s}function Z(e,t){var s,n="";return t.buffer.push("\n                                "),s=a.each.call(e,"appointments",{hash:{itemController:"appointments/item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:ft.noop,fn:ft.program(77,et,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),n}function et(e,t){var s,n="";return t.buffer.push("\n                                    <tr "),t.buffer.push(bt(a.action.call(e,"editAppointment","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                        <td>"),s=a._triageMustache.call(e,"appointmentDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"provider",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"location",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>"),s=a._triageMustache.call(e,"appointmentType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td>\n                                            "),s=a["if"].call(e,"patientController.canAddAppointment",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(78,tt,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            "),s=a["if"].call(e,"patientController.canDeleteAppointment",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(80,st,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        </td>\n                                    </tr>\n                                "),n}function tt(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"editAppointment","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                            "),s}function st(e,t){var s="";return t.buffer.push('\n                                                <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteAppointment","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                            '),s}function at(e,t){var s,n,r,i="";return t.buffer.push('\n                <div role="tabpanel" class="tab-pane" id="social">\n                    <div class="panel">\n                        <div class="panel-heading">\n                            <h3 class="panel-title">                \n                                Social Work Details                \n                            </h3>\n                        </div>\n                        <div class="panel-body detail-section-content">        \n                            <h4>\n                                Family Information              \n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"showEditFamily",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Family Member</button>\n                            </h4>            \n\n                            <table class="table">\n                                <tr class="table-header">\n                                    <th>Name</th>\n                                    <th>Age</th>\n                                    <th>Civil Status</th>\n                                    <th>Relation to Patient</th>\n                                    <th>Education</th>\n                                    <th>Occupation</th>\n                                    <th>Income</th>\n                                    <th>Insurance</th>\n                                    <th>Action</th>\n                                </tr>\n                                '),s=a["with"].call(e,"","as","patientController",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(83,nt,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                            </table>         \n                            <h4>\n                                Expenses\n                                <button type="button" class="btn btn-primary align-right" '),t.buffer.push(bt(a.action.call(e,"showEditExpense",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Expense</button>\n                            </h4>\n                            <table class="table">\n                                <tr class="table-header">\n                                    <th>Category</th>\n                                    <th>Sources</th>\n                                    <th>Monthly Cost</th>\n                                    <th>Actions</th>\n                                </tr>\n                                '),s=a["with"].call(e,"","as","patientController",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(87,ot,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),s=a["if"].call(e,"showExpenseTotal",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(91,ht,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                            </table>\n\n                            <div class="row">\n                                <div class="form-group col-sm-6">\n                                    <label>Living Arrangement</label>\n                                    '),t.buffer.push(bt((n=a["ext-radio"]||e&&e["ext-radio"],r={hash:{name:"livingArrangement",content:"livingArrangementList",value:"livingArrangement",includeOtherOption:!0,otherOptionLabel:"Other",radioLabelPath:"content",radioValuePath:"content"},hashTypes:{name:"ID",content:"ID",value:"ID",includeOtherOption:"BOOLEAN",otherOptionLabel:"STRING",radioLabelPath:"STRING",radioValuePath:"STRING"},hashContexts:{name:e,content:e,value:e,includeOtherOption:e,otherOptionLabel:e,radioLabelPath:e,radioValuePath:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"ext-radio",r)))),t.buffer.push('\n                                </div>\n                                <div class="form-group col-sm-6">\n                                    <label>Family Support System</label>\n                                    '),t.buffer.push(bt((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"Family members are living together",property:"familySupport1"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-checkbox",r)))),t.buffer.push("\n                                    "),t.buffer.push(bt((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"Family members listen, care and help one another",property:"familySupport2"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-checkbox",r)))),t.buffer.push("\n                                    "),t.buffer.push(bt((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"Spend time together in prayer especially in difficult times",property:"familySupport3"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-checkbox",r)))),t.buffer.push("\n                                    "),t.buffer.push(bt((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"Family and closest relatives have open communication",property:"familySupport4"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-checkbox",r)))),t.buffer.push("\n                                    "),t.buffer.push(bt((n=a["em-checkbox"]||e&&e["em-checkbox"],r={hash:{label:"Has relatives around who are responsive to families needs",property:"familySupport5"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-checkbox",r)))),t.buffer.push("\n                                </div>\n                            </div>\n                            "),t.buffer.push(bt((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Assessment/Findings",property:"notes"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-text",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Recommendation",property:"socialRecommendation"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-text",r)))),t.buffer.push("\n                            "),t.buffer.push(bt((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Action Taken",property:"socialActionTaken"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-text",r)))),t.buffer.push('\n                            <div class="row">\n\n                                '),t.buffer.push(bt((n=a["em-select"]||e&&e["em-select"],r={hash:{label:"Philhealth",property:"insurance",content:"philhealthTypes",optionValuePath:"content",optionLabelPath:"content",selected:"insurance","class":"col-sm-6"},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID","class":"STRING"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-select",r)))),t.buffer.push("\n                                "),t.buffer.push(bt((n=a["em-select"]||e&&e["em-select"],r={hash:{label:"Classification",property:"economicClassification",content:"economicClassificationTypes",optionValuePath:"content",optionLabelPath:"content",selected:"economicClassification","class":"col-sm-6",prompt:" "},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID","class":"STRING",prompt:"STRING"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e,"class":e,prompt:e},contexts:[],types:[],data:t},n?n.call(e,r):mt.call(e,"em-select",r)))),t.buffer.push("\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            "),i}function nt(e,t){var s,n="";return t.buffer.push("\n                                    "),s=a.each.call(e,"familyInfo",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(84,rt,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),n}function rt(e,t){var s,n="";return t.buffer.push("\n                                        <tr>\n                                            <td>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"age",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"civilStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"relationship",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"education",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"occupation",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"income",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"insurance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>\n\n                                            <td>\n                                                \n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"showEditFamily","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                                "),s=a["if"].call(e,"patientController.canDeleteSocialWork",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(85,it,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n\n                                            </td>\n                                        </tr>\n                                    "),n
}function it(e,t){var s="";return t.buffer.push('\n                                                    <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteFamily","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                                                '),s}function ot(e,t){var s,n="";return t.buffer.push("\n                                    "),s=a.each.call(e,"expenses",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(88,lt,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                "),n}function lt(e,t){var s,n="";return t.buffer.push("\n                                        <tr>\n                                            <td>"),s=a._triageMustache.call(e,"category",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"sources",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                            <td>"),s=a._triageMustache.call(e,"cost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>\n                                            <td>\n                                                <button type="button" class="btn btn-default neutral" '),t.buffer.push(bt(a.action.call(e,"showEditExpense","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                                "),s=a["if"].call(e,"patientController.canDeleteSocialWork",{hash:{},hashTypes:{},hashContexts:{},inverse:ft.noop,fn:ft.program(89,ut,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                            </td>\n                                        </tr>\n                                    "),n}function ut(e,t){var s="";return t.buffer.push('\n                                                    <button type="button" class="btn btn-default warning" '),t.buffer.push(bt(a.action.call(e,"showDeleteExpense","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>Delete</button>\n                                                '),s}function ht(e,t){var s,n="";return t.buffer.push('\n                                    <tr>\n                                        <td colspan="2"><b>Total Monthly Expenses</b></td>\n                                        <td>'),s=a._triageMustache.call(e,"totalExpenses",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                        <td></td>\n                                    </tr>\n                                "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var pt,ct,dt,ft=this,mt=a.helperMissing,bt=this.escapeExpression;ct=a["em-form"]||t&&t["em-form"],dt={hash:{model:"",submit_button:!1,bubbles:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN",bubbles:"BOOLEAN"},hashContexts:{model:t,submit_button:t,bubbles:t},inverse:ft.noop,fn:ft.program(1,i,r),contexts:[],types:[],data:r},pt=ct?ct.call(t,dt):mt.call(t,"em-form",dt),r.buffer.push(pt||0===pt?pt:"")})}),define("hospitalrun/patients/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/patient-visits","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{addPermission:"add_patient",deletePermission:"delete_patient",startKey:[],actions:{admitPatient:function(e){console.log("patient is:",e),this.getPatientVisits(e).then(function(t){this.send("createNewVisit",e,t)}.bind(this))},dischargePatient:function(e){this.getPatientVisits(e).then(function(e){var t=e.findBy("status","Admitted");t&&(t.set("status","Discharged"),t.set("endDate",new Date),this.transitionToRoute("visits.edit",t))}.bind(this))}}})}),define("hospitalrun/patients/index/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"patient",pageTitle:"Patient Listing",_getStartKeyFromItem:function(e){var t=e.get("displayPatientId");return[t,"patient_"+e.get("id")]},_modelQueryParams:function(){return{mapReduce:"patient_by_display_id"}}})}),define("hospitalrun/patients/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            '),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"id",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(2,o,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"firstName",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(4,l,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"lastName",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(6,u,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"gender",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(8,h,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"dateOfBirth",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(10,p,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n=a["sortable-column"]||e&&e["sortable-column"],r={hash:{sortBy:"status",sortDesc:"sortDesc",sortKey:"sortKey"},hashTypes:{sortBy:"STRING",sortDesc:"ID",sortKey:"ID"},hashContexts:{sortBy:e,sortDesc:e,sortKey:e},inverse:C.noop,fn:C.program(12,c,t),contexts:[],types:[],data:t},s=n?n.call(e,r):R.call(e,"sortable-column",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(14,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        \n        "),s=a.each.call(e,{hash:{itemController:"patients/patient-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:C.noop,fn:C.program(16,f,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("        \n    </table>\n"),i}function o(e,t){t.buffer.push("ID")}function l(e,t){t.buffer.push("First Name")}function u(e,t){t.buffer.push("Last Name")}function h(e,t){t.buffer.push("Gender")}function p(e,t){t.buffer.push("DOB")}function c(e,t){t.buffer.push("Status")}function d(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function f(e,t){var s,n,r,i="";return t.buffer.push("\n            <tr "),t.buffer.push(D(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                <td>"),s=a._triageMustache.call(e,"displayPatientId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"firstName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"lastName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"gender",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),t.buffer.push(D((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"dateOfBirth",r):R.call(e,"date-format","dateOfBirth",r)))),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                "),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(17,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </tr>\n        "),i}function m(e,t){var s,n="";return t.buffer.push("\n                    <td>\n                        "),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(18,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"canAdmitPatient",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(20,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"canDischargePatient",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(22,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                        \n                        "),s=a["if"].call(e,"canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(24,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </td>\n                "),n}function b(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default neutral" '),t.buffer.push(D(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                        "),s}function y(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default success" '),t.buffer.push(D(a.action.call(e,"admitPatient","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="glyphicon glyphicon-log-in"></span> Admit</button>\n                        '),s}function g(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default info" '),t.buffer.push(D(a.action.call(e,"dischargePatient","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="glyphicon glyphicon-log-out"></span> Discharge</button>\n                        '),s}function v(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default warning" '),t.buffer.push(D(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                        '),s}function x(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No patients found.</em>\n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(27,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function T(e,t){var s="";return t.buffer.push('\n            <em>Create a new patient record?</em>\n            <button class="btn btn-primary on-white" '),t.buffer.push(D(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Patient</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var I,D=this.escapeExpression,C=this,R=a.helperMissing;I=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:C.program(26,x,r),fn:C.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(I||0===I?I:"")})}),define("hospitalrun/patients/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/patient-controller/controller",["ember","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{canAdmitPatient:function(){var e=this.get("admitted");return e?void 0:this.currentUserCan("admit_patient")}.property("admitted"),canDischargePatient:function(){var e=this.get("admitted");return e?this.currentUserCan("discharge_patient"):void 0}.property("admitted"),canDelete:function(){return this.parentController.get("canDelete")}.property(),canAdd:function(){return this.parentController.get("canAdd")}.property(),showActions:function(){return this.parentController.get("showActions")}.property()})}),define("hospitalrun/patients/photo-item/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({needs:"filesystem",fileSystem:s.computed.alias("controllers.filesystem"),isFileSystemEnabled:s.computed.alias("controllers.filesystem.isFileSystemEnabled"),photoUrl:function(){var e=this.get("fileName"),t=this.get("fileSystem"),a=this.get("isFileSystemEnabled"),n=this.get("url");return a&&t.pathToFileSystemURL(e).then(function(e){s.isEmpty(e)||this.set("photoUrl",e)}.bind(this)),n}.property("fileName","url")})}),define("hospitalrun/patients/photo/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({needs:"patients/edit",title:function(){var e=this.get("isNew");return e?"Add Photo":"Edit Photo"}.property("isNew"),updateButtonText:function(){var e=this.get("isNew");return e?"Add":"Update"}.property("isNew"),updateButtonAction:"update",showUpdateButton:!0,editController:s.computed.alias("controllers.patients/edit"),actions:{cancel:function(){this.send("closeModal")},update:function(){var e=this.get("caption"),t=this.get("isNew"),s=this.get("photoFile");t?this.get("editController").send("addPhoto",s,e):this.get("editController").send("updatePhoto",this.get("model"))}}})}),define("hospitalrun/patients/photo/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a["if"].call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:f.program(4,l,t),fn:f.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    <div class="row">        \n        '),t.buffer.push(d((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"caption",label:"Caption"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-input",r)))),t.buffer.push("\n    </div>\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(d((s=a["take-photo"]||e&&e["take-photo"],n={hash:{photoFile:"photoFile"},hashTypes:{photoFile:"ID"},hashContexts:{photoFile:e},contexts:[],types:[],data:t},s?s.call(e,n):c.call(e,"take-photo",n)))),t.buffer.push("\n    "),r}function l(e,t){var s="";return t.buffer.push('\n        <div class="thumbnail">\n            <img '),t.buffer.push(d(a["bind-attr"].call(e,{hash:{alt:"caption",src:"url"},hashTypes:{alt:"STRING",src:"STRING"},hashContexts:{alt:e,src:e},contexts:[],types:[],data:t}))),t.buffer.push(' class="img-responsive" >\n        </div>\n    '),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h,p,c=a.helperMissing,d=this.escapeExpression,f=this;h=a["em-form"]||t&&t["em-form"],p={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:f.noop,fn:f.program(1,i,r),contexts:[],types:[],data:r},u=h?h.call(t,p):c.call(t,"em-form",p),r.buffer.push(u||0===u?u:"")})}),define("hospitalrun/patients/photo/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/reports/controller",["hospitalrun/controllers/abstract-report-controller","ember","hospitalrun/mixins/visit-types","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{needs:["patients"],clinicList:r.computed.alias("controllers.patients.clinicList"),diagnosisList:r.computed.alias("controllers.patients.diagnosisList"),physicianList:r.computed.alias("controllers.patients.physicianList"),locationList:r.computed.alias("controllers.patients.locationList"),visitTypesList:r.computed.alias("controllers.patients.visitTypeList"),patientDetails:{},admissionReportColumns:{gender:{label:"Gender",include:!0,property:"gender"},total:{label:"Total",include:!0,property:"total",format:"_numberFormat"}},admissionDetailReportColumns:{id:{label:"Id",include:!0,property:"patientId"},name:{label:"Name",include:!0,property:"patientName"},admissionDate:{label:"Admission Date",include:!0,property:"admissionDate",format:"_dateTimeFormat"},dischargeDate:{label:"Discharge Date",include:!1,property:"dischargeDate",format:"_dateTimeFormat"},patientDays:{label:"Patient Days",include:!1,property:"patientDays",format:"_numberFormat"}},diagnosticReportColumns:{type:{label:"Type",include:!0,property:"type"},total:{label:"Total",include:!0,property:"total",format:"_numberFormat"}},procedureDetailReportColumns:{id:{label:"Id",include:!0,property:"patient.displayPatientId"},name:{label:"Name",include:!0,property:"patient.displayName"},procedure:{label:"Procedure",include:!0,property:"procedure"},procedureDate:{label:"Procedure Date",include:!0,property:"procedureDate",format:"_dateTimeFormat"}},reportColumns:{visitDate:{label:"Visit Date",include:!0,property:"visitDate"},visitType:{label:"Visit Type",include:!0,property:"visitType"},visitLocation:{label:"Location",include:!1,property:"location"},examiner:{label:"Examiner",include:!0,property:"examiner"},name:{label:"Name",include:!0,property:"patient.displayName"},id:{label:"Id",include:!0,property:"patient.displayPatientId"},gender:{label:"Gender",include:!0,property:"patient.gender"},dateOfBirth:{label:"Date Of Birth",include:!0,property:"patient.dateOfBirth",format:"_dateFormat"},age:{label:"Age",include:!1,property:"patient.age"},primaryDiagnosis:{label:"Primary Diagnosis",include:!1,property:"primaryDiagnosis"},secondaryDiagnoses:{label:"Secondary Diagnoses",include:!1,property:"additionalDiagnoses",format:"_diagnosisListToString"},procedures:{label:"Procedures",include:!1,property:"procedures",format:"_procedureListToString"},contacts:{label:"Contacts",include:!1,property:"patient",format:"_contactListToString"},referredBy:{label:"Referred By",include:!1,property:"patient.referredBy"},referredDate:{label:"Referred Date",include:!1,property:"patient.referredDate",format:"_dateFormat"}},reportTypes:[{name:"Admissions Detail",value:"detailedAdmissions"},{name:"Admissions Summary",value:"admissions"},{name:"Diagnostic Testing",value:"diagnostic"},{name:"Discharges Detail",value:"detailedDischarges"},{name:"Discharges Summary",value:"discharges"},{name:"Procedures Detail",value:"detailedProcedures"},{name:"Procedures Summary",value:"procedures"},{name:"Total Patient Days",value:"patientDays"},{name:"Total Patient Days (Detailed)",value:"detailedPatientDays"},{name:"Visit",value:"visit"}],isDischargeReport:function(){var e=this.get("reportType");return e.toLowerCase().indexOf("discharges")>-1}.property("reportType"),isVisitReport:function(){var e=this.get("reportType");return"visit"===e}.property("reportType"),_addContactToList:function(e,t,s,a){var n=[];r.isEmpty(t)&&r.isEmpty(e)||(r.isEmpty(e)||n.push(e),r.isEmpty(t)||n.push(t),a.push(s+n.join(", ")))},_addReportRow:function(e,t,s,a){!r.isEmpty(a)||r.isEmpty(e.patient)||r.isEmpty(e.patient.get("id"))||(a={action:"viewPatient",model:e.patient.get("id")}),this._super(e,t,s,a)},_addRowsByType:function(e,t,s,a){var n=this._totalByType(e,t,s);n.forEach(function(e){this._addReportRow(e,!0,a)}.bind(this))},_addPatientProcedureRows:function(e,t){return new r.RSVP.Promise(function(s,a){e.forEach(function(e){r.isEmpty(e.records)||e.records.forEach(function(s,n){var r=s.get("visit");this._getPatientDetails(r.get("patient.id")).then(function(a){this._addReportRow({patient:a,procedure:s.get("description"),procedureDate:s.get("procedureDate")},!1,t),n+1===e.records.length&&this._addReportRow({procedure:"Total for %@: %@".fmt(e.type,e.total)},!0,t)}.bind(this),a)}.bind(this))}.bind(this)),s()}.bind(this))},_contactListToString:function(e){var t,s=e.get("additionalContacts"),a=[],n=[],i=e.get("email"),o=e.get("phone");return this._addContactToList(o,i,"Primary: ",n),r.isEmpty(s)||s.forEach(function(e){a=[],t="",r.isEmpty(e.name)||r.isEmpty(e.relationship)||(r.isEmpty(e.name)||(t+=e.name),r.isEmpty(e.relationship)||(r.isEmpty(t)||(t+=" - "),t+=e.relationship),t+=": "),this._addContactToList(e.phone,e.email,t,n)}.bind(this)),n.join(";\n")},_dateTimeFormat:function(e){return this._dateFormat(e,"l h:mm A")},_diagnosisListToString:function(e){return this._listToString(e,"description","date")},_findDiagnosticsByDate:function(){var e=this.get("endDate"),t=this.get("startDate"),s={options:{},mapReduce:"imaging_by_status"},a=this.get("maxValue");return new r.RSVP.Promise(function(n,i){s.options.startkey=["Completed",null,t.getTime(),null],r.isEmpty(e)||(e=moment(e).endOf("day").toDate(),s.options.endkey=["Completed",a,e.getTime(),a]),this.store.find("imaging",s).then(function(e){var t={imaging:e};s.mapReduce="lab_by_status",this.store.find("lab",s).then(function(e){t.labs=e,n(t)},i)}.bind(this),i)}.bind(this))},_findProceduresByDate:function(){var e=this.get("endDate"),t=this.get("startDate"),s={options:{},mapReduce:"procedure_by_date"},a=this.get("maxValue");return new r.RSVP.Promise(function(n,i){s.options.startkey=[t.getTime(),null],r.isEmpty(e)||(e=moment(e).endOf("day").toDate(),s.options.endkey=[e.getTime(),a]),this.store.find("procedure",s).then(n,i)}.bind(this))},_findVisitsByDate:function(){var e=this.get("endDate"),t=this.get("startDate"),s={options:{},mapReduce:"visit_by_date"},a=this.get("maxValue");return new r.RSVP.Promise(function(n,i){var o=this.get("isDischargeReport");s.options.startkey=o?[null,t.getTime()]:[t.getTime(),null],r.isEmpty(e)||(e=moment(e).endOf("day").toDate(),s.options.endkey=o?[a,e.getTime(),a]:[e.getTime(),a,a]),this.store.find("visit",s).then(n,i)}.bind(this))},_filterByLike:function(e,t,s){return e.filter(function(e){var t=e.get("field");if(r.isEmpty(t))return!1;if(r.isArray(t)){var a=t.find(function(e){return this._haveLikeValue(e,s)}.bind(this));return!r.isEmpty(a)}return this._haveLikeValue(t,s)})},_filterInPatientVisit:function(e){var t=e.get("outPatient"),s=e.get("status");return!t&&!r.isEmpty(s)},_finishVisitReport:function(e){var t=this._totalByType(e,"visitType","total");t.forEach(function(e){"total"===e.type?this._addReportRow({visitDate:"Total visits: "+e.total}):(e.records.forEach(function(e){this._addReportRow(e)}.bind(this)),this._addReportRow({visitDate:"Total for %@: %@".fmt(e.type,e.total)}))}.bind(this)),this._finishReport()},_generateAdmissionOrDischargeReport:function(e,t){var s,a=!1,n=0,i=[],o=0,l=[];t.indexOf("detailed")>-1?(a=!0,s=this.get("admissionDetailReportColumns"),s.patientDays.include=!1,s.dischargeDate.include="detailedDischarges"===t?!0:!1):s=this.get("admissionReportColumns"),e=e.filter(this._filterInPatientVisit),e.forEach(function(e){if(!this.get("isDischargeReport")||!r.isEmpty(e.get("endDate"))){var t={patient:e.get("patient"),patientId:e.get("patient.displayPatientId"),patientName:e.get("patient.displayName"),admissionDate:e.get("startDate"),dischargeDate:e.get("endDate")};"F"===e.get("patient.gender")?(n++,i.push(t)):(o++,l.push(t))}}.bind(this)),a?(i.forEach(function(e){this._addReportRow(e,!1,s)}.bind(this)),this._addReportRow({patientId:"Female Total: "+n},!0,s),l.forEach(function(e){this._addReportRow(e,!1,s)}.bind(this)),this._addReportRow({patientId:"Male Total: "+o},!0,s),this._addReportRow({patientId:"Grand Total: "+(n+o)},!0,s)):(this._addReportRow({gender:"Female",total:n},!0,s),this._addReportRow({gender:"Male",total:o},!0,s),this._addReportRow({gender:"Total: ",total:n+o},!0,s)),this._finishReport(s)},_generateDiagnosticReport:function(){this._findDiagnosticsByDate().then(function(e){var t=this.get("diagnosticReportColumns");this._addRowsByType(e.imaging,"imagingType.name","Total for imaging: ",t),this._addRowsByType(e.labs,"labType.name","Total for labs: ",t),this._finishReport(t)}.bind(this),function(e){this._notifyReportError("Error in _generateDiagnosticReport:"+e)}.bind(this))},_generatePatientDaysReport:function(e,t){e=e.filter(this._filterInPatientVisit);var s,a=0===t.indexOf("detailed"),n=this.get("endDate"),i=moment(this.get("startDate")).startOf("day");a?(s=this.get("admissionDetailReportColumns"),s.patientDays.include=!0,s.dischargeDate.include=!0):s={total:{label:"Total",include:!0,property:"total",format:"_numberFormat"}},n=r.isEmpty(n)?moment().endOf("day"):moment(n).endOf("day");var o=e.reduce(function(e,t){var o=t.get("endDate"),l=moment(t.get("startDate")).startOf("day");o=r.isEmpty(o)?moment().endOf("day"):moment(o).endOf("day"),l.isBefore(i)&&(l=i),o.isAfter(n)&&(o=n);var u=o.diff(l,"days",!0);return a&&this._addReportRow({patient:t.get("patient"),patientId:t.get("patient.displayPatientId"),patientName:t.get("patient.displayName"),admissionDate:t.get("startDate"),dischargeDate:t.get("endDate"),patientDays:u},!1,s),e+=u}.bind(this),0);a?this._addReportRow({patientDays:"Total: "+this._numberFormat(o)},!0,s):this._addReportRow({total:o},!1,s),this._finishReport(s)},_generateProcedureReport:function(e){this._findProceduresByDate().then(function(t){var s;if(0===e.indexOf("detailed")){s=this.get("procedureDetailReportColumns");var a=this._totalByType(t,"description","Total procedures: ");this._addPatientProcedureRows(a,s).then(function(){this._finishReport(s)}.bind(this),function(e){this._notifyReportError("Error in  _generateProcedureReport:"+e)}.bind(this))}else s=this.get("diagnosticReportColumns"),this._addRowsByType(t,"description","Total procedures: ",s),this._finishReport(s)}.bind(this),function(e){this._notifyReportError("Error in _generateProcedureReport:"+e)}.bind(this))},_generateVisitReport:function(e){var t=this.get("reportColumns"),s=this.getProperties("examiner","visitDate","visitType","location","clinic","primaryDiagnosis","secondaryDiagnosis");for(var a in s)if(!r.isEmpty(s[a]))switch(a){case"diagnosis":e=this._filterByLike(e,"diagnosisList",s[a]);break;default:e=e.filterBy(a,s[a])}if(t.procedures.include){var n=[];e.forEach(function(e){n.push(e.get("procedures"))}),r.RSVP.all(n).then(function(){this._finishVisitReport(e)}.bind(this))}else this._finishVisitReport(e)},_getPatientDetails:function(e){var t=this.get("patientDetails");return r.isEmpty(t[e])?this.store.find("patient",e):r.RSVP.resolve(t[e])},_haveLikeValue:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())>-1},_listToString:function(e,t,s){var a=[];return r.isEmpty(e)||(a=e.map(function(e){return r.get(e,t)+"("+this._dateFormat(r.get(e,s))+")"}.bind(this))),a.join(",\n")},_totalByType:function(e,t,s){var a=0,n=[];return e.forEach(function(e){var s,i=e.get(t);r.isEmpty(i)||(s=n.findBy("type",i),r.isEmpty(s)&&(s={type:i,total:0,records:[]},n.push(s)),s.total++,s.records.push(e),a++)}),n=n.sortBy("type"),n.push({type:s,total:a}),n},_procedureListToString:function(e){return this._listToString(e,"description","procedureDate")},_validateDates:function(){var e,t=this.get("endDate"),s=!0,a=this.get("startDate");return r.isEmpty(a)?(e="Please enter a start date.",s=!1):!r.isEmpty(t)&&t.getTime()<a.getTime()&&(e="Please enter an end date after the start date.",s=!1),s||this.displayAlert("Error Generating Report",e),s},actions:{generateReport:function(){if(this._validateDates()){var e=this.get("reportRows"),t=this.get("reportType");switch(e.clear(),this.showProgressModal(),t){case"diagnostic":this._generateDiagnosticReport();break;case"detailedProcedures":case"procedures":this._generateProcedureReport(t);break;case"admissions":case"discharges":case"detailedAdmissions":case"detailedDischarges":case"detailedPatientDays":case"patientDays":case"visit":this._findVisitsByDate().then(function(e){switch(t){case"admissions":case"detailedAdmissions":case"detailedDischarges":case"discharges":this._generateAdmissionOrDischargeReport(e,t);break;case"detailedPatientDays":case"patientDays":this._generatePatientDaysReport(e,t);break;case"visit":this._generateVisitReport(e)}}.bind(this),function(e){this._notifyReportError("Error in _findVisitsByDate:"+e)}.bind(this))}}},viewPatient:function(e){this.store.find("patient",e).then(function(e){e.set("returnTo","patients.reports"),this.transitionToRoute("patients.edit",e)}.bind(this))}}})}),define("hospitalrun/patients/reports/route",["hospitalrun/routes/abstract-index-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({pageTitle:"Patient Report",model:function(){return n.RSVP.resolve()}})}),define("hospitalrun/patients/reports/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="row">\n                '),t.buffer.push(m((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-xs-3",label:"Report Type",property:"reportType",content:"reportTypes",optionValuePath:"content.value",optionLabelPath:"content.name",selected:"reportType"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},n?n.call(e,r):f.call(e,"em-select",r)))),t.buffer.push('\n            </div>\n            <div class="row">\n                '),t.buffer.push(m((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"startDate",label:"Start Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):f.call(e,"date-picker",r)))),t.buffer.push("\n                "),t.buffer.push(m((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"endDate",label:"End Date","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):f.call(e,"date-picker",r)))),t.buffer.push("\n            </div>\n            "),s=a["if"].call(e,"isVisitReport",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),i
}function o(e,t){var s,n,r="";return t.buffer.push('\n                <div class="row">\n                    '),t.buffer.push(m((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-sm-6",label:"Visit Type",property:"visitType",content:"visitTypes",optionValuePath:"content",optionLabelPath:"content",prompt:" "},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-select",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-sm-6",label:"Examiner",property:"examiner",content:"physicianList.value",optionValuePath:"content",optionLabelPath:"content",prompt:" "},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-select",n)))),t.buffer.push('                \n                </div>\n                <div class="row">\n                    '),t.buffer.push(m((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-sm-6",label:"Location",property:"location",content:"locationList.value",optionValuePath:"content",optionLabelPath:"content",prompt:" "},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-select",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-sm-6",label:"Clinic",property:"clinic",content:"clinicList.value",optionValuePath:"content",optionLabelPath:"content",prompt:" "},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-select",n)))),t.buffer.push('\n                </div>\n                <div class="row">\n                    <div class="form-group col-xs-12">                        \n                        '),t.buffer.push(m((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"diagnosis",label:"Diagnosis",list:"diagnosisList"},hashTypes:{property:"STRING",label:"STRING",list:"ID"},hashContexts:{property:e,label:e,list:e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"select-or-typeahead",n)))),t.buffer.push(' \n                    </div>\n                </div>        \n\n                <h3>Fields to Include</h3>\n                <div class="row">\n                    <div class="col-xs-1"></div>\n                    '),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.id.label",property:"reportColumns.id.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.name.label",property:"reportColumns.name.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("                \n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.age.label",property:"reportColumns.age.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.contacts.label",property:"reportColumns.contacts.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.dateOfBirth.label",property:"reportColumns.dateOfBirth.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push('\n                </div>\n                <div class="row">\n                    <div class="col-xs-1"></div>        \n                    '),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.examiner.label",property:"reportColumns.examiner.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.gender.label",property:"reportColumns.gender.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.primaryDiagnosis.label",property:"reportColumns.primaryDiagnosis.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.procedures.label",property:"reportColumns.procedures.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.referredBy.label",property:"reportColumns.referredBy.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push('\n                </div>\n                <div class="row">\n                    <div class="col-xs-1"></div>\n                    '),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.referredDate.label",property:"reportColumns.referredDate.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.secondaryDiagnoses.label",property:"reportColumns.secondaryDiagnoses.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.visitDate.label",property:"reportColumns.visitDate.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.visitLocation.label",property:"reportColumns.visitLocation.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                    "),t.buffer.push(m((s=a["em-checkbox"]||e&&e["em-checkbox"],n={hash:{label:"reportColumns.visitType.label",property:"reportColumns.visitType.include","class":"col-xs-2"},hashTypes:{label:"ID",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"em-checkbox",n)))),t.buffer.push("\n                </div>\n            "),r}function l(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="panel panel-primary">\n        <div class="panel-heading">            \n            <h3 class="panel-title">'),s=a._triageMustache.call(e,"reportTitle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(m((n=a.partial||e&&e.partial,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"paging",r):f.call(e,"partial","paging",r)))),t.buffer.push('</h3>\n        </div>\n        <div class="panel-body">\n            <table class="table">\n                <tr class="table-header">\n                    '),s=a.each.call(e,"reportHeaders",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n                "),t.buffer.push(m((n=a.partial||e&&e.partial,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"report-rows",r):f.call(e,"partial","report-rows",r)))),t.buffer.push('                \n            </table>\n        </div>\n        <div class="panel-footer">\n            <a '),t.buffer.push(m(a["bind-attr"].call(e,{hash:{href:"csvExport"},hashTypes:{href:"STRING"},hashContexts:{href:e},contexts:[],types:[],data:t}))),t.buffer.push(' target="_blank" download="report.csv" class="btn btn-default">Export Report</a>\n\n        </div>    \n    </div>\n'),i}function u(e,t){var s,n="";return t.buffer.push("\n                        <th>\n                            "),s=a._triageMustache.call(e,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </th>\n                    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p,c,d="",f=a.helperMissing,m=this.escapeExpression,b=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">\n        '),p=a["em-form"]||t&&t["em-form"],c={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:b.noop,fn:b.program(1,i,r),contexts:[],types:[],data:r},h=p?p.call(t,c):f.call(t,"em-form",c),(h||0===h)&&r.buffer.push(h),r.buffer.push('\n    </div>\n    <div class="panel-footer">\n        <button class="btn btn-default" '),r.buffer.push(m(a.action.call(t,"generateReport",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r}))),r.buffer.push(">Generate Report</button>\n    </div>\n</div>\n"),h=a["if"].call(t,"showReportResults",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,l,r),contexts:[t],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),d})}),define("hospitalrun/patients/route",["hospitalrun/routes/abstract-module-route","ember","hospitalrun/mixins/patient-id","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{addCapability:"add_patient",additionalModels:[{name:"addressOptions",findArgs:["option","address_options"]},{name:"clinicList",findArgs:["lookup","clinic_list"]},{name:"countryList",findArgs:["lookup","country_list"]},{name:"diagnosisList",findArgs:["lookup","diagnosis_list"]},{name:"locationList",findArgs:["lookup","visit_location_list"]},{name:"physicianList",findArgs:["lookup","physician_list"]},{name:"pricingProfiles",findArgs:["price-profile"]},{name:"statusList",findArgs:["lookup","patient_status_list"]},{name:"visitTypesList",findArgs:["lookup","visit_types"]}],actions:{createNewVisit:function(e,t){var s=t.get("lastObject"),a=this.get("store").createRecord("visit",{visitType:"Admission",startDate:new Date,status:"Admitted",patient:e});r.isEmpty(s)||a.setProperties(s.getProperties("primaryDiagnosis","primaryBillingDiagnosis")),this.transitionTo("visits.edit",a)}},moduleName:"patients",newButtonText:"+ new patient",sectionTitle:"Patients",subActions:[{text:"Patient listing",linkTo:"patients.index"}]})}),define("hospitalrun/patients/search/controller",["hospitalrun/patients/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/search/route",["hospitalrun/routes/abstract-search-route","hospitalrun/utils/patient-search","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({moduleName:"patients",searchKeys:["friendlyId","externalPatientId","firstName","lastName"],searchIndex:n,searchModel:"patient"})}),define("hospitalrun/utils/patient-search",["exports"],function(e){"use strict";e["default"]={fields:["externalPatientId","firstName","friendlyId","lastName"],filter:function(e){var t=e._id.indexOf("_"),s=e._id.substring(0,t);return"patient"===s}}}),define("hospitalrun/patients/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(u((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"patients/index",n):l.call(e,"partial","patients/index",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.view.call(t,"search-listing",{hash:{newButtonText:"New Patient",allButtonText:"All Patients"},hashTypes:{newButtonText:"STRING",allButtonText:"STRING"},hashContexts:{newButtonText:t,allButtonText:t},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["STRING"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/patients/socialwork/expense/controller",["ember","hospitalrun/mixins/is-update-disabled","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:"patients",categoryTypes:["Clothing","Education","Electricity","Food","Fuel","Other","Rent","Transportation","Water"],editController:a.computed.alias("controllers.patients"),showUpdateButton:!0,title:"Expense",updateButtonAction:"update",updateButtonText:function(){return this.get("isNew")?"Add":"Update"}.property("isNew"),actions:{cancel:function(){this.send("closeModal")},update:function(){var e=this.getProperties("isNew","category","sources","cost");this.get("editController").send("updateExpense",e)}}})}),define("hospitalrun/patients/socialwork/expense/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["em-select"]||e&&e["em-select"],n={hash:{label:"Category",property:"category","class":"required",content:"categoryTypes",optionValuePath:"content",optionLabelPath:"content",selected:"category"},hashTypes:{label:"STRING",property:"STRING","class":"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{label:e,property:e,"class":e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-select",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Sources",property:"sources"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:e,property:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Cost",property:"cost","class":"required"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/patients/socialwork/expense/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/patients/socialwork/family-info/controller",["ember","hospitalrun/mixins/is-update-disabled","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:"patients",editController:a.computed.alias("controllers.patients"),showUpdateButton:!0,title:"Family Info",updateButtonAction:"update",updateButtonText:function(){return this.get("isNew")?"Add":"Update"}.property("isNew"),actions:{cancel:function(){this.send("closeModal")},update:function(){var e=this.getProperties("isNew","name","age","civilStatus","relationship","education","occupation","income","insurance");this.get("editController").send("updateFamilyInfo",e)}}})}),define("hospitalrun/patients/socialwork/family-info/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Name",property:"name","class":"required col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Age",property:"age","class":"col-xs-3"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Civil Status",property:"civilStatus","class":"col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Relationship To Patient",property:"relationship","class":"col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push('\n    </div>\n    <div class="row">        \n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Education",property:"education","class":"col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Occupation",property:"occupation","class":"col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push('\n    </div>\n    <div class="row">        \n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Income",property:"income","class":"col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Insurance",property:"insurance","class":"col-xs-6"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    </div>\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/patients/socialwork/family-info/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete Pricing Item"})}),define("hospitalrun/pricing/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete '),i=a._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("?\n</div>"),o})}),define("hospitalrun/pricing/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/lab-pricing-types","hospitalrun/mixins/imaging-pricing-types","hospitalrun/mixins/return-to","exports"],function(e,t,s,a,n,r){"use strict";var i=e["default"],o=t["default"],l=s["default"],u=a["default"],h=n["default"];r["default"]=i.extend(l,u,h,{needs:["pricing"],actions:{addOverride:function(e){var t=this.get("pricingOverrides");t.addObject(e),this.send("update",!0),this.send("closeModal")},deleteOverride:function(e){var t=e.overrideToDelete,s=this.get("pricingOverrides");s.removeObject(t),t.destroyRecord().then(function(){this.send("update",!0),this.send("closeModal")}.bind(this))},editOverride:function(e){o.isEmpty(e)&&(e=this.store.createRecord("override-price")),this.send("openModal","pricing.override",e)},showDeleteOverride:function(e){var t="Are you sure you want to delete this override?",s=o.Object.create({overrideToDelete:e}),a="Delete Override";this.displayConfirm(a,t,"deleteOverride",s)}},categories:["Imaging","Lab","Procedure","Ward"],expenseAccountList:o.computed.alias("controllers.pricing.expenseAccountList"),imagingPricingTypes:o.computed.alias("controllers.pricing.imagingPricingTypes"),labPricingTypes:o.computed.alias("controllers.pricing.labPricingTypes"),procedurePricingTypes:o.computed.alias("controllers.pricing.procedurePricingTypes"),wardPricingTypes:o.computed.alias("controllers.pricing.wardPricingTypes"),lookupListsToUpdate:function(){var e=this.get("category").toLowerCase(),t=[{name:"expenseAccountList",property:"expenseAccount",id:"expense_account_list"}];return t.push({name:e+"PricingTypes",property:"type",id:e+"_pricing_types"}),t}.property("category"),pricingTypes:function(){var e=this.get("category");if(!o.isEmpty(e)){var t=this.get(e.toLowerCase()+"PricingTypes");if(o.isEmpty(t)||o.isEmpty(t.get("value"))){if("Lab"===e)return o.Object.create({value:this.defaultLabPricingTypes});if("Imaging"===e)return o.Object.create({value:this.defaultImagingPricingTypes})}return t}}.property("category"),updateCapability:"add_pricing",afterUpdate:function(e){var t="The pricing record for %@ has been saved.".fmt(e.get("name"));this.displayAlert("Pricing Item Saved",t)}})}),define("hospitalrun/pricing/edit/route",["hospitalrun/routes/abstract-edit-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({editTitle:"Edit Pricing Item",modelName:"pricing",newTitle:"New Pricing Item",actions:{deleteOverride:function(e){this.controller.send("deleteOverride",e)}}})}),define("hospitalrun/pricing/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),t.buffer.push(m((n=a["em-input"]||e&&e["em-input"],r={hash:{label:"Name",property:"name","class":"required"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-input",r)))),t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(m((n=a["em-input"]||e&&e["em-input"],r={hash:{label:"Price",property:"price","class":"required col-xs-2"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-input",r)))),t.buffer.push("\n        "),t.buffer.push(m((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"expenseAccount",label:"Department",list:"expenseAccountList",selection:"expenseAccount","class":"col-xs-4"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(m((n=a["em-select"]||e&&e["em-select"],r={hash:{label:"Category","class":"required col-xs-4",property:"category",content:"categories",optionValuePath:"content",optionLabelPath:"content",selected:"category"},hashTypes:{label:"STRING","class":"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",selected:"ID"},hashContexts:{label:e,"class":e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"em-select",r)))),t.buffer.push("    \n        "),t.buffer.push(m((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{property:"type",label:"Type",list:"pricingTypes",selection:"type","class":"col-xs-4",prompt:" "},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING",prompt:"STRING"},hashContexts:{property:e,label:e,list:e,selection:e,"class":e,prompt:e},contexts:[],types:[],data:t},n?n.call(e,r):y.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    </div>\n\n    <div class="panel">\n        <div class="panel-heading">\n            <h3 class="panel-title">\n                Pricing profile overrides\n                '),s=a["if"].call(e,"showUpdateButton",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n            </h3>\n        </div>\n        <div class="panel-body detail-section-content">\n            <table class="table">\n                <tbody>\n                    <tr class="table-header">\n                        <th>Pricing Profile</th>\n                        <th>Price</th>\n                        '),s=a["if"].call(e,"showUpdateButton",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </tr>\n                    "),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tbody>        \n            </table>\n        </div>\n    </div>\n"),i}function o(e,t){var s="";return t.buffer.push('\n                    <button class="btn btn-primary align-right" '),t.buffer.push(m(a.action.call(e,"editOverride",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Override</button>\n                '),s}function l(e,t){t.buffer.push("\n                            <th>Actions</th>\n                        ")}function u(e,t){var s,n="";return t.buffer.push("\n                        "),s=a.each.call(e,"pricingOverrides",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n}function h(e,t){var s,n="";return t.buffer.push("\n                            <tr>\n                                <td>"),s=a._triageMustache.call(e,"profile.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"price",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>                                \n                                    "),s=a["if"].call(e,"parentController.showUpdateButton",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("                                \n                                </td>                            \n                            </tr>\n                        "),n}function p(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default neutral" '),t.buffer.push(m(a.action.call(e,"editOverride","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>Edit</button>\n                                        <button class="btn btn-default warning" '),t.buffer.push(m(a.action.call(e,"showDeleteOverride","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                            <span class="octicon octicon-x"></span>  Delete\n                                        </button>\n                                    '),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var c,d,f,m=this.escapeExpression,b=this,y=a.helperMissing;d=a["em-form"]||t&&t["em-form"],f={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:b.noop,fn:b.program(1,i,r),contexts:[],types:[],data:r},c=d?d.call(t,f):y.call(t,"em-form",f),r.buffer.push(c||0===c?c:"")})}),define("hospitalrun/pricing/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()
}),define("hospitalrun/pricing/imaging/controller",["hospitalrun/pricing/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/index/controller",["hospitalrun/controllers/abstract-paged-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addPermission:"add_pricing",deletePermission:"delete_pricing",showCategory:!0,startKey:[]})}),define("hospitalrun/pricing/imaging/route",["hospitalrun/pricing/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({category:"Imaging",pageTitle:"Imaging Pricing",actions:{editItem:function(e){e.set("returnTo","pricing.imaging"),this.transitionTo("pricing.edit",e)}}})}),define("hospitalrun/pricing/index/route",["hospitalrun/routes/abstract-index-route","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({category:null,modelName:"pricing",pageTitle:"All Pricing Items",_getStartKeyFromItem:function(e){var t=e.get("category"),s=this.get("keyPrefix"),a=e.get("name"),n=e.get("type");return[t,a,n,s+e.get("id")]},_modelQueryParams:function(){var e=this.get("category"),t=this.get("keyPrefix"),s=this.get("maxValue"),a={mapReduce:"pricing_by_category"};return n.isEmpty(e)||(a.options={startkey:[e,null,null,null],endkey:[e,{},{},t+s]}),a}})}),define("hospitalrun/pricing/imaging/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({templateName:"pricing/index"})}),define("hospitalrun/pricing/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            '),s=a["if"].call(e,"showCategory",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            <th>Name</th>\n            <th>Price</th>            \n            <th>Type</th>\n            <th>Expense Account</th>\n            "),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Category</th>\n            ")}function l(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function u(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(7,h,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function h(e,t){var s,n="";return t.buffer.push("\n                <tr "),t.buffer.push(g(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    "),s=a["if"].call(e,"parentController.showCategory",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    <td>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"price",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>                    \n                    <td>"),s=a._triageMustache.call(e,"type",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"expenseAccount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    "),s=a["if"].call(e,"parentController.showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(10,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),n}function p(e,t){var s,n="";return t.buffer.push("\n                        <td>"),s=a._triageMustache.call(e,"category",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    "),n}function c(e,t){var s,n="";return t.buffer.push("\n                        <td>\n                            "),s=a["if"].call(e,"parentController.canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(11,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),s=a["if"].call(e,"parentController.canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(13,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </td>\n                    "),n}function d(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default neutral" '),t.buffer.push(g(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                            "),s}function f(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default warning" '),t.buffer.push(g(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                            '),s}function m(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No pricing items found.</em>\n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(16,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function b(e,t){var s="";return t.buffer.push('\n            <em>Create a new record?</em> \n            <button class="btn btn-primary" '),t.buffer.push(g(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Pricing Item</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var y,g=this.escapeExpression,v=this;y=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:v.program(15,m,r),fn:v.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(y||0===y?y:"")})}),define("hospitalrun/pricing/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/lab/controller",["hospitalrun/pricing/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/lab/route",["hospitalrun/pricing/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({category:"Lab",pageTitle:"Lab Pricing",actions:{editItem:function(e){e.set("returnTo","pricing.lab"),this.transitionTo("pricing.edit",e)}}})}),define("hospitalrun/pricing/lab/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({templateName:"pricing/index"})}),define("hospitalrun/pricing/override/controller",["ember","hospitalrun/mixins/is-update-disabled","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{needs:["pricing","pricing/edit"],actions:{cancel:function(){this.get("model").rollback(),this.send("closeModal")},update:function(){var e=this.get("isNew"),t=this.get("model");t.save().then(function(){e?this.get("editController").send("addOverride",t):this.send("closeModal")}.bind(this))}},editController:a.computed.alias("controllers.pricing/edit"),pricingProfiles:a.computed.alias("controllers.pricing.pricingProfiles"),showUpdateButton:!0,title:function(){return this.get("isNew")?"Add Override":"Edit Override"}.property("isNew"),updateButtonAction:"update",updateButtonText:function(){var e=this.get("isNew");return e?"Add":"Update"}.property("isNew")})}),define("hospitalrun/pricing/override/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["em-select"]||e&&e["em-select"],n={hash:{label:"Pricing Profile",property:"profile",content:"pricingProfiles",optionValuePath:"content",optionLabelPath:"content.name","class":"required",prompt:" "},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING","class":"STRING",prompt:"STRING"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,"class":e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-select",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Price",property:"price","class":"required"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/pricing/override/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/procedure/controller",["hospitalrun/pricing/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/procedure/route",["hospitalrun/pricing/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({category:"Procedure",pageTitle:"Procedure Pricing",actions:{editItem:function(e){e.set("returnTo","pricing.procedure"),this.transitionTo("pricing.edit",e)}}})}),define("hospitalrun/pricing/procedure/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({templateName:"pricing/index"})}),define("hospitalrun/pricing/profiles/controller",["hospitalrun/controllers/abstract-paged-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addPermission:"add_pricing_profile",deletePermission:"delete_pricing_profile"})}),define("hospitalrun/pricing/profiles/edit/controller",["hospitalrun/controllers/abstract-edit-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({actions:{cancel:function(){this.send("closeModal")}},afterUpdate:function(e){var t="The pricing profile %@ has been saved.".fmt(e.get("name"));this.displayAlert("Pricing Profile Saved",t),this.send("refreshProfiles")}})}),define("hospitalrun/pricing/profiles/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"name",label:"Name","class":"required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"discountPercentage",label:"Discount Percentage"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"discountAmount",label:"Discount Amount"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/pricing/profiles/edit/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/profiles/route",["hospitalrun/routes/abstract-index-route","ember","hospitalrun/mixins/modal-helper","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{category:null,modelName:"price-profile",pageTitle:"Pricing Profiles",actions:{editItem:function(e){this.send("openModal","pricing.profiles.edit",e)},deleteItem:function(e){var t="Are you sure you want to delete this profile?",s=r.Object.create({itemToDelete:e}),a="Delete Profile";this.displayConfirm(a,t,"deletePricingProfile",s)},deletePricingProfile:function(e){e.itemToDelete.destroyRecord()},newItem:function(){var e=this.store.createRecord("price-profile");this.send("openModal","pricing.profiles.edit",e)},refreshProfiles:function(){this.refresh()}}})}),define("hospitalrun/pricing/profiles/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Name</th>\n            <th>Discount Amount</th>\n            <th>Discount Percentage</th>\n            '),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,u,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function u(e,t){var s,n="";return t.buffer.push("\n                <tr "),t.buffer.push(b(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                    <td>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"discountAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    <td>"),s=a._triageMustache.call(e,"discountPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                    "),s=a["if"].call(e,"parentController.showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </tr>\n            "),n}function h(e,t){var s,n="";return t.buffer.push("\n                        <td>\n                            "),s=a["if"].call(e,"parentController.canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),s=a["if"].call(e,"parentController.canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </td>\n                    "),n}function p(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default neutral" '),t.buffer.push(b(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                            "),s}function c(e,t){var s="";return t.buffer.push('\n                                <button class="btn btn-default warning" '),t.buffer.push(b(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                            '),s}function d(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No pricing profiles found.</em>\n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(12,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function f(e,t){var s="";return t.buffer.push('\n            <em>Create a new record?</em> \n            <button class="btn btn-primary" '),t.buffer.push(b(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New Pricing Profile</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var m,b=this.escapeExpression,y=this;m=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(11,d,r),fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(m||0===m?m:"")})}),define("hospitalrun/pricing/profiles/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/route",["hospitalrun/routes/abstract-module-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addCapability:"add_pricing",additionalModels:[{name:"expenseAccountList",findArgs:["lookup","expense_account_list"]},{name:"imagingPricingTypes",findArgs:["lookup","imaging_pricing_types"]},{name:"labPricingTypes",findArgs:["lookup","lab_pricing_types"]},{name:"procedurePricingTypes",findArgs:["lookup","procedure_pricing_types"]},{name:"pricingProfiles",findArgs:["price-profile"]},{name:"wardPricingTypes",findArgs:["lookup","ward_pricing_types"]}],allowSearch:!0,moduleName:"pricing",newButtonText:"+ new item",sectionTitle:"Pricing",subActions:[{text:"All Pricing Items",linkTo:"pricing.index"},{text:"Imaging Pricing",linkTo:"pricing.imaging"},{text:"Lab Pricing",linkTo:"pricing.lab"},{text:"Procedure Pricing",linkTo:"pricing.procedure"},{text:"Ward Pricing",linkTo:"pricing.ward"},{text:"Pricing Profiles",linkTo:"pricing.profiles"}]})}),define("hospitalrun/pricing/search/controller",["hospitalrun/patients/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/search/route",["hospitalrun/routes/abstract-search-route","hospitalrun/utils/pricing-search","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({moduleName:"pricing",searchKeys:["name"],searchIndex:n,searchModel:"pricing"})}),define("hospitalrun/utils/pricing-search",["exports"],function(e){"use strict";e["default"]={fields:["name"],filter:function(e){var t=e._id.indexOf("_"),s=e._id.substring(0,t);return"pricing"===s}}}),define("hospitalrun/pricing/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(u((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"pricing/index",n):l.call(e,"partial","pricing/index",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.view.call(t,"search-listing",{hash:{newButtonText:"New Item",allButtonText:"All Items"},hashTypes:{newButtonText:"STRING",allButtonText:"STRING"},hashContexts:{newButtonText:t,allButtonText:t},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["STRING"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/pricing/ward/controller",["hospitalrun/pricing/index/controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/pricing/ward/route",["hospitalrun/pricing/index/route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({category:"Ward",pageTitle:"Ward Pricing",actions:{editItem:function(e){e.set("returnTo","pricing.ward"),this.transitionTo("pricing.edit",e)}}})}),define("hospitalrun/pricing/ward/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({templateName:"pricing/index"})}),define("hospitalrun/print/invoice/controller",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.ObjectController.extend({actions:{returnToInvoice:function(){this.transitionTo("invoices.edit",this.get("model"))}}})}),define("hospitalrun/print/invoice/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push(' \n                <tr>\n                    <td colspan="6">\n                        <strong>'),s=a._triageMustache.call(e,"category",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</strong>\n                    </td>\n                </tr>\n                "),s=a.each.call(e,"items",{hash:{itemController:"invoices/line-item"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:m.noop,fn:m.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                <tr>\n                    <td><strong>Total "),s=a._triageMustache.call(e,"category",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</strong></td>\n                    <td class="text-right"><strong>'),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"total",r):d.call(e,"number-format","total",r)))),t.buffer.push('</strong></td>\n                    <td class="text-right"><strong>'),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"discount",r):d.call(e,"number-format","discount",r)))),t.buffer.push('</strong></td>\n                    <td class="text-right"><strong>'),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"nationalInsurance",r):d.call(e,"number-format","nationalInsurance",r)))),t.buffer.push('</strong></td>\n                    <td class="text-right"><strong>'),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"privateInsurance",r):d.call(e,"number-format","privateInsurance",r)))),t.buffer.push('</strong></td>\n                    <td class="text-right"><strong>'),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"amountOwed",r):d.call(e,"number-format","amountOwed",r)))),t.buffer.push("</strong></td>\n                </tr>\n            "),i}function o(e,t){var s,n,r,i="";return t.buffer.push("        \n                    <tr>\n                        <td>\n                            "),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                        </td>\n                        <td class="text-right">\n                            '),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"total",r):d.call(e,"number-format","total",r)))),t.buffer.push('                    \n                        </td>\n                        <td class="text-right">\n                            '),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"discount",r):d.call(e,"number-format","discount",r)))),t.buffer.push('\n                        </td>\n                        <td class="text-right">\n                            '),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"nationalInsurance",r):d.call(e,"number-format","nationalInsurance",r)))),t.buffer.push('\n                        </td>\n                        <td class="text-right">\n                            '),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"privateInsurance",r):d.call(e,"number-format","privateInsurance",r)))),t.buffer.push('\n                        </td>\n                        <td class="text-right">'),t.buffer.push(f((n=a["number-format"]||e&&e["number-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"amountOwed",r):d.call(e,"number-format","amountOwed",r)))),t.buffer.push("</td>\n                    </tr>\n                "),i}function l(e,t){t.buffer.push("Return")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h,p,c="",d=a.helperMissing,f=this.escapeExpression,m=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">\n        <h5 class="text-center">\n            TEBOW CURE HOSPITAL\n        </h5>\n        <p class="text-center">J.P. Laurel Ave. corner Banawe St. Brgy Aquino Davao City, Philippines</p>\n        <p class="text-center">Telephone: (082) 300-5345    Email: info@tebowcure.org</p>\n        <h5 class="text-center">\n            PATIENT\'S\n        </h5>\n        <h5 class="text-center">\n            BILLING STATEMENT\n        </h5>\n        <table>\n            <tr>\n                <td colspan="2" class="col-xs-8">\n                    NAME OF PATIENT: '),u=a._triageMustache.call(t,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n                </td>\n                <td class="col-xs-4">\n                    PATIENT #:'),u=a._triageMustache.call(t,"patient.displayPatientId",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n                </td>\n            </tr>\n            <tr>\n                <td class="col-xs-5">\n                    AGE: '),u=a._triageMustache.call(t,"patient.age",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push(' \n                </td>\n                <td class="col-xs-3">\n                    ADMITTED: '),r.buffer.push(f((h=a["date-format"]||t&&t["date-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"visit.startDate",p):d.call(t,"date-format","visit.startDate",p)))),r.buffer.push('\n                </td>\n                <td class="col-xs-4"></td>\n            </tr>\n            <tr>\n                <td class="col-xs-5"></td>\n                <td class="col-xs-3">DISCHARGE: '),r.buffer.push(f((h=a["date-format"]||t&&t["date-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"visit.endDate",p):d.call(t,"date-format","visit.endDate",p)))),r.buffer.push('</td>\n                <td class="col-xs-4"></td>\n            </tr>\n            <tr>\n                <td colspan="3" class="col-xs-12">\n                    ADDRESS: '),u=a._triageMustache.call(t,"patient.displayAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n                </td>\n            </tr>\n        </table>\n        <table class="table">\n            <tr class="table-header">\n                <th>Description</th>\n                <th class="text-right">Actual Charges</th>\n                <th class="text-right">Discount</th>\n                <th class="text-right">PhilHealth</th>\n                <th class="text-right">HMO/COM</th>\n                <th class="text-right">Excess</th>\n            </tr>\n            '),u=a.each.call(t,"lineItemsByCategory",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,i,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n             <tr>\n                <td><strong>Total</strong></td>\n                <td class="text-right"><strong>'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"total",p):d.call(t,"number-format","total",p)))),r.buffer.push('</strong></td>\n                <td class="text-right"><strong>'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"discount",p):d.call(t,"number-format","discount",p)))),r.buffer.push('</strong></td>\n                <td class="text-right"><strong>'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"nationalInsurance",p):d.call(t,"number-format","nationalInsurance",p)))),r.buffer.push('</strong></td>\n                <td class="text-right"><strong>'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"privateInsurance",p):d.call(t,"number-format","privateInsurance",p)))),r.buffer.push('</strong></td>\n                <td class="text-right"><strong>'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"amountOwed",p):d.call(t,"number-format","amountOwed",p)))),r.buffer.push('</strong></td>\n            </tr>\n            <tr>\n                <td><strong>Payments/Deposits</strong></td>\n                <td colspan="4"></td>\n                <td class="text-right">-'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"paidTotal",p):d.call(t,"number-format","paidTotal",p)))),r.buffer.push('</td>                            \n                <td></td>\n            </tr>\n            <tr>\n                <td><strong>Grand Total</strong></td>\n                <td colspan="4"></td>\n                <td class="text-right"><strong>'),r.buffer.push(f((h=a["number-format"]||t&&t["number-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"remainingBalance",p):d.call(t,"number-format","remainingBalance",p)))),r.buffer.push('</strong></td>                            \n                <td></td>\n            </tr>\n        </table>\n        <table>\n            <tr>\n                <td class="col-xs-7">\n                    Remarks: '),u=a._triageMustache.call(t,"visit.dischargeInfo",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n                </td>\n                <td class="col-xs-5">\n                    I hereby acknowledge PHIC benefits\n                </td>\n            </tr>  \n            <tr>\n                <td class="col-xs-7"></td>\n                <td class="col-xs-5">were deducted during my confinement</td>\n            </tr>\n            <tr>\n                <td class="col-xs-8">Billed by: '),u=a._triageMustache.call(t,"modifiedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('</td>\n                <td class="col-xs-4">__________________________________________</td>\n            </tr>\n            <tr>\n                <td class="col-xs-8">Bill Date: '),r.buffer.push(f((h=a["date-format"]||t&&t["date-format"],p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},h?h.call(t,"billDate",p):d.call(t,"date-format","billDate",p)))),r.buffer.push('</td>\n                <td class="text-center col-xs-4">Patient-Member</td>\n            </tr>\n            <tr>\n                <td class="col-xs-8"></td>\n                <td class="col-xs-4">__________________________________________</td>\n            </tr>  \n            <tr>\n                <td class="col-xs-8">Certified Correct by: Leron L. Lehman- Executive Director</td>\n                <td class="text-center col-xs-4">Relationship/Contact no.</td>\n            </tr>  \n\n        </table>\n    </div>\n    <div class="panel-footer">\n        '),h=a["link-to"]||t&&t["link-to"],p={hash:{"class":"btn btn-default warning"},hashTypes:{"class":"STRING"},hashContexts:{"class":t},inverse:m.noop,fn:m.program(4,l,r),contexts:[t,t],types:["STRING","ID"],data:r},u=h?h.call(t,"invoices.edit","",p):d.call(t,"link-to","invoices.edit","",p),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n    </div>\n</div>"),c
})}),define("hospitalrun/procedures/charge/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["pricing-typeahead"]||e&&e["pricing-typeahead"],n={hash:{property:"itemName",label:"Item",content:"pricingList",selection:"selectedItem","class":"required"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID","class":"STRING"},hashContexts:{property:e,label:e,content:e,selection:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"pricing-typeahead",n)))),t.buffer.push('   \n    <div class="row">\n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Quantity",property:"quantity","class":"col-xs-3 required"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("    \n        "),t.buffer.push(p((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"dateCharged",label:"Date Charged","class":"col-xs-4 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"date-picker",n)))),t.buffer.push("\n    </div>\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/procedures/charge/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/procedures/edit/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/charge-actions","ember","hospitalrun/mixins/patient-submodule","exports"],function(e,t,s,a,n){"use strict";var r=e["default"],i=t["default"],o=s["default"],l=a["default"];n["default"]=r.extend(i,l,{needs:["visits","visits/edit","pouchdb"],cancelAction:"returnToVisit",canAddProcedure:function(){return this.currentUserCan("add_procedure")}.property(),chargePricingCategory:"Procedure",chargeRoute:"procedures.charge",anesthesiaTypes:o.computed.alias("controllers.visits.anesthesiaTypes"),anesthesiologistList:o.computed.alias("controllers.visits.anesthesiologistList"),cptCodeList:o.computed.alias("controllers.visits.cptCodeList"),physicianList:o.computed.alias("controllers.visits.physicianList"),procedureList:o.computed.alias("controllers.visits.procedureList"),procedureLocations:o.computed.alias("controllers.visits.procedureLocations"),lookupListsToUpdate:[{name:"anesthesiaTypes",property:"anesthesiaType",id:"anesthesia_types"},{name:"anesthesiologistList",property:"anesthesiologist",id:"anesthesiologists"},{name:"cptCodeList",property:"cptCode",id:"cpt_code_list"},{name:"physicianList",property:"assistant",id:"physician_list"},{name:"physicianList",property:"physician",id:"physician_list"},{name:"procedureList",property:"description",id:"procedure_list"},{name:"procedureLocations",property:"location",id:"procedure_locations"}],editController:o.computed.alias("controllers.visits/edit"),visitProcedures:o.computed.alias("visit.procedures"),pricingList:null,pricingTypes:o.computed.alias("controllers.visits.procedurePricingTypes"),newProcedure:!1,title:function(){var e=this.get("isNew");return e?"Add Procedure":"Edit Procedure"}.property("isNew"),updateCapability:"add_charge",actions:{showAddMedication:function(){var e=this.get("store").createRecord("proc-charge",{dateCharged:new Date,newMedicationCharge:!0,quantity:1});this.send("openModal","procedures.medication",e)},showEditMedication:function(e){this.send("openModal","procedures.medication",e)},showDeleteMedication:function(e){this.send("openModal","dialog",o.Object.create({confirmAction:"deleteCharge",title:"Delete Medication Used",message:"Are you sure you want to delete this medication?",chargeToDelete:e,updateButtonAction:"confirm",updateButtonText:"Ok"}))}},beforeUpdate:function(){return new o.RSVP.Promise(function(e,t){this.updateCharges().then(function(){this.get("isNew")?this.addChildToVisit(this.get("model"),"procedures").then(e,t):e()}.bind(this),t)}.bind(this))},afterUpdate:function(){var e="Procedure Saved",t="The procedure record has been saved.";this.saveVisitIfNeeded(e,t)}})}),define("hospitalrun/procedures/edit/route",["hospitalrun/routes/abstract-edit-route","hospitalrun/mixins/charge-route","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{editTitle:"Edit Procedure",modelName:"procedure",newTitle:"New Procedure",pricingCategory:"Procedure",setupController:function(e,t){this._super(e,t);var s={key:"Medication",include_docs:!0};this.controllerFor("pouchdb").queryMainDB(s,"inventory_by_type").then(function(t){var s=t.rows.map(function(e){return e.doc});e.set("medicationList",s)})}})}),define("hospitalrun/procedures/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("    \n    "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"required",property:"description",label:"Procedure",list:"procedureList",selection:"description",hint:!1},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID",hint:"BOOLEAN"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e,hint:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push('          \n    <div class="row">\n        '),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-xs-6",property:"cptCode",label:"CPT Code",list:"cptCodeList",selection:"cptCode"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-3",property:"location",label:"Procedure Location",list:"procedureLocations",selection:"location"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push("  \n        "),t.buffer.push(y((n=a["date-picker"]||e&&e["date-picker"],r={hash:{property:"procedureDate",label:"Procedure Date","class":"col-sm-3 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"date-picker",r)))),t.buffer.push("\n        "),t.buffer.push(y((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"timeStarted",label:"Time Started","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"em-input",r)))),t.buffer.push("\n        "),t.buffer.push(y((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"timeEnded",label:"Time Ended","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"em-input",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-4 required",property:"physician",label:"Physician",list:"physicianList",selection:"physician"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push("\n        "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-4",property:"assistant",label:"Assistant",list:"physicianList",selection:"assistant",prompt:" "},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID",prompt:"STRING"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e,prompt:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push("\n        "),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-4",property:"anesthesiologist",label:"Anesthesiologist",list:"anesthesiologistList",selection:"anesthesiologist"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(y((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-4",property:"anesthesiaType",label:"Anesthesia Type",list:"anesthesiaTypes",selection:"anesthesiaTypes"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"select-or-typeahead",r)))),t.buffer.push("        \n    </div>\n    "),t.buffer.push(y((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Notes",property:"notes",rows:3},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:e,property:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):v.call(e,"em-text",r)))),t.buffer.push("\n    "),t.buffer.push(y((n=a.partial||e&&e.partial,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"item-charges",r):v.call(e,"partial","item-charges",r)))),t.buffer.push('\n    <div class="panel detail-section">\n        <div class="panel-heading">\n            <h3 class="panel-title">\n                Medication Used\n                '),s=a["if"].call(e,"canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n            </h3>\n        </div>\n        <div class="panel-body detail-section-content">\n            <table class="table">\n                <tr class="table-header">\n                    <th>Item</th>\n                    <th>Quantity</th>\n                    <th>Action</th>\n                </tr>\n                '),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </table>\n        </div>\n    </div>\n"),i}function o(e,t){var s="";return t.buffer.push('\n                    <button class="btn btn-primary align-right" '),t.buffer.push(y(a.action.call(e,"showAddMedication",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Medication</button>\n                '),s}function l(e,t){var s,n="";return t.buffer.push("\n                    "),s=a.each.call(e,"charges",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),n}function u(e,t){var s,n="";return t.buffer.push("\n                        "),s=a["if"].call(e,"medicationCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n}function h(e,t){var s,n="";return t.buffer.push("\n                            <tr>\n                                <td>"),s=a._triageMustache.call(e,"medication.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>\n                                    "),s=a["if"].call(e,"parentController.canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(7,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),s=a["if"].call(e,"parentController.canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(9,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </td>\n                            </tr>\n                        "),n}function p(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default neutral" '),t.buffer.push(y(a.action.call(e,"showEditMedication","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                    "),s}function c(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default warning" '),t.buffer.push(y(a.action.call(e,"showDeleteMedication","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                            <span class="octicon octicon-x"></span>Delete\n                                        </button>\n                                    '),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var d,f,m,b="",y=this.escapeExpression,g=this,v=a.helperMissing;return f=a["em-form"]||t&&t["em-form"],m={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:g.noop,fn:g.program(1,i,r),contexts:[],types:[],data:r},d=f?f.call(t,m):v.call(t,"em-form",m),(d||0===d)&&r.buffer.push(d),r.buffer.push("\n"),b})}),define("hospitalrun/procedures/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/procedures/medication/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/mixins/inventory-selection","ember","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(r,{needs:["procedures/edit"],cancelAction:"closeModal",newPricingItem:!1,requestingController:i.computed.alias("controllers.procedures/edit"),medicationList:i.computed.alias("controllers.procedures/edit.medicationList"),updateCapability:"add_charge",medicationChanged:function(){var e=this.get("itemName"),t=this.get("medication");i.isEmpty(t)||t.get("name")===e||this.set("itemName",t.get("name"))}.observes("medication"),title:function(){var e=this.get("isNew");return e?"Add Medication Used":"Edit Medication Used"}.property("isNew"),beforeUpdate:function(){var e=this.get("isNew");return e&&this.set("newCharge",!0),i.RSVP.Promise.resolve()},afterUpdate:function(e){this.get("newCharge")?this.get("requestingController").send("addCharge",e):this.send("closeModal")}})}),define("hospitalrun/procedures/medication/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["inventory-typeahead"]||e&&e["inventory-typeahead"],n={hash:{property:"itemName",label:"Medication Used",content:"medicationList",selection:"selectedInventoryItem"},hashTypes:{property:"STRING",label:"STRING",content:"ID",selection:"ID"},hashContexts:{property:e,label:e,content:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"inventory-typeahead",n)))),t.buffer.push("  \n    "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{label:"Quantity",property:"quantity","class":"required"},hashTypes:{label:"STRING",property:"STRING","class":"STRING"},hashContexts:{label:e,property:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/procedures/medication/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/router",["ember","hospitalrun/config/environment","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"],r=a.Router.extend({location:n.locationType});r.map(function(){this.resource("admin",function(){this.route("address"),this.route("lookup",{path:"/"}),this.resource("users",function(){this.route("edit",{path:"/edit/:user_id"})}),this.route("query")}),this.resource("appointments",function(){this.route("edit",{path:"/edit/:appointment_id"}),this.route("search"),this.route("today")}),this.route("finishgauth",{path:"/finishgauth/:s1/:s2/:k/:t/:i/:p"}),this.route("index",{path:"/"}),this.resource("imaging",function(){this.route("completed"),this.route("edit",{path:"/edit/:imaging_id"})}),this.resource("inventory",function(){this.route("barcode",{path:"/barcode/:inventory_id"}),this.route("delivery",{path:"/delivery/:inv-request_id"}),this.route("edit",{path:"/edit/:inventory_id"}),this.route("batch",{path:"/batch/:inventory-batch_id"}),this.route("listing"),this.route("reports"),this.route("request",{path:"/request/:inv-request_id"}),this.route("search",{path:"/search/:search_text"})}),this.resource("invoices",function(){this.route("edit",{path:"/edit/:invoice_id"}),this.route("search",{path:"/search/:search_text"})}),this.resource("labs",function(){this.route("completed"),this.route("edit",{path:"/edit/:lab_id"})}),this.route("login"),this.resource("medication",function(){this.route("completed"),this.route("edit",{path:"/edit/:medication_id"}),this.route("return",{path:"/return/:inv-request_id"}),this.route("search",{path:"/search/:search_text"})}),this.resource("patients",function(){this.route("edit",{path:"/edit/:patient_id"}),this.route("reports"),this.route("search",{path:"/search/:search_text"})}),this.resource("pricing",function(){this.route("imaging"),this.route("lab"),this.route("procedure"),this.route("ward"),this.route("edit",{path:"/edit/:pricing_id"}),this.route("search",{path:"/search/:search_text"}),this.route("profiles")}),this.resource("print",function(){this.route("invoice",{path:"/invoice/:invoice_id"})}),this.resource("visits",function(){this.route("edit",{path:"/edit/:visit_id"}),this.resource("procedures",function(){this.route("edit",{path:"/edit/:procedure_id"})})})}),s["default"]=r}),define("hospitalrun/routes/application",["ember","exports"],function(e,t){"use strict";var s=e["default"],a=s.Route.extend(s.SimpleAuth.ApplicationRouteMixin,{use_google_auth:!1,actions:{authenticateSession:function(){this.use_google_auth?window.location.replace("/auth/google"):this._super()}},model:function(){return this.store.find("config")},afterModel:function(e){if(this.controllerFor("navigation").set("allowSearch",!1),e){var t=e.findBy("id","use_google_auth");t&&(this.use_google_auth=t.get("value"))}}});t["default"]=a}),define("hospitalrun/routes/index",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Route.extend(s.SimpleAuth.AuthenticatedRouteMixin,{afterModel:function(){this.controllerFor("navigation").set("allowSearch",!1)}})}),define("hospitalrun/templates/application",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o,l,u="",h=a.helperMissing,p=this.escapeExpression;return r.buffer.push(p((o=a.render||t&&t.render,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},o?o.call(t,"navigation",l):h.call(t,"render","navigation",l)))),r.buffer.push("\n"),i=a._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("\n"),r.buffer.push(p((o=a.outlet||t&&t.outlet,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},o?o.call(t,"modal",l):h.call(t,"outlet","modal",l)))),r.buffer.push("\n"),u})}),define("hospitalrun/templates/appointment-event",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){t.buffer.push("\n        (All Day)\n    ")}function o(e,t){var s,n="";return t.buffer.push("\n        "),s=a._triageMustache.call(e,"view.timeString",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u="",h=this.escapeExpression,p=this;return r.buffer.push("<div class='ember-calendar-event-name' "),r.buffer.push(h(a.action.call(t,"editItem","view.event.appointment",{hash:{},hashTypes:{},hashContexts:{},contexts:[t,t],types:["STRING","ID"],data:r}))),r.buffer.push(">\n    "),l=a._triageMustache.call(t,"view.nameString",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push(' <button type="button" class="btn btn-default btn-xs">\n        <span class="glyphicon glyphicon-edit"></span>       \n    </button>\n</div>\n<div class=\'ember-calendar-event-time\'>\n    '),l=a["if"].call(t,"view.event.appointment.allDay",{hash:{},hashTypes:{},hashContexts:{},inverse:p.program(3,o,r),fn:p.program(1,i,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n</div>"),u})}),define("hospitalrun/templates/charges-by-type",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <ul class="nav nav-pills" role="tablist">\n        '),s=a.each.call(e,"pricingTypeList",{hash:{itemController:"item-charge-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:m.noop,fn:m.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </ul>\n"),n}function o(e,t){var s,n="";return t.buffer.push('\n            <li role="presentation"><a '),t.buffer.push(f(a["bind-attr"].call(e,{hash:{href:"tabHref","class":"activeClass"},hashTypes:{href:"ID","class":"ID"},hashContexts:{href:e,"class":e},contexts:[],types:[],data:t}))),t.buffer.push(' role="tab" data-toggle="pill">'),s=a._triageMustache.call(e,"model",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" charges</a></li>\n        "),n}function l(e,t){var s,n="";return t.buffer.push('    \n        <div role="tabpanel" '),t.buffer.push(f(a["bind-attr"].call(e,{hash:{id:"tabId","class":":tab-pane activeClass"},hashTypes:{id:"ID","class":"STRING"},hashContexts:{id:e,"class":e},contexts:[],types:[],data:t}))),t.buffer.push('>\n            <div class="panel detail-section">\n                <div class="panel-heading">\n                    <h3 class="panel-title">\n                        '),s=a._triageMustache.call(e,"model",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(' charges\n                    </h3>\n                </div>\n                <div class="panel-body detail-section-content">\n                    <table class="table table-bordered">\n                        <tbody>\n                            '),s=a["with"].call(e,"","as","itemController",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(5,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    "),n}function u(e,t){var s,n="";return t.buffer.push("\n                                "),s=a.each.call(e,"pricingListByType",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),n}function h(e,t){var s,n="";return t.buffer.push("\n                                    <tr>\n                                        "),s=a.each.call(e,"",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(7,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </tr> \n                                "),n}function p(e,t){var s,n,r="";return t.buffer.push('\n                                            <td class="col-xs-2">\n                                                '),t.buffer.push(f((s=a["em-input"]||e&&e["em-input"],n={hash:{property:"_id",label:"name"},hashTypes:{property:"ID",label:"ID"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):b.call(e,"em-input",n)))),t.buffer.push("\n                                            </td>\n                                        "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var c,d="",f=this.escapeExpression,m=this,b=a.helperMissing;return c=a["if"].call(t,"showPricingTypeTabs",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,i,r),contexts:[t],types:["ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push('\n<div class="tab-content">\n    '),c=a.each.call(t,"pricingTypeList",{hash:{itemController:"item-charge-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:t},inverse:m.noop,fn:m.program(4,l,r),contexts:[t],types:["ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push("\n</div>"),d})}),define("hospitalrun/templates/components/array-display",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push("\n    "),s=a.each.call(e,"content",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}function o(e,t){var s,n="";return t.buffer.push("\n        "),s=a._triageMustache.call(e,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\n    "),n}function l(e,t){var s,n="";return t.buffer.push("\n    "),s=a._triageMustache.call(e,"content",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h=this;u=a["if"].call(t,"isArray",{hash:{},hashTypes:{},hashContexts:{},inverse:h.program(4,l,r),fn:h.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(u||0===u?u:"")})}),define("hospitalrun/templates/components/ext-radio",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push("\n    "),s=a.each.call(e,"view.content",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}function o(e,t){var s,n,r="";return t.buffer.push('    \n        <label class="radio-inline">\n            '),t.buffer.push(f((s=a["radio-button"]||e&&e["radio-button"],n={hash:{content:"",name:"view.name",selection:"view.value"},hashTypes:{content:"ID",name:"ID",selection:"ID"},hashContexts:{content:e,name:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"radio-button",n)))),t.buffer.push("\n        </label>\n    "),r}function l(e,t){var s,n="";return t.buffer.push("\n    "),s=a.each.call(e,"view.content",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}function u(e,t){var s,n,r="";return t.buffer.push('\n        <div class="radio">\n            <label>\n                '),t.buffer.push(f((s=a["radio-button"]||e&&e["radio-button"],n={hash:{content:"",name:"view.name",selection:"view.value"},hashTypes:{content:"ID",name:"ID",selection:"ID"},hashContexts:{content:e,name:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"radio-button",n)))),t.buffer.push("\n            </label>\n        </div>\n    "),r}function h(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="radio">\n        <label>\n            '),t.buffer.push(f((n=a["radio-button"]||e&&e["radio-button"],r={hash:{value:"otherValue",name:"view.name",selection:"view.value"},hashTypes:{value:"ID",name:"ID",selection:"ID"},hashContexts:{value:e,name:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"radio-button",r)))),t.buffer.push("        \n            "),s=a._triageMustache.call(e,"otherOptionLabel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),t.buffer.push(f((n=a.input||e&&e.input,r={hash:{value:"otherValue","class":"form-control"},hashTypes:{value:"ID","class":"STRING"},hashContexts:{value:e,"class":e},contexts:[],types:[],data:t},n?n.call(e,r):d.call(e,"input",r)))),t.buffer.push("\n        </label>\n    </div>\n"),i}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var p,c="",d=a.helperMissing,f=this.escapeExpression,m=this;return p=a["if"].call(t,"view.showInline",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(4,l,r),fn:m.program(1,i,r),contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),r.buffer.push("\n\n"),p=a["if"].call(t,"includeOtherOption",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(7,h,r),contexts:[t],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),c})}),define("hospitalrun/templates/components/inventory-location-picker",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n    <div class="form-group">\n        <label class="control-label">'),s=a._triageMustache.call(e,"label",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</label>\n        "),t.buffer.push(u((n=a["location-select"]||e&&e["location-select"],r={hash:{currentLocation:"selectedLocation",content:"subLocationList","class":"form-control",optionValuePath:"content",optionLabelPath:"content.locationNameWithQuantity",selection:"selectedLocation"},hashTypes:{currentLocation:"ID",content:"ID","class":"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",selection:"ID"},hashContexts:{currentLocation:e,content:e,"class":e,optionValuePath:e,optionLabelPath:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):l.call(e,"location-select",r)))),t.buffer.push("    \n    </div>\n"),i
}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.each.call(t,"locationPickers",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/templates/components/logo-svg",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<svg version="1.1" class="logo-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     viewBox="0 0 347.907 60.807" enable-background="new 0 0 347.907 60.807" xml:space="preserve">\n  <g>\n    <path fill="#FFFFFF" d="M39.118,49.621V0h8.247v19.067c1.336-1.269,2.805-2.293,4.408-3.072c1.603-0.779,3.483-1.169,5.643-1.169\n      c1.87,0,3.528,0.317,4.975,0.952c1.448,0.635,2.655,1.525,3.623,2.671c0.969,1.147,1.703,2.516,2.205,4.107\n      c0.501,1.592,0.751,3.345,0.751,5.259v21.805h-8.247V27.816c0-2.092-0.485-3.712-1.453-4.858c-0.969-1.147-2.421-1.72-4.358-1.72\n      c-1.425,0-2.76,0.323-4.007,0.968c-1.246,0.646-2.426,1.525-3.54,2.638v24.777H39.118z M89.209,14.826\n      c2.559,0,4.881,0.412,6.963,1.235c2.081,0.824,3.857,1.993,5.326,3.506c1.468,1.514,2.604,3.362,3.405,5.543\n      c0.802,2.182,1.202,4.62,1.202,7.313c0,2.716-0.4,5.165-1.202,7.346c-0.801,2.182-1.937,4.04-3.405,5.576\n      c-1.469,1.536-3.246,2.716-5.326,3.54c-2.082,0.823-4.403,1.236-6.963,1.236c-2.56,0-4.886-0.412-6.979-1.236\n      c-2.092-0.823-3.879-2.003-5.359-3.54c-1.481-1.536-2.627-3.394-3.44-5.576c-0.813-2.182-1.219-4.63-1.219-7.346\n      c0-2.693,0.406-5.131,1.219-7.313c0.812-2.181,1.959-4.029,3.44-5.543c1.48-1.514,3.266-2.682,5.359-3.506\n      C84.323,15.238,86.649,14.826,89.209,14.826z M89.209,43.777c2.849,0,4.959-0.957,6.327-2.872c1.369-1.914,2.055-4.719,2.055-8.415\n      c0-3.695-0.685-6.512-2.055-8.448c-1.368-1.937-3.478-2.905-6.327-2.905c-2.894,0-5.031,0.974-6.411,2.922\n      c-1.381,1.948-2.07,4.758-2.07,8.432s0.689,6.473,2.07,8.398C84.178,42.815,86.315,43.777,89.209,43.777z M131.216,22.039\n      c-0.222,0.356-0.457,0.606-0.701,0.751c-0.245,0.145-0.557,0.217-0.936,0.217c-0.4,0-0.829-0.111-1.285-0.334\n      c-0.457-0.222-0.986-0.472-1.586-0.751c-0.602-0.278-1.286-0.529-2.054-0.751c-0.769-0.222-1.676-0.334-2.722-0.334\n      c-1.625,0-2.905,0.346-3.84,1.036c-0.934,0.69-1.403,1.592-1.403,2.704c0,0.735,0.24,1.353,0.719,1.853\n      c0.479,0.501,1.113,0.941,1.903,1.319c0.789,0.379,1.686,0.718,2.688,1.018c1.002,0.3,2.025,0.629,3.072,0.985\n      c1.046,0.356,2.07,0.763,3.072,1.219c1.001,0.457,1.897,1.035,2.688,1.736c0.789,0.701,1.425,1.542,1.903,2.521\n      c0.479,0.98,0.718,2.159,0.718,3.539c0,1.648-0.3,3.167-0.901,4.558c-0.601,1.392-1.481,2.594-2.639,3.606\n      c-1.158,1.013-2.587,1.803-4.291,2.371c-1.703,0.567-3.656,0.852-5.86,0.852c-1.181,0-2.332-0.106-3.456-0.318\n      c-1.124-0.212-2.204-0.506-3.238-0.885c-1.036-0.378-1.993-0.823-2.872-1.335c-0.879-0.512-1.653-1.068-2.321-1.67l1.903-3.139\n      c0.244-0.379,0.534-0.668,0.868-0.868c0.334-0.2,0.757-0.3,1.269-0.3s0.996,0.145,1.453,0.434c0.456,0.289,0.985,0.601,1.586,0.935\n      c0.601,0.334,1.307,0.646,2.12,0.935c0.812,0.289,1.842,0.434,3.088,0.434c0.979,0,1.82-0.117,2.522-0.35\n      c0.701-0.234,1.28-0.54,1.736-0.918c0.456-0.378,0.789-0.818,1.001-1.319c0.212-0.501,0.317-1.018,0.317-1.553\n      c0-0.801-0.239-1.458-0.718-1.97c-0.479-0.512-1.114-0.957-1.903-1.335c-0.791-0.379-1.693-0.718-2.705-1.019\n      c-1.013-0.3-2.048-0.628-3.105-0.985c-1.058-0.356-2.093-0.773-3.106-1.252c-1.013-0.478-1.915-1.085-2.704-1.82\n      c-0.791-0.735-1.426-1.636-1.903-2.705c-0.48-1.068-0.719-2.359-0.719-3.873c0-1.402,0.278-2.738,0.835-4.007\n      c0.556-1.269,1.374-2.376,2.454-3.323c1.079-0.946,2.426-1.703,4.04-2.27c1.614-0.568,3.478-0.852,5.593-0.852\n      c2.359,0,4.509,0.39,6.445,1.169c1.937,0.78,3.55,1.803,4.841,3.072L131.216,22.039z M138.395,60.807V15.361h5.043\n      c0.534,0,0.991,0.123,1.369,0.367c0.378,0.245,0.623,0.624,0.734,1.135l0.667,3.173c1.381-1.581,2.967-2.86,4.759-3.84\n      s3.89-1.469,6.294-1.469c1.87,0,3.578,0.39,5.126,1.169c1.547,0.78,2.883,1.909,4.007,3.39c1.124,1.48,1.992,3.306,2.605,5.476\n      c0.611,2.17,0.918,4.658,0.918,7.463c0,2.56-0.345,4.931-1.035,7.112c-0.69,2.182-1.676,4.074-2.956,5.677\n      c-1.281,1.603-2.827,2.855-4.642,3.757c-1.814,0.902-3.845,1.353-6.094,1.353c-1.937,0-3.578-0.296-4.925-0.885\n      c-1.347-0.59-2.555-1.408-3.623-2.455v14.025H138.395z M154.423,21.238c-1.715,0-3.178,0.362-4.391,1.085\n      c-1.214,0.724-2.343,1.742-3.39,3.055v15.361c0.934,1.158,1.953,1.965,3.055,2.421c1.102,0.457,2.288,0.685,3.556,0.685\n      c1.246,0,2.376-0.234,3.39-0.701c1.013-0.467,1.87-1.18,2.571-2.137c0.702-0.957,1.241-2.165,1.62-3.623\n      c0.379-1.458,0.568-3.177,0.568-5.159c0-2.004-0.163-3.701-0.485-5.093c-0.322-1.391-0.784-2.521-1.385-3.389\n      c-0.602-0.868-1.331-1.503-2.188-1.903C156.487,21.438,155.513,21.238,154.423,21.238z M184.51,5.376\n      c0,0.713-0.145,1.38-0.435,2.003c-0.289,0.624-0.673,1.169-1.151,1.636c-0.479,0.467-1.041,0.841-1.686,1.119\n      c-0.646,0.278-1.336,0.418-2.07,0.418c-0.713,0-1.386-0.139-2.02-0.418c-0.635-0.278-1.186-0.651-1.653-1.119\n      c-0.467-0.468-0.841-1.013-1.119-1.636c-0.278-0.623-0.417-1.291-0.417-2.003c0-0.735,0.139-1.424,0.417-2.07\n      c0.278-0.646,0.652-1.202,1.119-1.67c0.467-0.467,1.018-0.84,1.653-1.119c0.634-0.278,1.307-0.418,2.02-0.418\n      c0.734,0,1.425,0.14,2.07,0.418c0.646,0.278,1.208,0.651,1.686,1.119c0.479,0.468,0.863,1.024,1.151,1.67\n      C184.365,3.952,184.51,4.642,184.51,5.376z M183.274,15.361v34.26h-8.247v-34.26H183.274z M202.173,50.155\n      c-2.961,0-5.242-0.84-6.845-2.521c-1.603-1.681-2.405-4.001-2.405-6.963V21.538h-3.472c-0.446,0-0.83-0.144-1.152-0.434\n      c-0.323-0.289-0.484-0.723-0.484-1.303v-3.272l5.51-0.902l1.736-9.35c0.089-0.445,0.294-0.79,0.617-1.035\n      c0.322-0.245,0.729-0.368,1.219-0.368h4.274v10.786h9.016v5.877h-9.016v18.566c0,1.068,0.267,1.903,0.801,2.505\n      c0.534,0.601,1.246,0.902,2.137,0.902c0.512,0,0.941-0.062,1.286-0.184c0.345-0.122,0.646-0.25,0.902-0.384\n      c0.256-0.133,0.484-0.261,0.684-0.384s0.4-0.184,0.601-0.184c0.245,0,0.445,0.062,0.602,0.184c0.155,0.123,0.322,0.306,0.501,0.551\n      l2.471,4.007c-1.202,1.002-2.582,1.759-4.14,2.271C205.457,49.899,203.842,50.155,202.173,50.155z M241.943,49.621h-3.707\n      c-0.78,0-1.392-0.117-1.837-0.35c-0.446-0.234-0.78-0.707-1.002-1.419l-0.734-2.437c-0.869,0.779-1.72,1.464-2.555,2.054\n      c-0.834,0.59-1.698,1.085-2.587,1.486c-0.891,0.401-1.837,0.701-2.839,0.902c-1.001,0.2-2.115,0.301-3.338,0.301\n      c-1.448,0-2.784-0.196-4.007-0.586c-1.225-0.391-2.277-0.977-3.156-1.759c-0.88-0.782-1.564-1.754-2.054-2.915\n      c-0.49-1.161-0.735-2.513-0.735-4.054c0-1.296,0.34-2.574,1.019-3.836c0.679-1.262,1.808-2.401,3.389-3.417\n      c1.58-1.016,3.684-1.86,6.311-2.53c2.627-0.67,5.888-1.005,9.784-1.005v-2.019c0-2.31-0.484-4.021-1.452-5.131\n      c-0.969-1.111-2.377-1.666-4.225-1.666c-1.335,0-2.449,0.156-3.338,0.467c-0.891,0.312-1.665,0.663-2.322,1.052\n      c-0.657,0.39-1.263,0.74-1.82,1.052c-0.556,0.312-1.168,0.467-1.837,0.467c-0.556,0-1.035-0.144-1.435-0.434\n      c-0.402-0.289-0.724-0.646-0.969-1.069l-1.503-2.638c3.94-3.606,8.693-5.41,14.259-5.41c2.003,0,3.79,0.329,5.36,0.985\n      c1.57,0.657,2.899,1.57,3.99,2.738c1.09,1.169,1.92,2.566,2.487,4.19c0.567,1.625,0.852,3.406,0.852,5.343V49.621z M225.915,44.479\n      c0.846,0,1.625-0.077,2.337-0.23c0.712-0.153,1.386-0.383,2.02-0.69c0.635-0.307,1.247-0.685,1.837-1.134\n      c0.59-0.449,1.186-0.981,1.787-1.594v-5.735c-2.404,0-4.414,0.151-6.027,0.454c-1.614,0.302-2.911,0.69-3.89,1.16\n      c-0.979,0.471-1.675,1.021-2.087,1.648c-0.412,0.628-0.617,1.311-0.617,2.051c0,1.458,0.428,2.5,1.285,3.128\n      C223.416,44.165,224.534,44.479,225.915,44.479z M257.169,0v49.621h-8.247V0H257.169z"/>\n    <path fill="#1ABC9C" d="M264.986,49.621V16.396h1.67c0.378,0,0.651,0.078,0.818,0.234c0.167,0.156,0.262,0.423,0.284,0.801\n      l0.267,7.012c1.069-2.693,2.494-4.803,4.275-6.327c1.78-1.525,3.974-2.288,6.578-2.288c1.002,0,1.925,0.106,2.772,0.317\n      c0.846,0.212,1.647,0.518,2.404,0.918l-0.434,2.204c-0.067,0.356-0.29,0.534-0.669,0.534c-0.134,0-0.322-0.044-0.567-0.133\n      c-0.245-0.089-0.551-0.189-0.918-0.3c-0.368-0.111-0.819-0.211-1.353-0.3c-0.534-0.089-1.147-0.134-1.837-0.134\n      c-2.516,0-4.581,0.78-6.194,2.338c-1.614,1.559-2.922,3.807-3.923,6.745v21.605H264.986z M292.166,16.396v21.237\n      c0,3.117,0.714,5.56,2.144,7.33c1.43,1.77,3.607,2.655,6.534,2.655c2.166,0,4.187-0.551,6.064-1.653s3.563-2.632,5.06-4.591V16.396\n      h3.172v33.225h-1.748c-0.615,0-0.934-0.289-0.956-0.868l-0.302-4.942c-1.538,1.915-3.316,3.451-5.334,4.608\n      c-2.017,1.158-4.263,1.736-6.737,1.736c-1.85,0-3.467-0.29-4.849-0.868c-1.383-0.579-2.53-1.414-3.445-2.505\n      c-0.914-1.09-1.604-2.404-2.072-3.94c-0.468-1.536-0.703-3.273-0.703-5.209V16.396H292.166z M321.794,49.621V16.396h1.736\n      c0.579,0,0.913,0.278,1.001,0.835l0.3,5.009c1.514-1.914,3.278-3.456,5.293-4.625c2.015-1.169,4.258-1.753,6.729-1.753\n      c1.825,0,3.433,0.289,4.825,0.868c1.391,0.579,2.544,1.414,3.456,2.505c0.913,1.091,1.603,2.404,2.07,3.94\n      c0.468,1.536,0.702,3.272,0.702,5.209v21.238h-3.173V28.383c0-3.116-0.712-5.559-2.137-7.329c-1.425-1.77-3.606-2.655-6.545-2.655\n      c-2.182,0-4.207,0.562-6.077,1.686s-3.54,2.666-5.008,4.625v24.91H321.794z"/>\n    <polygon fill="#1ABC9C" points="21.274,25.085 21.274,14.448 10.637,14.448 10.637,25.085 0,25.085 0,35.722 10.637,35.722\n      10.637,46.359 21.274,46.359 21.274,35.722 31.91,35.722 31.91,25.085 	"/>\n  </g>\n</svg>\n')})}),define("hospitalrun/templates/components/menu-svg",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<svg version="1.1" class="icon-nav" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="28px" height="21px" viewBox="0 0 28 21" enable-background="new 0 0 28 21" xml:space="preserve">\n<path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M2.154,16.8h23.692C27.036,16.8,28,17.74,28,18.9\n  c0,1.16-0.964,2.1-2.154,2.1H2.154C0.964,21,0,20.06,0,18.9C0,17.74,0.964,16.8,2.154,16.8z M2.154,8.4h23.692\n  C27.036,8.4,28,9.34,28,10.5c0,1.16-0.964,2.1-2.154,2.1H2.154C0.964,12.6,0,11.66,0,10.5C0,9.34,0.964,8.4,2.154,8.4z M2.154,0\n  h23.692C27.036,0,28,0.94,28,2.1c0,1.16-0.964,2.1-2.154,2.1H2.154C0.964,4.2,0,3.26,0,2.1C0,0.94,0.964,0,2.154,0z"/>\n</svg>')})}),define("hospitalrun/templates/components/quantity-calc",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["quantity-conv"]||e&&e["quantity-conv"],n={hash:{unit:"unit",firstQuantity:"firstQuantity",unitName:"unitName",index:"index",quantity:"quantity"},hashTypes:{unit:"ID",firstQuantity:"ID",unitName:"ID",index:"ID",quantity:"ID"},hashContexts:{unit:e,firstQuantity:e,unitName:e,index:e,quantity:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"quantity-conv",n)))),t.buffer.push("\n"),r}function o(e,t){var s,n="";return t.buffer.push('\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>'),s=a._triageMustache.call(e,"targetUnit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" total: "),s=a._triageMustache.call(e,"calculated",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" </label>\n            </div>\n        </div>\n    </div>\n"),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u="",h=a.helperMissing,p=this.escapeExpression,c=this;return l=a.each.call(t,"quantityGroups",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(1,i,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n"),l=a["if"].call(t,"showTotal",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(3,o,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n"),u})}),define("hospitalrun/templates/components/quantity-conv",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n    <div class="row">\n        <div class="col-xs-5">\n            <div '),t.buffer.push(d(a["bind-attr"].call(e,{hash:{"class":":form-group :required quantityClass"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push('>\n                <label class="control-label">What does 1 '),s=a._triageMustache.call(e,"unitName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" contain?</label>\n            </div>\n        </div>\n    </div>\n"),n}function o(e,t){t.buffer.push('\n                <label class="control-label">Quantity</label>\n            ')}function l(e,t){t.buffer.push('\n                <label class="control-label">Unit</label>\n            ')}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h,p,c="",d=this.escapeExpression,f=this,m=a.helperMissing;return u=a.unless.call(t,"firstQuantity",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(1,i,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n<div class="row">\n    <div class="col-xs-3">\n        <div '),r.buffer.push(d(a["bind-attr"].call(t,{hash:{"class":":form-group :required quantityClass"},hashTypes:{"class":"STRING"},hashContexts:{"class":t},contexts:[],types:[],data:r}))),r.buffer.push(">\n            "),u=a["if"].call(t,"firstQuantity",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(3,o,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n            "),r.buffer.push(d((h=a.input||t&&t.input,p={hash:{type:"text",value:"quantity","class":"form-control"},hashTypes:{type:"STRING",value:"ID","class":"STRING"},hashContexts:{type:t,value:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):m.call(t,"input",p)))),r.buffer.push('\n            <span class="help-block">'),u=a._triageMustache.call(t,"quantityHelp",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('</span>\n        </div>\n    </div>\n    \n    \n    <div class="col-xs-3">\n        <div '),r.buffer.push(d(a["bind-attr"].call(t,{hash:{"class":":form-group  :required quantityClass"},hashTypes:{"class":"STRING"},hashContexts:{"class":t},contexts:[],types:[],data:r}))),r.buffer.push(">\n            "),u=a["if"].call(t,"firstQuantity",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(5,l,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("            \n            "),r.buffer.push(d(a.view.call(t,"Ember.Select",{hash:{viewName:"select","class":"form-control",content:"unitList",optionLabelPath:"content",optionValuePath:"content",value:"unit"},hashTypes:{viewName:"STRING","class":"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING",value:"ID"},hashContexts:{viewName:t,"class":t,content:t,optionLabelPath:t,optionValuePath:t,value:t},contexts:[t],types:["ID"],data:r}))),r.buffer.push("\n        </div>\n    </div>\n</div>"),c})}),define("hospitalrun/templates/components/radio-button",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i;i=a._triageMustache.call(t,"label",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),r.buffer.push(i||0===i?i:"")})}),define("hospitalrun/templates/components/select-or-typeahead",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push("\n    "),s=a["if"].call(e,"usePricingTypeAhead",{hash:{},hashTypes:{},hashContexts:{},inverse:d.program(4,l,t),fn:d.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}function o(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(c((s=a["pricing-typeahead"]||e&&e["pricing-typeahead"],n={hash:{"class":"class",property:"property",label:"label",content:"content",selection:"selection"},hashTypes:{"class":"ID",property:"ID",label:"ID",content:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,content:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"pricing-typeahead",n)))),t.buffer.push("\n    "),r}function l(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(c((s=a["type-ahead"]||e&&e["type-ahead"],n={hash:{"class":"class",property:"property",label:"label",content:"content",selection:"selection",setOnBlur:"setOnBlur",hint:"hint"},hashTypes:{"class":"ID",property:"ID",label:"ID",content:"ID",selection:"ID",setOnBlur:"ID",hint:"ID"},hashContexts:{"class":e,property:e,label:e,content:e,selection:e,setOnBlur:e,hint:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"type-ahead",n)))),t.buffer.push("\n    "),r}function u(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(c((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"class",label:"label",property:"property",content:"content",optionValuePath:"optionValuePath",optionLabelPath:"optionLabelPath",selected:"selection",prompt:"prompt"},hashTypes:{"class":"ID",label:"ID",property:"ID",content:"ID",optionValuePath:"ID",optionLabelPath:"ID",selected:"ID",prompt:"ID"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,selected:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"em-select",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p=a.helperMissing,c=this.escapeExpression,d=this;h=a["if"].call(t,"userCanAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:d.program(6,u,r),fn:d.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(h||0===h?h:"")})}),define("hospitalrun/templates/components/sortable-column",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s="";return t.buffer.push("\n        <span "),t.buffer.push(u(a["bind-attr"].call(e,{hash:{"class":":glyphicon sortDesc:glyphicon-arrow-down:glyphicon-arrow-up"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push("></span>\n    "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l="",u=this.escapeExpression,h=this;return r.buffer.push("<th "),r.buffer.push(u(a.action.call(t,"sortBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r}))),r.buffer.push(">\n    "),o=a["if"].call(t,"sorted",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("    \n    "),o=a._triageMustache.call(t,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("\n</th>"),l})}),define("hospitalrun/templates/components/take-photo",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),t.buffer.push(d((n=a["em-select"]||e&&e["em-select"],r={hash:{label:"How Do You Want To Add A Photo?",property:"photoSource",content:"photoSources",optionValuePath:"content",optionLabelPath:"content"},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-select",r)))),t.buffer.push("\n    "),s=a["if"].call(e,"showCameraSelect",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n    <div class="camera panel panel-success">\n        <div class="panel-body">\n\n            <div class="col-sm-4">\n                <h2>Preview</h2>\n                <video></video>\n            </div>\n            <div class="col-sm-2">\n            </div>\n            <div class="col-sm-4">\n                <h2>Photo</h2>\n                <canvas id="canvas"></canvas>\n            </div>\n        </div>\n        <div class="panel-footer">\n            <button class="btn btn-default neutral" '),t.buffer.push(d(a.action.call(e,"takePhoto",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Take photo</button>\n        </div>\n    </div>\n"),i}function o(e,t){var s,n,r="";return t.buffer.push("\n        "),t.buffer.push(d((s=a["em-select"]||e&&e["em-select"],n={hash:{label:"Camera",property:"selectedCamera",content:"videoSources",optionValuePath:"content.id",optionLabelPath:"content.label"},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},s?s.call(e,n):c.call(e,"em-select",n)))),t.buffer.push("\n    "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u,h,p="",c=a.helperMissing,d=this.escapeExpression,f=this;return l=a["if"].call(t,"canCaptureVideo",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(1,i,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push('\n<div class="fileupload row">\n    <h2>Upload Photo</h2>\n    '),r.buffer.push(d((u=a["image-upload"]||t&&t["image-upload"],h={hash:{label:"Upload File",property:"fileName",selectedFile:"photoFile"},hashTypes:{label:"STRING",property:"STRING",selectedFile:"ID"},hashContexts:{label:t,property:t,selectedFile:t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"image-upload",h)))),r.buffer.push("\n</div>"),p})}),define("hospitalrun/templates/error",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push("<h1>Sorry, Something went wrong</h1>\n"),i=a._triageMustache.call(t,"message",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("\n<pre>\n"),i=a._triageMustache.call(t,"stack",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("\n</pre>\n"),o})}),define("hospitalrun/templates/index",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(2,o,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"inventory",r):ot.call(e,"link-to","inventory",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),s=a["if"].call(e,"userCan_add_inventory_request",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_inventory",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i}function o(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-package"></span>\n                            Inventory\n                        ')}function l(e,t){var s,n,r,i="";return t.buffer.push("            \n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(5,u,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"inventory.index",r):ot.call(e,"link-to","inventory.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function u(e,t){t.buffer.push('\n                            Requests\n                            <span class="octicon octicon-chevron-right"></span>\n                        ')}function h(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(8,p,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"inventory.listing",r):ot.call(e,"link-to","inventory.listing",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"userCan_add_inventory_item",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(10,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(13,f,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"inventory.reports",r):ot.call(e,"link-to","inventory.reports",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function p(e,t){t.buffer.push('\n                            Items\n                            <span class="octicon octicon-chevron-right"></span>\n                        ')}function c(e,t){var s,n,r,i="";return t.buffer.push("\n                            "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(11,d,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"inventory.batch","new",r):ot.call(e,"link-to","inventory.batch","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),i}function d(e,t){t.buffer.push('\n                                Inventory Received\n                                <span class="octicon octicon-plus"></span>\n                            ')}function f(e,t){t.buffer.push('\n                            Reports\n                            <span class="octicon octicon-chevron-right"></span>\n                        ')}function m(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(16,b,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"patients",r):ot.call(e,"link-to","patients",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(18,y,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"patients",r):ot.call(e,"link-to","patients",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_add_patient",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(20,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(23,x,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"patients.reports",r):ot.call(e,"link-to","patients.reports",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i}function b(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-organization"></span>\n                            Patients\n                        ')}function y(e,t){t.buffer.push('\n                        Patient listing\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function g(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(21,v,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"patients.edit","new",r):ot.call(e,"link-to","patients.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function v(e,t){t.buffer.push('\n                            New patient\n                            <span class="octicon octicon-plus"></span>\n                        ')}function x(e,t){t.buffer.push('\n                        Reports\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function T(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(26,I,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"appointments.index",r):ot.call(e,"link-to","appointments.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(28,D,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"appointments.index",r):ot.call(e,"link-to","appointments.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(30,C,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"appointments.today",r):ot.call(e,"link-to","appointments.today",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(32,R,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"appointments.search",r):ot.call(e,"link-to","appointments.search",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_add_appointment",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(34,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i
}function I(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-calendar"></span>\n                            Appointments\n                        ')}function D(e,t){t.buffer.push('\n                        This week\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function C(e,t){t.buffer.push('\n                        Today\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function R(e,t){t.buffer.push('\n                        Search\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function S(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(35,N,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"appointments.edit","new",r):ot.call(e,"link-to","appointments.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function N(e,t){t.buffer.push('\n                            New appointment\n                            <span class="octicon octicon-plus"></span>\n                        ')}function _(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(38,w,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"labs.index",r):ot.call(e,"link-to","labs.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(40,P,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"labs.index",r):ot.call(e,"link-to","labs.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(42,A,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"labs.completed",r):ot.call(e,"link-to","labs.completed",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_add_lab",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(44,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i}function w(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-microscope"></span>\n                            Labs\n                        ')}function P(e,t){t.buffer.push('\n                        Requests\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function A(e,t){t.buffer.push('\n                        Completed\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function G(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(45,L,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"labs.edit","new",r):ot.call(e,"link-to","labs.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function L(e,t){t.buffer.push('\n                            New lab\n                            <span class="octicon octicon-plus"></span>\n                        ')}function E(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(48,k,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"imaging.index",r):ot.call(e,"link-to","imaging.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(40,P,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"imaging.index",r):ot.call(e,"link-to","imaging.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(42,A,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"imaging.completed",r):ot.call(e,"link-to","imaging.completed",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_add_imaging",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(50,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i}function k(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-device-camera"></span>\n                            Imaging\n                        ')}function M(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(51,O,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"imaging.edit","new",r):ot.call(e,"link-to","imaging.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function O(e,t){t.buffer.push('\n                            New imaging\n                            <span class="octicon octicon-plus"></span>\n                        ')}function q(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(54,B,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"medication.index",r):ot.call(e,"link-to","medication.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(40,P,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"medication.index",r):ot.call(e,"link-to","medication.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(42,A,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"medication.completed",r):ot.call(e,"link-to","medication.completed",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_add_medication",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(56,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i}function B(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-file-text"></span>\n                            Medication\n                        ')}function V(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(57,F,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"medication.edit","new",r):ot.call(e,"link-to","medication.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(59,H,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"medication.return","new",r):ot.call(e,"link-to","medication.return","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function F(e,t){t.buffer.push('\n                            New request\n                            <span class="octicon octicon-plus"></span>                    \n                        ')}function H(e,t){t.buffer.push('\n                            Return medication\n                            <span class="octicon octicon-mail-reply"></span>\n                        ')}function U(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(62,j,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"admin.lookup",r):ot.call(e,"link-to","admin.lookup",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),s=a["if"].call(e,"userCan_update_config",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(64,K,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),s=a["if"].call(e,"userCan_users",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(69,W,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                </nav>\n            </div>\n        "),i}function j(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-person"></span>\n                            Admin\n                        ')}function K(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(65,Q,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"admin.address",r):ot.call(e,"link-to","admin.address",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("                    \n                    \n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(67,z,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"admin.lookup",r):ot.call(e,"link-to","admin.lookup",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function Q(e,t){t.buffer.push('\n                            Address Options\n                            <span class="octicon octicon-chevron-right"></span>\n                        ')}function z(e,t){t.buffer.push('\n                            Lookup Lists\n                            <span class="octicon octicon-chevron-right"></span>\n                        ')}function W(e,t){var s,n,r,i="";return t.buffer.push("\n                        "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(70,$,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"users.index",r):ot.call(e,"link-to","users.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"userCan_add_user",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(72,X,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),i}function $(e,t){t.buffer.push('\n                            User listing\n                            <span class="octicon octicon-chevron-right"></span>\n                        ')}function X(e,t){var s,n,r,i="";return t.buffer.push("\n                            "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(73,Y,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"users.edit","new",r):ot.call(e,"link-to","users.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),i}function Y(e,t){t.buffer.push('\n                                New user\n                                <span class="octicon octicon-plus"></span>\n                            ')}function J(e,t){var s,n,r,i="";return t.buffer.push('\n            <div class="nav-category">\n                <header class="category-header">\n                    <h2 class="primary-section">\n                        '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"primary-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(76,Z,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"invoices.index",r):ot.call(e,"link-to","invoices.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </h2>\n                    <div class="panel-options">\n                        <a href="#" class="hidden-link-list-trigger">\n                            <span class="mega-octicon octicon-gear"></span>\n                        </a>\n                        <nav class="hidden-link-list">\n                            <h4>More options</h4>\n                            <a href="#" class="setting-link">Pin to Nav</a>\n                            <a href="#" class="setting-link">Set as default view</a>\n                        </nav>\n                    </div>\n                </header>\n                <nav class="category-links">\n                    '),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(78,et,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"invoices.index",r):ot.call(e,"link-to","invoices.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("                                                            \n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(80,tt,t),contexts:[e,e],types:["STRING","STRING"],data:t},s=n?n.call(e,"invoices.edit","new",r):ot.call(e,"link-to","invoices.edit","new",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(82,st,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"pricing.index",r):ot.call(e,"link-to","pricing.index",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n=a["link-to"]||e&&e["link-to"],r={hash:{"class":"sub-section-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},inverse:it.noop,fn:it.program(84,at,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"pricing.profiles",r):ot.call(e,"link-to","pricing.profiles",r),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \n                </nav>\n            </div>\n        "),i}function Z(e,t){t.buffer.push('\n                            <span class="mega-octicon octicon-person"></span>\n                            Billing\n                        ')}function et(e,t){t.buffer.push('\n                        Invoices\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function tt(e,t){t.buffer.push('\n                        New Invoice\n                        <span class="octicon octicon-plus"></span>\n                    ')}function st(e,t){t.buffer.push('\n                        Price List\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}function at(e,t){t.buffer.push('\n                        Pricing Profiles\n                        <span class="octicon octicon-chevron-right"></span>\n                    ')}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var nt,rt="",it=this,ot=a.helperMissing;return r.buffer.push('<section class="view index">\n\n    <h1 class="view-title">What would you like to do?</h1>\n\n    <div class="splash-nav">\n        '),nt=a["if"].call(t,"userCan_inventory",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(1,i,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_patients",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(15,m,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_appointments",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(25,T,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_labs",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(37,_,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_imaging",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(47,E,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_medication",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(53,q,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_admin",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(61,U,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("\n        "),nt=a["if"].call(t,"userCan_billing",{hash:{},hashTypes:{},hashContexts:{},inverse:it.noop,fn:it.program(75,J,r),contexts:[t],types:["ID"],data:r}),(nt||0===nt)&&r.buffer.push(nt),r.buffer.push("        \n    </div>\n</section>"),rt})}),define("hospitalrun/templates/inv-purchase",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(f((s=a["quantity-calc"]||e&&e["quantity-calc"],n={hash:{calculated:"originalQuantity",targetUnit:"distributionUnit",quantityGroups:"quantityGroups"},hashTypes:{calculated:"ID",targetUnit:"ID",quantityGroups:"ID"},hashContexts:{calculated:e,targetUnit:e,quantityGroups:e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"quantity-calc",n)))),t.buffer.push("\n"),r}function o(e,t){var s,n,r="";return t.buffer.push('\n    <div class="form-group">\n        <label>Quantity</label>\n        '),t.buffer.push(f((s=a.input||e&&e.input,n={hash:{"class":"form-control",value:"originalQuantity",type:"text",disabled:!0},hashTypes:{"class":"STRING",value:"ID",type:"STRING",disabled:"BOOLEAN"},hashContexts:{"class":e,value:e,type:e,disabled:e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"input",n)))),t.buffer.push("                    \n    </div>\n"),r}function l(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(f((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"location",label:"Location",list:"warehouseList",selection:"location"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"select-or-typeahead",n)))),t.buffer.push("\n    "),t.buffer.push(f((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"aisleLocation",label:"Aisle Location",list:"aisleLocationList",selection:"aisleLocation"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},s?s.call(e,n):d.call(e,"select-or-typeahead",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var u,h,p,c="",d=a.helperMissing,f=this.escapeExpression,m=this;return r.buffer.push('<div class="row">\n    '),r.buffer.push(f((h=a["date-picker"]||t&&t["date-picker"],p={hash:{property:"dateReceived",label:"Date Received","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"date-picker",p)))),r.buffer.push("\n    "),r.buffer.push(f((h=a["em-input"]||t&&t["em-input"],p={hash:{property:"invoiceNo",label:"Invoice Number","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"em-input",p)))),r.buffer.push("\n</div>\n"),u=a["if"].call(t,"canEditQuantity",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(3,o,r),fn:m.program(1,i,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push('\n<div class="row">\n    '),r.buffer.push(f((h=a["em-input"]||t&&t["em-input"],p={hash:{property:"purchaseCost",label:"Purchase Cost","class":"required","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"em-input",p)))),r.buffer.push("\n    "),r.buffer.push(f((h=a["em-input"]||t&&t["em-input"],p={hash:{property:"lotNumber",label:"Serial/Lot Number","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"em-input",p)))),r.buffer.push('\n</div>\n<div class="row">\n    '),r.buffer.push(f((h=a["date-picker"]||t&&t["date-picker"],p={hash:{property:"expirationDate",label:"Expiration Date",minDate:"now","class":"col-sm-4"},hashTypes:{property:"STRING",label:"STRING",minDate:"STRING","class":"STRING"},hashContexts:{property:t,label:t,minDate:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"date-picker",p)))),r.buffer.push('\n</div>\n<div class="row">    \n    '),r.buffer.push(f((h=a["select-or-typeahead"]||t&&t["select-or-typeahead"],p={hash:{property:"vendor",label:"Vendor",list:"vendorList",selection:"vendor","class":"col-sm-6 required"},hashTypes:{property:"STRING",label:"STRING",list:"ID",selection:"ID","class":"STRING"},hashContexts:{property:t,label:t,list:t,selection:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"select-or-typeahead",p)))),r.buffer.push("\n    "),r.buffer.push(f((h=a["em-input"]||t&&t["em-input"],p={hash:{property:"vendorItemNo",label:"Vendor Item Number","class":"col-sm-6"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"em-input",p)))),r.buffer.push("    \n</div>\n"),u=a["if"].call(t,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(5,l,r),contexts:[t],types:["ID"],data:r}),(u||0===u)&&r.buffer.push(u),r.buffer.push("\n"),r.buffer.push(f((h=a["em-checkbox"]||t&&t["em-checkbox"],p={hash:{label:"Gift In Kind",property:"giftInKind"},hashTypes:{label:"STRING",property:"STRING"},hashContexts:{label:t,property:t},contexts:[],types:[],data:r},h?h.call(t,p):d.call(t,"em-checkbox",p)))),c})}),define("hospitalrun/templates/inventory-basic",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n        <div class="form-group col-sm-2">\n            <label>ID</label>\n            '),t.buffer.push(d((s=a.input||e&&e.input,n={hash:{"class":"form-control",value:"friendlyId",type:"text",disabled:!0},hashTypes:{"class":"STRING",value:"ID",type:"STRING",disabled:"BOOLEAN"},hashContexts:{"class":e,value:e,type:e,disabled:e},contexts:[],types:[],data:t},s?s.call(e,n):c.call(e,"input",n)))),t.buffer.push("\n        </div>\n    "),r}function o(e,t){var s,n="";return t.buffer.push('\n        <div class="form-group col-sm-2">\n            <label>Quantity</label>\n            <p class="form-control-static">'),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>                    \n        </div>\n    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u,h,p="",c=a.helperMissing,d=this.escapeExpression,f=this;return r.buffer.push('<div class="row">\n    '),l=a.unless.call(t,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(1,i,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n    "),r.buffer.push(d((u=a["em-input"]||t&&t["em-input"],h={hash:{property:"name",label:"Name","class":"required  col-sm-8"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-input",h)))),r.buffer.push("\n    "),l=a.unless.call(t,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(3,o,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n\n</div>\n"),r.buffer.push(d((u=a["em-text"]||t&&t["em-text"],h={hash:{label:"Description",property:"description",rows:1},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:t,property:t,rows:t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-text",h)))),r.buffer.push('\n<div class="row">\n    '),r.buffer.push(d((u=a["em-select"]||t&&t["em-select"],h={hash:{label:"Type",property:"type",content:"inventoryTypes",optionValuePath:"content",optionLabelPath:"content","class":"required col-sm-4"},hashTypes:{label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING","class":"STRING"},hashContexts:{label:t,property:t,content:t,optionValuePath:t,optionLabelPath:t,"class":t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-select",h)))),r.buffer.push("\n    "),r.buffer.push(d((u=a["em-input"]||t&&t["em-input"],h={hash:{property:"crossReference",label:"Cross Reference","class":"col-sm-8"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-input",h)))),r.buffer.push('\n</div>\n<div class="row">\n    '),r.buffer.push(d((u=a["em-input"]||t&&t["em-input"],h={hash:{property:"reorderPoint",label:"Reorder Point","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-input",h)))),r.buffer.push("\n    "),r.buffer.push(d((u=a["em-input"]||t&&t["em-input"],h={hash:{property:"price",label:"Price Per Unit","class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:t,label:t,"class":t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-input",h)))),r.buffer.push("\n    "),r.buffer.push(d((u=a["em-select"]||t&&t["em-select"],h={hash:{label:"Distribution Unit","class":"col-sm-3",property:"distributionUnit",content:"unitList",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{label:"STRING","class":"STRING",property:"STRING",content:"ID",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:t,"class":t,property:t,content:t,optionLabelPath:t,optionValuePath:t},contexts:[],types:[],data:r},u?u.call(t,h):c.call(t,"em-select",h)))),r.buffer.push("            \n</div>"),p})}),define("hospitalrun/templates/item-charges",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(b((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"charges-by-type",n):m.call(e,"partial","charges-by-type",n)))),t.buffer.push("\n"),r}function o(e,t){var s,n="";return t.buffer.push('\n    <div class="panel detail-section">\n        <div class="panel-heading">\n            <h3 class="panel-title">\n                Charged Items\n                '),s=a["if"].call(e,"canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n            </h3>\n        </div>\n        <div class="panel-body detail-section-content">\n            <table class="table">\n                <tr class="table-header">\n                    <th>Date</th>\n                    <th>Item</th>\n                    <th>Quantity</th>\n                    <th>Action</th>\n                </tr>\n                '),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </table>\n        </div>\n    </div>\n"),n
}function l(e,t){var s="";return t.buffer.push('\n                    <button class="btn btn-primary align-right" '),t.buffer.push(b(a.action.call(e,"showAddCharge",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span>Add Item</button>\n                '),s}function u(e,t){var s,n="";return t.buffer.push("\n                    "),s=a.each.call(e,"charges",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),n}function h(e,t){var s,n="";return t.buffer.push("\n                        "),s=a.unless.call(e,"medicationCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),n}function p(e,t){var s,n,r,i="";return t.buffer.push("\n                            <tr>\n                                <td>"),t.buffer.push(b((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"dateCharged",r):m.call(e,"date-format","dateCharged",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"pricingItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"quantity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>\n                                    "),s=a["if"].call(e,"parentController.canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),s=a["if"].call(e,"parentController.canAddCharge",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(11,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </td>\n                            </tr>\n                        "),i}function c(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default neutral" '),t.buffer.push(b(a.action.call(e,"showEditCharge","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                    "),s}function d(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default warning" '),t.buffer.push(b(a.action.call(e,"showDeleteCharge","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('>\n                                            <span class="octicon octicon-x"></span>Delete\n                                        </button>\n                                    '),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m=a.helperMissing,b=this.escapeExpression,y=this;f=a["if"].call(t,"organizeByType",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(3,o,r),fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(f||0===f?f:"")})}),define("hospitalrun/templates/item-listing",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o,l,u="",h=a.helperMissing,p=this.escapeExpression;return r.buffer.push('<div class="panel panel-primary">\n    '),r.buffer.push(p((o=a.partial||t&&t.partial,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},o?o.call(t,"paging",l):h.call(t,"partial","paging",l)))),r.buffer.push("\n    "),i=a._triageMustache.call(t,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("    \n</div>"),u})}),define("hospitalrun/templates/loading",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push('\n<div class="jumbotron">\n    <div class="alert alert-warning" role="alert">\n        <h1><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>Please wait... Loading... </h1>\n        <p>Did You Know: '),i=a._triageMustache.call(t,"loading-message",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("</p>\n    </div>\n</div>"),o})}),define("hospitalrun/templates/login",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i="",o=this.escapeExpression;return r.buffer.push('<div class="container">\n    <form class="form-signin" role="form" '),r.buffer.push(o(a.action.call(t,"authenticate",{hash:{on:"submit"},hashTypes:{on:"STRING"},hashContexts:{on:t},contexts:[t],types:["STRING"],data:r}))),r.buffer.push('>\n        <h2 class="form-signin-heading">Please sign in</h2>\n        <div class="form-group">\n            '),r.buffer.push(o(a.view.call(t,"Ember.TextField",{hash:{id:"identification",valueBinding:"identification",placeholder:"Username","class":"form-control"},hashTypes:{id:"STRING",valueBinding:"STRING",placeholder:"STRING","class":"STRING"},hashContexts:{id:t,valueBinding:t,placeholder:t,"class":t},contexts:[t],types:["ID"],data:r}))),r.buffer.push('\n        </div>\n        <div class="form-group">\n            '),r.buffer.push(o(a.view.call(t,"Ember.TextField",{hash:{id:"password",type:"password",valueBinding:"password",placeholder:"Password","class":"form-control"},hashTypes:{id:"STRING",type:"STRING",valueBinding:"STRING",placeholder:"STRING","class":"STRING"},hashContexts:{id:t,type:t,valueBinding:t,placeholder:t,"class":t},contexts:[t],types:["ID"],data:r}))),r.buffer.push('\n        </div>\n        <button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button>\n    </form>\n</div> <!-- /container -->'),i})}),define("hospitalrun/templates/modal",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n                    <button class="btn btn-primary on-white" '),t.buffer.push(h(a.action.call(e,"updateButtonAction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(h(a["bind-attr"].call(e,{hash:{disabled:"isUpdateDisabled"},hashTypes:{disabled:"ID"},hashContexts:{disabled:e},contexts:[],types:[],data:t}))),t.buffer.push(">"),s=a._triageMustache.call(e,"updateButtonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n                "),n}function o(e,t){var s="";return t.buffer.push('\n                    <button class="btn btn-default warning" '),t.buffer.push(h(a.action.call(e,"cancel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Cancel</button>\n                "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u="",h=this.escapeExpression,p=this;return r.buffer.push('<div class="modal fade">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 class="modal-title">'),l=a._triageMustache.call(t,"title",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push('</h4>\n            </div>\n            <div class="modal-body">\n                '),l=a._triageMustache.call(t,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push('\n            </div>\n            <div class="modal-footer">\n                '),l=a.unless.call(t,"hideUpdateButton",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,i,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n                "),l=a.unless.call(t,"hideCancelButton",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(3,o,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n            </div>\n        </div>\n    </div>\n</div>"),u})}),define("hospitalrun/templates/navigation",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n        <div class="navbar-form navbar-left site-search-form" role="search">\n            <div class="form-group">\n                '),t.buffer.push(m((s=a["text-search"]||e&&e["text-search"],n={hash:{valueBinding:"searchText",autofocus:"true",placeholder:"Search","class":"form-control"},hashTypes:{valueBinding:"STRING",autofocus:"STRING",placeholder:"STRING","class":"STRING"},hashContexts:{valueBinding:e,autofocus:e,placeholder:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):f.call(e,"text-search",n)))),t.buffer.push('\n            </div>\n            <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>\n        </div>\n        '),r}function o(e,t){var s="";return t.buffer.push('\n            <a href="#" class="logout" '),t.buffer.push(m(a.action.call(e,"invalidateSession",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Logout</a>\n        "),s}function l(e,t){var s,n,r,i="";return t.buffer.push("\n            "),n=a["link-to"]||e&&e["link-to"],r={hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,u,t),contexts:[e],types:["STRING"],data:t},s=n?n.call(e,"login",r):f.call(e,"link-to","login",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),i}function u(e,t){t.buffer.push("Login")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p,c,d="",f=a.helperMissing,m=this.escapeExpression,b=this;return r.buffer.push('<nav class="navbar navbar-default" role="navigation">\n    <div class="container-fluid">\n        <!-- Brand and toggle get grouped for better mobile display -->\n        <div class="navbar-header">\n            <a class="navbar-brand" href="#">\n              '),r.buffer.push(m((p=a.partial||t&&t.partial,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},p?p.call(t,"components/logo-svg",c):f.call(t,"partial","components/logo-svg",c)))),r.buffer.push("\n            </a>\n        </div>\n\n        "),h=a["if"].call(t,"allowSearch",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(1,i,r),contexts:[t],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),r.buffer.push('\n        \n        <ul class="nav navbar-nav">\n            <li>\n                <p class="navbar-text">'),h=a._triageMustache.call(t,"syncStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),r.buffer.push('</p>\n            </li>\n        </ul>\n        \n        <nav class="header-nav">\n        '),h=a["if"].call(t,"session.isAuthenticated",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(5,l,r),fn:b.program(3,o,r),contexts:[t],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),r.buffer.push('\n            <a class="menu-link" href="/#">'),r.buffer.push(m((p=a.partial||t&&t.partial,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},p?p.call(t,"components/menu-svg",c):f.call(t,"partial","components/menu-svg",c)))),r.buffer.push("</a>\n        </nav>\n    </div><!-- /.container-fluid -->\n</nav>\n"),d})}),define("hospitalrun/templates/paging",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s="";return t.buffer.push('\n    <div class="btn-group pull-right">\n        <button class="btn btn-default on-white" '),t.buffer.push(l(a.action.call(e,"previousPage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(l(a["bind-attr"].call(e,{hash:{disabled:"disablePreviousPage"},hashTypes:{disabled:"ID"},hashContexts:{disabled:e},contexts:[],types:[],data:t}))),t.buffer.push('>\n            <span class="glyphicon glyphicon-chevron-left"></span>\n        </button>\n        <button class="btn btn-default on-white" '),t.buffer.push(l(a.action.call(e,"nextPage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(l(a["bind-attr"].call(e,{hash:{disabled:"disableNextPage"},hashTypes:{disabled:"ID"},hashContexts:{disabled:e},contexts:[],types:[],data:t}))),t.buffer.push('>\n            <span class="glyphicon glyphicon-chevron-right"></span>\n        </button>\n    </div>\n'),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=this.escapeExpression,u=this;o=a["if"].call(t,"showPagination",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/templates/panel",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push("\n            "),s=a["if"].call(e,"disabledAction",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(4,l,t),fn:y.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function o(e,t){var s,n="";return t.buffer.push('\n                <button class="btn btn-primary on-white disabled-btn" '),t.buffer.push(b(a.action.call(e,"disabledAction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push(">"),s=a._triageMustache.call(e,"updateButtonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n            "),n}function l(e,t){var s,n="";return t.buffer.push('\n                <button class="btn btn-primary on-white" '),t.buffer.push(b(a.action.call(e,"updateButtonAction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(b(a["bind-attr"].call(e,{hash:{disabled:"isUpdateDisabled"},hashTypes:{disabled:"ID"},hashContexts:{disabled:e},contexts:[],types:[],data:t}))),t.buffer.push(">"),s=a._triageMustache.call(e,"updateButtonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n            "),n}function u(e,t){var s,n="";return t.buffer.push("\n            "),s=a["if"].call(e,"cancelButtonText",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(9,p,t),fn:y.program(7,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function h(e,t){var s,n="";return t.buffer.push('\n                <button class="btn btn-default warning" '),t.buffer.push(b(a.action.call(e,"cancel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">"),s=a._triageMustache.call(e,"cancelButtonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n            "),n}function p(e,t){var s="";return t.buffer.push('\n                <button class="btn btn-default warning" '),t.buffer.push(b(a.action.call(e,"cancel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Cancel</button>\n            "),s}function c(e,t){var s,n="";return t.buffer.push("\n            <button "),t.buffer.push(b(a["bind-attr"].call(e,{hash:{"class":"class"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(" "),t.buffer.push(b(a.action.call(e,"buttonAction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push(">\n                "),s=a["if"].call(e,"buttonIcon",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(12,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                "),s=a._triageMustache.call(e,"buttonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </button>\n        "),n}function d(e,t){var s="";return t.buffer.push("\n                    <span "),t.buffer.push(b(a["bind-attr"].call(e,{hash:{"class":"buttonIcon"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push("></span> \n                "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m="",b=this.escapeExpression,y=this;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">\n        '),f=a._triageMustache.call(t,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push('\n    </div>\n    <div class="panel-footer">\n        '),f=a["if"].call(t,"showUpdateButton",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n        "),f=a.unless.call(t,"hideCancelButton",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,u,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n        "),f=a.each.call(t,"additionalButtons",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(11,c,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n    </div>\n</div>"),m})}),define("hospitalrun/templates/print",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i;i=a._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),r.buffer.push(i||0===i?i:"")})}),define("hospitalrun/templates/report-rows",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push("\n    "),s=a["if"].call(e,"rowAction",{hash:{},hashTypes:{},hashContexts:{},inverse:d.program(5,u,t),fn:d.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n"),n}function o(e,t){var s,n="";return t.buffer.push("\n        <tr "),t.buffer.push(c(a.action.call(e,"rowAction.action","rowAction.model",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["ID","ID"],data:t}))),t.buffer.push(">\n            "),s=a.each.call(e,"row",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(3,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n    "),n}function l(e,t){var s,n,r="";return t.buffer.push("\n                <td>"),t.buffer.push(c((s=a["array-display"]||e&&e["array-display"],n={hash:{content:""},hashTypes:{content:"ID"},hashContexts:{content:e},contexts:[],types:[],data:t},s?s.call(e,n):p.call(e,"array-display",n)))),t.buffer.push("</td>\n            "),r}function u(e,t){var s,n="";return t.buffer.push("\n        <tr>\n            "),s=a.each.call(e,"",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(3,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var h,p=a.helperMissing,c=this.escapeExpression,d=this;h=a.each.call(t,"currentReportRows",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,i,r),contexts:[t],types:["ID"],data:r}),r.buffer.push(h||0===h?h:"")})}),define("hospitalrun/templates/search-listing",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="",l=this.escapeExpression;return r.buffer.push('<div class="panel panel-primary">\n    <div class="panel-body">\n        '),i=a._triageMustache.call(t,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push('\n    </div>\n</div>\n<button class="btn btn-primary on-white" '),r.buffer.push(l(a.action.call(t,"allItems",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r}))),r.buffer.push(">"),i=a._triageMustache.call(t,"view.allButtonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("</button>\n\n"),o})}),define("hospitalrun/templates/section",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";return t.buffer.push('\n            <div class="pull-right screen-button">\n                <button class="btn btn-primary" '),t.buffer.push(b(a.action.call(e,"newButtonAction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push(">"),s=a._triageMustache.call(e,"newButtonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n            </div>\n        "),n}function o(e,t){var s,n="";return t.buffer.push("\n            "),s=a.each.call(e,"additionalButtons",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),n}function l(e,t){var s,n="";return t.buffer.push('\n                <div class="pull-right screen-button">\n                    <button '),t.buffer.push(b(a["bind-attr"].call(e,{hash:{"class":"class"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(" "),t.buffer.push(b(a.action.call(e,"buttonAction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push(">\n                        "),s=a["if"].call(e,"buttonIcon",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a._triageMustache.call(e,"buttonText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n                </div>\n            "),n}function u(e,t){var s="";return t.buffer.push("\n                            <span "),t.buffer.push(b(a["bind-attr"].call(e,{hash:{"class":"buttonIcon"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push("></span> \n                        "),s}function h(e,t){var s,n="";return t.buffer.push("\n                "),s=a["if"].call(e,"statusQuery",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(11,d,t),fn:y.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),n}function p(e,t){var s,n,r,i="";return t.buffer.push("\n                    <li>"),n=a["query-params"]||e&&e["query-params"],r={hash:{status:"statusQuery"},hashTypes:{status:"ID"},hashContexts:{status:e},contexts:[],types:[],data:t},s=n?n.call(e,r):g.call(e,"query-params",r),n=a["link-to"]||e&&e["link-to"],r={hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,c,t),contexts:[e,e],types:["ID","sexpr"],data:t},s=n?n.call(e,"linkTo",s,r):g.call(e,"link-to","linkTo",s,r),(s||0===s)&&t.buffer.push(s),t.buffer.push("</li>\n                "),i}function c(e,t){var s;s=a._triageMustache.call(e,"text",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),t.buffer.push(s||0===s?s:"")}function d(e,t){var s,n,r,i="";return t.buffer.push("\n                    <li>"),n=a["link-to"]||e&&e["link-to"],r={hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,c,t),contexts:[e],types:["ID"],data:t},s=n?n.call(e,"linkTo",r):g.call(e,"link-to","linkTo",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("</li>\n                "),i}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m="",b=this.escapeExpression,y=this,g=a.helperMissing;return r.buffer.push('<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h1 class="pull-left">'),f=a._triageMustache.call(t,"currentScreenTitle",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("</h1>\n        "),f=a["if"].call(t,"newButtonAction",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n        "),f=a["if"].call(t,"additionalButtons",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(3,o,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push('\n\n        <ul class="nav nav-pills navbar-right">\n            '),f=a.each.call(t,"subActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,h,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push('\n        </ul>\n\n    </div>\n    <div class="panel-body">\n        '),f=a._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n    </div>\n</div>"),m})}),define("hospitalrun/users/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete User"})}),define("hospitalrun/users/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o="";return r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete the user '),i=a._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("?\n</div>"),o})}),define("hospitalrun/users/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/users/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","hospitalrun/mixins/user-roles","exports"],function(e,t,s,a){"use strict";var n=e["default"],r=t["default"],i=s["default"];a["default"]=n.extend(i,{needs:"users/index",updateCapability:"add_user",users:r.computed.alias("controllers.users/index.model"),actions:{update:function(){var e=this.get("model"),t=this.get("users");if(this.get("isNew")){var s=e.getProperties("password","email","roles","displayName");s.name=s.email,s.id="org.couchdb.user:"+s.email,r.isEmpty(s.password)&&(s.password=uuid.v4()+uuid.v4()),e.deleteRecord(),e=this.get("store").createRecord("user",s),this.set("model",e)}if(r.isEmpty(this.get("userPrefix"))){for(var a=1,n="p",i=n+0,o=t.findBy("userPrefix",n);!r.isEmpty(o);)n=i+a++,o=t.findBy("userPrefix",n);this.set("userPrefix",n)}e.save().then(function(){this.displayAlert("User Saved","The user has been saved.")}.bind(this))}}})}),define("hospitalrun/users/edit/route",["hospitalrun/routes/abstract-edit-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({editTitle:"Edit User",modelName:"user",newTitle:"New User"})}),define("hospitalrun/users/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push("\n    "),s=a.unless.call(e,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),t.buffer.push(d((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"displayName",label:"Display Name"},hashTypes:{property:"STRING",label:"STRING"},hashContexts:{property:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-input",r)))),t.buffer.push("\n    "),t.buffer.push(d((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"email",type:"email",label:"Email"},hashTypes:{property:"STRING",type:"STRING",label:"STRING"},hashContexts:{property:e,type:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-input",r)))),t.buffer.push("\n    "),t.buffer.push(d((n=a["em-input"]||e&&e["em-input"],r={hash:{property:"password",type:"password",label:"Password"},hashTypes:{property:"STRING",type:"STRING",label:"STRING"},hashContexts:{property:e,type:e,label:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"em-input",r)))),t.buffer.push('\n    <div class="form-group has-success">\n        <label class="control-label">Role</label>\n        '),t.buffer.push(d((n=a["role-select"]||e&&e["role-select"],r={hash:{value:"roles","class":"form-control",content:"userRoles"},hashTypes:{value:"ID","class":"STRING",content:"ID"},hashContexts:{value:e,"class":e,content:e},contexts:[],types:[],data:t},n?n.call(e,r):c.call(e,"role-select",r)))),t.buffer.push("\n    </div>\n"),i}function o(e,t){var s,n="";return t.buffer.push('\n        <div class="form-group has-success">\n            <label class="control-label">Username</label>\n            <div class="form-control">\n                '),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </div>\n        </div>\n    "),n}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var l,u,h,p=this,c=a.helperMissing,d=this.escapeExpression;u=a["em-form"]||t&&t["em-form"],h={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:p.noop,fn:p.program(1,i,r),contexts:[],types:[],data:r},l=u?u.call(t,h):c.call(t,"em-form",h),r.buffer.push(l||0===l?l:"")})}),define("hospitalrun/users/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/users/index/controller",["hospitalrun/controllers/abstract-paged-controller","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{addPermission:"add_user",deletePermission:"delete_user",sortProperties:["displayName"]})}),define("hospitalrun/users/index/route",["hospitalrun/routes/abstract-index-route","hospitalrun/mixins/user-session","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{newButtonAction:function(){return this.currentUserCan("add_user")?"newItem":null}.property(),newButtonText:"+ new user",pageTitle:"User Listing",model:function(){return this.store.find("user")}})}),define("hospitalrun/users/index/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n="";
return t.buffer.push('\n    <table class="table">\n        <tr class="table-header">\n            <th>Name</th>\n            <th>Username</th>\n            <th>Email</th>\n            <th>Role</th>\n            '),s=a["if"].call(e,"showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </tr>\n        "),s=a.each.call(e,{hash:{itemController:"users/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:y.noop,fn:y.program(4,l,t),contexts:[],types:[],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </table>\n"),n}function o(e,t){t.buffer.push("\n                <th>Actions</th>\n            ")}function l(e,t){var s,n="";return t.buffer.push("\n            <tr "),t.buffer.push(b(a.action.call(e,"editItem","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                <td>"),s=a._triageMustache.call(e,"displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>                \n                <td>"),s=a._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"email",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                <td>"),s=a._triageMustache.call(e,"displayRole",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                "),s=a["if"].call(e,"parentController.showActions",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            </tr>\n        "),n}function u(e,t){var s,n="";return t.buffer.push("\n                    <td>\n                        "),s=a["if"].call(e,"parentController.canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),s=a["if"].call(e,"parentController.canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </td>\n                "),n}function h(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default" '),t.buffer.push(b(a.action.call(e,"editItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                        "),s}function p(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-default" '),t.buffer.push(b(a.action.call(e,"deleteItem","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Delete</button>\n                        "),s}function c(e,t){var s,n="";return t.buffer.push('\n    <div class="alert alert-info">\n        <em>No users found.</em>  \n        '),s=a["if"].call(e,"canAdd",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(11,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n"),n}function d(e,t){var s="";return t.buffer.push('\n            <em>Create a new user?</em> <button class="btn btn-primary" '),t.buffer.push(b(a.action.call(e,"newItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">New User</button>\n        "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var f,m="",b=this.escapeExpression,y=this;return f=a["if"].call(t,"hasRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(10,c,r),fn:y.program(1,i,r),contexts:[t],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n"),m})}),define("hospitalrun/users/index/view",["hospitalrun/views/item-listing","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/users/item-controller/controller",["ember","hospitalrun/mixins/user-roles","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.ObjectController.extend(n,{displayRole:function(){var e=this.get("roles");return a.isEmpty(e)?void 0:e[0]}.property("roles")})}),define("hospitalrun/users/route",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Route.extend(s.SimpleAuth.AuthenticatedRouteMixin,{actions:{allItems:function(){this.transitionTo("users.index")}}})}),define("hospitalrun/utils/date-sort",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]={sortByDate:function(e,t,a){var n=e.get(a),r=t.get(a);return s.compare(n.getTime(),r.getTime())}}}),define("hospitalrun/views/application",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.View.extend({currentPathDidChange:function(){s.run.next(this,function(){this.$("ul.nav li:has(>a.active)").addClass("active"),this.$("ul.nav li:not(:has(>a.active))").removeClass("active")})}.observes("controller.currentPath"),willInsertElement:function(){$("#apploading").remove()}})}),define("hospitalrun/views/print",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.View.extend({didInsertElement:function(){this._super(),s.run.scheduleOnce("afterRender",this,function(){window.print()})}})}),define("hospitalrun/views/search-listing",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.View.extend({layoutName:"search-listing"})}),define("hospitalrun/visits/add-diagnosis/controller",["ember","hospitalrun/controllers/abstract-edit-controller","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=n.extend({diagnosisList:a.computed.alias("controllers.visits.diagnosisList"),needs:["visits","visits/edit"],editController:a.computed.alias("controllers.visits/edit"),lookupListsToUpdate:[{name:"diagnosisList",property:"diagnosis"}],title:"Add Diagnosis",updateButtonText:"Add",updateButtonAction:"add",showUpdateButton:!0,actions:{cancel:function(){this.send("closeModal")},add:function(){this.updateLookupLists();var e={date:new Date,description:this.get("diagnosis")};this.get("editController").send("addDiagnosis",e)}}})}),define("hospitalrun/visits/add-diagnosis/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(p((s=a["select-or-typeahead"]||e&&e["select-or-typeahead"],n={hash:{property:"diagnosis",label:"Diagnosis",list:"diagnosisList",hint:!1},hashTypes:{property:"STRING",label:"STRING",list:"ID",hint:"BOOLEAN"},hashContexts:{property:e,label:e,list:e,hint:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"select-or-typeahead",n)))),t.buffer.push(" \n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/visits/add-diagnosis/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/visits/charge/controller",["hospitalrun/procedures/charge/controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:["visits/edit"],cancelAction:"closeModal",newPricingItem:!1,requestingController:n.computed.alias("controllers.visits/edit"),pricingList:n.computed.alias("controllers.visits/edit.pricingList")})}),define("hospitalrun/visits/charge/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o,l=a.helperMissing,u=this.escapeExpression;r.buffer.push(u((i=a.partial||t&&t.partial,o={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},i?i.call(t,"procedures/charge",o):l.call(t,"partial","procedures/charge",o))))})}),define("hospitalrun/visits/charge/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/visits/delete/controller",["hospitalrun/controllers/abstract-delete-controller","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({title:"Delete Visit",afterDeleteAction:function(){var e=this.get("deleteFromPatient");return e?"visitDeleted":"closeModal"}.property("deleteFromPatient")})}),define("hospitalrun/visits/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var i,o,l,u="",h=a.helperMissing,p=this.escapeExpression;return r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span> \n    Are you sure you wish to delete this visit?\n</div>\n<form role="form">\n    <div class="form-group">\n        <label class="control-label">Start Date</label>\n        <p class="form-control-static">'),r.buffer.push(p((o=a["date-format"]||t&&t["date-format"],l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},o?o.call(t,"startDate",l):h.call(t,"date-format","startDate",l)))),r.buffer.push('</p>        \n    </div>\n     <div class="form-group">\n        <label class="control-label">End Date</label>\n        <p class="form-control-static">'),r.buffer.push(p((o=a["date-format"]||t&&t["date-format"],l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r},o?o.call(t,"endDate",l):h.call(t,"date-format","endDate",l)))),r.buffer.push('</p>        \n    </div>\n     <div class="form-group">\n        <label class="control-label">Examiner</label>\n        <p class="form-control-static">'),i=a._triageMustache.call(t,"examiner",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push('</p>        \n    </div>\n    <div class="form-group">\n        <label class="control-label">Location</label>\n        <p class="form-control-static">'),i=a._triageMustache.call(t,"location",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push('</p>        \n    </div>\n    <div class="form-group">\n        <label class="control-label">Type</label>\n        <p class="form-control-static">'),i=a._triageMustache.call(t,"visitType",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("</p>        \n    </div>\n</form>"),u})}),define("hospitalrun/visits/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/visits/edit/controller",["hospitalrun/controllers/abstract-edit-controller","hospitalrun/models/add-diagnosis","hospitalrun/mixins/charge-actions","ember","hospitalrun/mixins/patient-submodule","hospitalrun/mixins/user-session","hospitalrun/mixins/visit-types","exports"],function(e,t,s,a,n,r,i,o){"use strict";var l=e["default"],u=t["default"],h=s["default"],p=a["default"],c=n["default"],d=r["default"],f=i["default"];o["default"]=l.extend(h,c,d,f,{needs:"visits",canAddImaging:function(){return this.currentUserCan("add_imaging")}.property(),canAddLab:function(){return this.currentUserCan("add_lab")}.property(),canAddMedication:function(){return this.currentUserCan("add_medication")}.property(),canAddDiagnosis:function(){return this.currentUserCan("add_diagnosis")}.property(),canAddProcedure:function(){return this.currentUserCan("add_procedure")}.property(),canAddVitals:function(){return this.currentUserCan("add_vitals")}.property(),canDeleteDiagnosis:function(){return this.currentUserCan("delete_diagnosis")}.property(),canDeleteImaging:function(){return this.currentUserCan("delete_imaging")}.property(),canDeleteLab:function(){return this.currentUserCan("delete_lab")}.property(),canDeleteMedication:function(){return this.currentUserCan("delete_medication")}.property(),canDeleteProcedure:function(){return this.currentUserCan("delete_procedure")}.property(),canDeleteVitals:function(){return this.currentUserCan("delete_vitals")}.property(),isAdmissionVisit:function(){var e=this.get("visitType"),t="Admission"===e;return t?this.set("outPatient",!1):(this.set("status"),this.set("outPatient",!0)),t}.property("visitType"),startDateChanged:function(){var e=this.get("isAdmissionVisit"),t=this.get("startDate");e||this.set("endDate",t)}.observes("isAdmissionVisit","startDate"),cancelAction:"returnToPatient",chargePricingCategory:"Ward",chargeRoute:"visits.charge",dateTimeFormat:"l h:mm A",diagnosisList:p.computed.alias("controllers.visits.diagnosisList"),findPatientVisits:!1,pricingList:null,pricingTypes:p.computed.alias("controllers.visits.wardPricingTypes"),physicianList:p.computed.alias("controllers.visits.physicianList"),locationList:p.computed.alias("controllers.visits.locationList"),visitTypesList:p.computed.alias("controllers.visits.visitTypeList"),lookupListsToUpdate:[{name:"diagnosisList",property:"primaryBillingDiagnosis",id:"diagnosis_list"},{name:"diagnosisList",property:"primaryDiagnosis",id:"diagnosis_list"},{name:"physicianList",property:"examiner",id:"physician_list"},{name:"locationList",property:"location",id:"visit_location_list"}],newVisit:!1,visitStatuses:["Admitted","Discharged"],updateCapability:"add_visit",_finishAfterUpdate:function(){this.displayAlert("Visit Saved","The visit record has been saved.")},haveAdditionalDiagnoses:function(){return!p.isEmpty(this.get("additionalDiagnoses"))}.property("additionalDiagnoses.@each"),afterUpdate:function(){var e=this.get("patient"),t=e.get("admitted"),s=!1,a=this.get("status");"Admitted"!==a||t?"Discharged"===a&&t&&this.getPatientVisits(e).then(function(t){p.isEmpty(t.findBy("status","Admitted"))&&(e.set("admitted",!1),s=!0)}.bind(this)):(e.set("admitted",!0),s=!0),s?e.save().then(this._finishAfterUpdate.bind(this)):this.displayAlert("Visit Saved","The visit record has been saved.")},beforeUpdate:function(){return this.get("isNew")&&this.set("newVisit",!0),new p.RSVP.Promise(function(e,t){this.updateCharges().then(e,t)}.bind(this))},updateList:function(e,t,s){this.get(e).then(function(e){s?e.removeObject(t):e.addObject(t),this.send("update",!0),this.send("closeModal")}.bind(this))},actions:{addDiagnosis:function(e){var t=this.get("additionalDiagnoses");p.isArray(t)||(t=[]),t.addObject(e),this.set("additionalDiagnoses",t),this.send("update",!0),this.send("closeModal")},deleteDiagnosis:function(e){var t=this.get("additionalDiagnoses");t.removeObject(e),this.set("additionalDiagnoses",t),this.send("update",!0)},addVitals:function(e){this.updateList("vitals",e)},cancel:function(){var e=this.get("model");this.get("isNew")?e.deleteRecord():e.rollback(),this.send(this.get("cancelAction"))},deleteProcedure:function(e){this.updateList("procedures",e,!0)},deleteVitals:function(e){this.updateList("vitals",e,!0)},editImaging:function(e){e.setProperties({isCompleting:!1,returnToVisit:!0}),this.transitionToRoute("imaging.edit",e)},editLab:function(e){e.setProperties({isCompleting:!1,returnToVisit:!0}),this.transitionToRoute("labs.edit",e)},editMedication:function(e){e.set("returnToVisit",!0),this.transitionToRoute("medication.edit",e)},showAddVitals:function(){var e=this.get("store").createRecord("vital",{dateRecorded:new Date});this.send("openModal","visits.vitals.edit",e)},newImaging:function(){var e=this.get("store").createRecord("imaging",{isCompleting:!1,patient:this.get("patient"),visit:this.get("model"),returnToVisit:!0});this.transitionToRoute("imaging.edit",e)},newLab:function(){var e=this.get("store").createRecord("lab",{isCompleting:!1,patient:this.get("patient"),visit:this.get("model"),returnToVisit:!0});this.transitionToRoute("labs.edit",e)},newMedication:function(){var e=this.get("store").createRecord("medication",{prescriptionDate:moment().startOf("day").toDate(),patient:this.get("patient"),visit:this.get("model"),returnToVisit:!0});this.transitionToRoute("medication.edit",e)},showAddDiagnosis:function(){this.send("openModal","visits.add-diagnosis",u.create())},showAddProcedure:function(){var e=this.get("store").createRecord("procedure",{procedureDate:new Date,visit:this.get("model")});this.transitionToRoute("procedures.edit",e)},showDeleteImaging:function(e){this.send("openModal","imaging.delete",e)},showDeleteLab:function(e){this.send("openModal","labs.delete",e)},showDeleteMedication:function(e){this.send("openModal","medication.delete",e)},showDeleteProcedure:function(e){this.send("openModal","visits.procedures.delete",e)},showDeleteVitals:function(e){this.send("openModal","visits.vitals.delete",e)},showEditProcedure:function(e){p.isEmpty(e.get("visit"))&&e.set("visit",this.get("model")),this.transitionToRoute("procedures.edit",e)},showEditVitals:function(e){this.send("openModal","visits.vitals.edit",e)}}})}),define("hospitalrun/visits/edit/route",["hospitalrun/routes/abstract-edit-route","hospitalrun/mixins/charge-route","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend(n,{editTitle:"Edit Visit",modelName:"visit",newTitle:"New Visit",pricingCategory:"Ward"})}),define("hospitalrun/visits/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r,i="";return t.buffer.push('\n                \n                    <div class="row">\n                        <div class="form-group col-sm-3">\n                            <label>Patient</label>\n                            <p class="form-control-static">'),s=a._triageMustache.call(e,"patient.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</p>\n                        </div>\n                        "),s=a["if"].call(e,"isAdmissionVisit",{hash:{},hashTypes:{},hashContexts:{},inverse:W.program(4,l,t),fn:W.program(2,o,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),t.buffer.push(z((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-3",property:"location",label:"Location",list:"locationList",selection:"location"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"select-or-typeahead",r)))),t.buffer.push('\n                    </div>\n                    <div class="row">\n                        '),t.buffer.push(z((n=a["em-select"]||e&&e["em-select"],r={hash:{"class":"col-sm-3 required",label:"Visit Type",property:"visitType",content:"visitTypes",optionValuePath:"content",optionLabelPath:"content"},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"em-select",r)))),t.buffer.push("\n                        "),s=a["if"].call(e,"isAdmissionVisit",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(6,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),t.buffer.push(z((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-3",property:"examiner",label:"Examiner",list:"physicianList",selection:"examiner"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"select-or-typeahead",r)))),t.buffer.push('\n                    </div>\n                    <div class="row">\n                        '),t.buffer.push(z((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-5",property:"primaryDiagnosis",label:"Admitting Diagnosis",list:"diagnosisList",selection:"primaryDiagnosis",hint:!1},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID",hint:"BOOLEAN"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e,hint:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"select-or-typeahead",r)))),t.buffer.push(" \n                        "),t.buffer.push(z((n=a["select-or-typeahead"]||e&&e["select-or-typeahead"],r={hash:{"class":"col-sm-5",property:"primaryBillingDiagnosis",label:"Final/Billing Diagnosis",list:"diagnosisList",selection:"primaryBillingDiagnosis",hint:!1},hashTypes:{"class":"STRING",property:"STRING",label:"STRING",list:"ID",selection:"ID",hint:"BOOLEAN"},hashContexts:{"class":e,property:e,label:e,list:e,selection:e,hint:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"select-or-typeahead",r)))),t.buffer.push("\n                        "),s=a["if"].call(e,"canAddDiagnosis",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(8,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </div>\n                    "),s=a["if"].call(e,"haveAdditionalDiagnoses",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(10,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    "),t.buffer.push(z((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Patient History",property:"history",rows:3},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:e,property:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"em-text",r)))),t.buffer.push("\n                    "),t.buffer.push(z((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"History since last seen",property:"historySince",rows:3},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:e,property:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"em-text",r)))),t.buffer.push("\n                    "),t.buffer.push(z((n=a["em-text"]||e&&e["em-text"],r={hash:{label:"Notes",property:"notes",rows:3},hashTypes:{label:"STRING",property:"STRING",rows:"INTEGER"},hashContexts:{label:e,property:e,rows:e},contexts:[],types:[],data:t},n?n.call(e,r):Q.call(e,"em-text",r)))),t.buffer.push("\n                "),i}function o(e,t){var s,n,r="";return t.buffer.push("\n                            "),t.buffer.push(z((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"startDate",label:"Admission Date",format:"dateTimeFormat",showTime:!0,"class":"col-sm-3 required"},hashTypes:{property:"STRING",label:"STRING",format:"ID",showTime:"BOOLEAN","class":"STRING"},hashContexts:{property:e,label:e,format:e,showTime:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):Q.call(e,"date-picker",n)))),t.buffer.push("\n                            "),t.buffer.push(z((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"endDate",label:"Discharge Date",format:"dateTimeFormat",showTime:!0,"class":"col-sm-3"},hashTypes:{property:"STRING",label:"STRING",format:"ID",showTime:"BOOLEAN","class":"STRING"},hashContexts:{property:e,label:e,format:e,showTime:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):Q.call(e,"date-picker",n)))),t.buffer.push("\n                        "),r}function l(e,t){var s,n,r="";return t.buffer.push("\n                            "),t.buffer.push(z((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"startDate",label:"Date","class":"col-sm-3 required"},hashTypes:{property:"STRING",label:"STRING","class":"STRING"},hashContexts:{property:e,label:e,"class":e},contexts:[],types:[],data:t},s?s.call(e,n):Q.call(e,"date-picker",n)))),t.buffer.push("\n                        "),r}function u(e,t){var s,n,r="";return t.buffer.push("\n                            "),t.buffer.push(z((s=a["em-select"]||e&&e["em-select"],n={hash:{"class":"col-sm-3",label:"Visit Status",property:"status",content:"visitStatuses",optionValuePath:"content",optionLabelPath:"content",prompt:" "},hashTypes:{"class":"STRING",label:"STRING",property:"STRING",content:"ID",optionValuePath:"STRING",optionLabelPath:"STRING",prompt:"STRING"},hashContexts:{"class":e,label:e,property:e,content:e,optionValuePath:e,optionLabelPath:e,prompt:e},contexts:[],types:[],data:t},s?s.call(e,n):Q.call(e,"em-select",n)))),t.buffer.push("\n                        "),r}function h(e,t){var s="";return t.buffer.push('\n                            <div class="form-group col-sm-2">\n                                <label class="control-label">&nbsp;</label>\n                                <p class="form-control-static">                                \n                                    <button class="btn btn-primary" '),t.buffer.push(z(a.action.call(e,"showAddDiagnosis",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> Add Diagnosis</button>\n                                </p>\n                            </div>\n                        '),s}function p(e,t){var s,n="";return t.buffer.push('\n                        <h4>\n                            Additional Diagnoses\n                        </h4>    \n                        <table class="table">\n                            <tr class="table-header">\n                                <th>Date</th>\n                                <th>Diagnosis</th>\n                                <th>Delete</th>\n                            </tr>\n                            '),s=a["with"].call(e,"canDeleteDiagnosis","as","canDeleteDiagnosis",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(11,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        </table>\n                    "),n}function c(e,t){var s,n="";return t.buffer.push("\n                                "),s=a.each.call(e,"additionalDiagnoses",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(12,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                            "),n}function d(e,t){var s,n,r,i="";return t.buffer.push("\n                                <tr>\n                                    <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"date",r):Q.call(e,"date-format","date",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"description",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>\n                                        "),s=a["if"].call(e,"canDeleteDiagnosis",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(13,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </td>\n                                </tr>\n                                "),i}function f(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default warning" '),t.buffer.push(z(a.action.call(e,"deleteDiagnosis","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                        '),s}function m(e,t){var s,n,r,i="";return t.buffer.push('\n        <div class="panel">\n            <div class="panel-heading">\n                <h3 class="panel-title">\n                    <a data-toggle="collapse" data-parent="#visit-accordion" href="#visit-procedures">\n                        Procedures \n                        '),s=a["if"].call(e,"canAddProcedure",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(16,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </a>\n                </h3>\n            </div>\n            <div id="visit-procedures" class="panel-collapse collapse in">\n                <div class="panel-body">\n                    <table class="table">\n                        <tr class="table-header">\n                            <th>Date</th>\n                            <th>Procedure</th>\n                            <th>Actions</th>\n                        </tr>\n                        '),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(18,y,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </table>\n                </div>\n            </div>\n        </div>    \n        <div class="panel">\n            <div class="panel-heading">\n                <h3 class="panel-title">\n                    <a data-toggle="collapse" data-parent="#patient-accordion" href="#patient-medication">\n                        Medication \n                        '),s=a["if"].call(e,"canAddMedication",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(24,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </a>\n                </h3>        \n            </div>\n            <div id="patient-medication" class="panel-collapse collapse in">\n                <div class="panel-body">\n                    <table class="table">\n                        <tr class="table-header">\n                            <th>Date</th>\n                            <th>Name</th>\n                            <th>Status</th>\n                            <th>Prescription</th>\n                            <th>Requested By</th>\n                            <th>Actions</th>\n                        </tr>\n                        '),s=a.each.call(e,"medication",{hash:{itemController:"medication/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:W.noop,fn:W.program(26,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </table>\n                </div>\n            </div>\n        </div>\n        <div class="panel">\n            <div class="panel-heading">\n                <h3 class="panel-title">\n                    <a data-toggle="collapse" data-parent="#patient-accordion" href="#patient-labs">\n                        Labs \n                        '),s=a["if"].call(e,"canAddLab",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(32,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </a>\n                </h3>\n            </div>\n            <div id="patient-labs" class="panel-collapse collapse in">\n                <div class="panel-body">\n                    <table class="table">\n                        <tr class="table-header">\n                            <th>Date Requested</th>\n                            <th>Lab Type</th>\n                            <th>Status</th>\n                            <th>Date Processed</th>\n                            <th>Result</th>\n                            <th>Notes</th>\n                            <th>Requested By</th>\n                            <th>Actions</th>\n                        </tr>\n                        '),s=a.each.call(e,"labs",{hash:{itemController:"labs/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:W.noop,fn:W.program(34,N,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </table>\n                </div>\n            </div>\n        </div>\n        <div class="panel">\n            <div class="panel-heading">\n                <h3 class="panel-title">\n                    <a data-toggle="collapse" data-parent="#patient-accordion" href="#patient-imaging">\n                        Imaging \n                        '),s=a["if"].call(e,"canAddImaging",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(40,A,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </a>\n                </h3>\n            </div>\n            <div id="patient-imaging" class="panel-collapse collapse in">\n                <div class="panel-body">\n                    <table class="table">\n                        <tr class="table-header">\n                            <th>Date Requested</th>\n                            <th>Imaging Type</th>\n                            <th>Status</th>\n                            <th>Date Processed</th>\n                            <th>Result</th>\n                            <th>Notes</th>\n                            <th>Requested By</th>\n                            <th>Actions</th>\n                        </tr>\n                        '),s=a.each.call(e,"imaging",{hash:{itemController:"imaging/item-controller"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:e},inverse:W.noop,fn:W.program(42,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </table>\n                </div>\n            </div>\n        </div>    \n        <div class="panel">\n            <div class="panel-heading">\n                <h3 class="panel-title">\n                    <a data-toggle="collapse" data-parent="#visit-accordion" href="#visit-vitals">\n                        Vitals \n                        '),s=a["if"].call(e,"canAddVitals",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(48,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n                    </a>\n                </h3>\n            </div>\n            <div id="visit-vitals" class="panel-collapse collapse in">\n                <div class="panel-body">\n                    <table class="table">\n                        <tr class="table-header">\n                            <th>Date</th>\n                            <th>Temperature</th>\n                            <th>Weight</th>\n                            <th>Height</th>\n                            <th>SBP</th>\n                            <th>DBP</th>\n                            <th>Heart Rate</th>\n                            <th>Respiratory Rate</th>\n                            <th>Delete</th>\n                        </tr>\n                        '),s=a["with"].call(e,"","as","parentController",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(50,O,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                    </table>\n                </div>\n            </div>\n        </div>\n        "),n=a["em-form"]||e&&e["em-form"],r={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:e,submit_button:e},inverse:W.noop,fn:W.program(56,F,t),contexts:[],types:[],data:t},s=n?n.call(e,r):Q.call(e,"em-form",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    "),i
}function b(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-primary align-right" '),t.buffer.push(z(a.action.call(e,"showAddProcedure",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Procedure</button>\n                        '),s}function y(e,t){var s,n="";return t.buffer.push("\n                            "),s=a.each.call(e,"procedures",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(19,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),n}function g(e,t){var s,n,r,i="";return t.buffer.push("\n                            <tr>\n                                <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"procedureDate",r):Q.call(e,"date-format","procedureDate",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"description",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>\n                                    "),s=a["if"].call(e,"parentController.canAddProcedure",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(20,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),s=a["if"].call(e,"parentController.canDeleteProcedure",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(22,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </td>\n                            </tr>\n                            "),i}function v(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default neutral" '),t.buffer.push(z(a.action.call(e,"showEditProcedure","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                    "),s}function x(e,t){var s="";return t.buffer.push('\n                                        <button class="btn btn-default warning" '),t.buffer.push(z(a.action.call(e,"showDeleteProcedure","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                    '),s}function T(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-primary align-right" '),t.buffer.push(z(a.action.call(e,"newMedication",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Medication</button>\n                        '),s}function I(e,t){var s,n,r,i="";return t.buffer.push("\n                            <tr "),t.buffer.push(z(a.action.call(e,"editMedication","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"prescriptionDate",r):Q.call(e,"date-format","prescriptionDate",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"inventoryItem.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"prescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>\n                                    "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(27,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </td>\n                            </tr>\n                        "),i}function D(e,t){var s,n="";return t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canAddMedication",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(28,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(30,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),n}function C(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default neutral" '),t.buffer.push(z(a.action.call(e,"editMedication","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                        "),s}function R(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default warning" '),t.buffer.push(z(a.action.call(e,"showDeleteMedication","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>  Delete</button>\n                                        '),s}function S(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-primary align-right" '),t.buffer.push(z(a.action.call(e,"newLab",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Lab</button>\n                        '),s}function N(e,t){var s,n,r,i="";return t.buffer.push("\n                            <tr "),t.buffer.push(z(a.action.call(e,"editLab","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):Q.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"labType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"labDate",r):Q.call(e,"date-format","labDate",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"result",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>\n                                    "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(35,_,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </td>\n                            </tr>\n                        "),i}function _(e,t){var s,n="";return t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canAddLab",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(36,w,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canDeleteLab",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(38,P,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),n}function w(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default neutral" '),t.buffer.push(z(a.action.call(e,"editLab","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                        "),s}function P(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default warning" '),t.buffer.push(z(a.action.call(e,"showDeleteLab","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span>  Delete</button>\n                                        '),s}function A(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-primary align-right" '),t.buffer.push(z(a.action.call(e,"newImaging",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Imaging</button>\n                        '),s}function G(e,t){var s,n,r,i="";return t.buffer.push("\n                            <tr "),t.buffer.push(z(a.action.call(e,"editImaging","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n                                <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"requestedDate",r):Q.call(e,"date-format","requestedDate",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"imagingType.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"imagingDate",r):Q.call(e,"date-format","imagingDate",r)))),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"result",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"notes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>"),s=a._triageMustache.call(e,"requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                <td>\n                                    "),s=a["if"].call(e,"canEdit",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(43,L,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                </td>\n                            </tr>\n                        "),i}function L(e,t){var s,n="";return t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canAddImaging",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(44,E,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canDeleteImaging",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(46,k,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    "),n}function E(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default neutral" '),t.buffer.push(z(a.action.call(e,"editImaging","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                        "),s}function k(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default warning" '),t.buffer.push(z(a.action.call(e,"showDeleteImaging","",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                        '),s}function M(e,t){var s="";return t.buffer.push('\n                            <button class="btn btn-primary align-right" '),t.buffer.push(z(a.action.call(e,"showAddVitals",{hash:{bubbles:!1},hashTypes:{bubbles:"BOOLEAN"},hashContexts:{bubbles:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push('><span class="octicon octicon-plus"></span> New Vitals</button>\n                        '),s}function O(e,t){var s,n="";return t.buffer.push("\n                            "),s=a.each.call(e,"vitals",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(51,q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                        "),n}function q(e,t){var s,n,r,i="";return t.buffer.push("\n                                <tr>\n                                    <td>"),t.buffer.push(z((n=a["date-format"]||e&&e["date-format"],r={hash:{format:"l h:mm A"},hashTypes:{format:"STRING"},hashContexts:{format:e},contexts:[e],types:["ID"],data:t},n?n.call(e,"dateRecorded",r):Q.call(e,"date-format","dateRecorded",r)))),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"temperature",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"weight",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"height",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"sbp",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"dbp",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"heartRate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>"),s=a._triageMustache.call(e,"respiratoryRate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n                                    <td>\n                                        "),s=a["if"].call(e,"parentController.canAddVitals",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(52,B,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                        "),s=a["if"].call(e,"parentController.canDeleteVitals",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(54,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n                                    </td>\n                                </tr>\n                            "),i}function B(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default neutral" '),t.buffer.push(z(a.action.call(e,"showEditVitals","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">Edit</button>\n                                        "),s}function V(e,t){var s="";return t.buffer.push('\n                                            <button class="btn btn-default warning" '),t.buffer.push(z(a.action.call(e,"showDeleteVitals","",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push('><span class="octicon octicon-x"></span> Delete</button>\n                                        '),s}function F(e,t){var s,n,r="";return t.buffer.push("\n            "),t.buffer.push(z((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"item-charges",n):Q.call(e,"partial","item-charges",n)))),t.buffer.push("\n        "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var H,U,j,K="",Q=a.helperMissing,z=this.escapeExpression,W=this;return r.buffer.push('<div class="panel-group" id="visit-accordion">\n    <div class="panel">\n        <div class="panel-heading">\n            <h3 class="panel-title">\n                <a data-toggle="collapse" data-parent="#visit-accordion" href="#visit-info">\n                    Visit Information\n                </a>\n            </h3>\n        </div>\n        <div id="visit-info" class="panel-collapse collapse in">\n            <div class="panel-body">\n             \n                '),U=a["em-form"]||t&&t["em-form"],j={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:W.noop,fn:W.program(1,i,r),contexts:[],types:[],data:r},H=U?U.call(t,j):Q.call(t,"em-form",j),(H||0===H)&&r.buffer.push(H),r.buffer.push("\n            </div>\n        </div>\n    </div>\n    "),H=a.unless.call(t,"isNew",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(15,m,r),contexts:[t],types:["ID"],data:r}),(H||0===H)&&r.buffer.push(H),r.buffer.push("\n</div>"),K})}),define("hospitalrun/visits/edit/view",["hospitalrun/views/panel","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/visits/index/route",["hospitalrun/routes/abstract-index-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({modelName:"visit"})}),define("hospitalrun/visits/procedures/delete/controller",["hospitalrun/controllers/abstract-delete-controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:"visits/edit",afterDeleteAction:"notifyProcedureDelete",editController:n.computed.alias("controllers.visits/edit"),title:"Delete Procedure",actions:{notifyProcedureDelete:function(){this.send("closeModal"),this.get("editController").send("deleteProcedure",this.get("model"))}}})}),define("hospitalrun/visits/procedures/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span>    \n    Are you sure you wish to delete this procedure?\n</div>')})}),define("hospitalrun/visits/procedures/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/visits/route",["hospitalrun/routes/abstract-module-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({addCapability:"add_visit",additionalModels:[{name:"anesthesiaTypes",findArgs:["lookup","anesthesia_types"]},{name:"anesthesiologistList",findArgs:["lookup","anesthesiologists"]},{name:"diagnosisList",findArgs:["lookup","diagnosis_list"]},{name:"physicianList",findArgs:["lookup","physician_list"]},{name:"locationList",findArgs:["lookup","visit_location_list"]},{name:"procedureList",findArgs:["lookup","procedure_list"]},{name:"procedureLocations",findArgs:["lookup","procedure_locations"]},{name:"procedurePricingTypes",findArgs:["lookup","procedure_pricing_types"]},{name:"visitTypesList",findArgs:["lookup","visit_types"]},{name:"wardPricingTypes",findArgs:["lookup","ward_pricing_types"]}],moduleName:"visits",newButtonAction:null,sectionTitle:"Visits"})}),define("hospitalrun/visits/search/route",["hospitalrun/routes/abstract-search-route","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend({moduleName:"visits",searchKeys:["_id","firstName","lastName"],searchModel:"visit"})}),define("hospitalrun/visits/search/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push("\n    "),t.buffer.push(u((s=a.partial||e&&e.partial,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"visits/index",n):l.call(e,"partial","visits/index",n)))),t.buffer.push("\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l=a.helperMissing,u=this.escapeExpression,h=this;o=a.view.call(t,"search-listing",{hash:{newButtonText:"New Visit",allButtonText:"All Visits"},hashTypes:{newButtonText:"STRING",allButtonText:"STRING"},hashContexts:{newButtonText:t,allButtonText:t},inverse:h.noop,fn:h.program(1,i,r),contexts:[t],types:["STRING"],data:r}),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/visits/vitals/delete/controller",["hospitalrun/controllers/abstract-delete-controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:"visits/edit",afterDeleteAction:"notifyVitalsDelete",editController:n.computed.alias("controllers.visits/edit"),title:"Delete Vitals",actions:{notifyVitalsDelete:function(){this.send("closeModal"),this.get("editController").send("deleteVitals",this.get("model"))}}})}),define("hospitalrun/visits/vitals/delete/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{},r.buffer.push('<div class="alert alert-danger">\n    <span class="glyphicon glyphicon-warning-sign"></span>    \n    Are you sure you wish to delete these vitals?\n</div>')})}),define("hospitalrun/visits/vitals/delete/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/visits/vitals/edit/controller",["hospitalrun/controllers/abstract-edit-controller","ember","exports"],function(e,t,s){"use strict";var a=e["default"],n=t["default"];s["default"]=a.extend({needs:"visits/edit",cancelAction:"closeModal",editController:n.computed.alias("controllers.visits/edit"),newVitals:!1,temperatureLabel:"Temperature (°C)",title:function(){var e=this.get("isNew");return e?"Add Vitals":"Edit Vitals"}.property("isNew"),updateCapability:"add_vitals",beforeUpdate:function(){return this.get("isNew")&&this.set("newVitals",!0),n.RSVP.Promise.resolve()},afterUpdate:function(e){this.get("newVitals")?this.get("editController").send("addVitals",e):this.send("closeModal")}})}),define("hospitalrun/visits/vitals/edit/template",["ember","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.Handlebars.template(function(e,t,a,n,r){function i(e,t){var s,n,r="";return t.buffer.push('\n    <div class="row">\n        '),t.buffer.push(p((s=a["date-picker"]||e&&e["date-picker"],n={hash:{property:"dateRecorded",label:"Date Recorded","class":"col-sm-6",format:"l h:mm A",showTime:!0},hashTypes:{property:"STRING",label:"STRING","class":"STRING",format:"STRING",showTime:"BOOLEAN"},hashContexts:{property:e,label:e,"class":e,format:e,showTime:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"date-picker",n)))),t.buffer.push('\n    </div>\n    <div class="row">        \n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"temperature",label:"temperatureLabel"},hashTypes:{"class":"STRING",property:"STRING",label:"ID"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"weight",label:"Weight"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"height",label:"Height"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push('\n        \n    </div>\n    <div class="row">\n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"sbp",label:"SBP"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"dbp",label:"DBP"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push('\n    </div>\n    <div class="row">\n        '),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"heartRate",label:"Heart Rate"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n        "),t.buffer.push(p((s=a["em-input"]||e&&e["em-input"],n={hash:{"class":"col-sm-3",property:"respiratoryRate",label:"Respiratory Rate"},hashTypes:{"class":"STRING",property:"STRING",label:"STRING"},hashContexts:{"class":e,property:e,label:e},contexts:[],types:[],data:t},s?s.call(e,n):h.call(e,"em-input",n)))),t.buffer.push("\n    </div>\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,s.Handlebars.helpers),r=r||{};var o,l,u,h=a.helperMissing,p=this.escapeExpression,c=this;l=a["em-form"]||t&&t["em-form"],u={hash:{model:"",submit_button:!1},hashTypes:{model:"ID",submit_button:"BOOLEAN"},hashContexts:{model:t,submit_button:t},inverse:c.noop,fn:c.program(1,i,r),contexts:[],types:[],data:r},o=l?l.call(t,u):h.call(t,"em-form",u),r.buffer.push(o||0===o?o:"")})}),define("hospitalrun/visits/vitals/edit/view",["hospitalrun/views/modal","exports"],function(e,t){"use strict";var s=e["default"];t["default"]=s.extend()}),define("hospitalrun/config/environment",["ember"],function(e){var t="hospitalrun";try{var s=t+"/config/environment",a=e["default"].$('meta[name="'+s+'"]').attr("content"),n=JSON.parse(unescape(a));return{"default":n}}catch(r){throw new Error('Could not read config from meta tag with name "'+s+'".')}}),runningTests?require("hospitalrun/tests/test-helper"):require("hospitalrun/app")["default"].create({});